<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to pass request parameter to the grid &#8212; OroCommerce 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How to use WSSE authentication" href="how_to_use_wsse_authentication.html" />
    <link rel="prev" title="How to enable https" href="how_to_enable_https.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

<script language="javascript" type="text/javascript">
    <!--
    var materialdropdown = document.querySelector('.material-dropdown'),
    middle = document.querySelector('.middle'),
    cross = document.querySelector('.cross'),
    dropdown = document.querySelector('.dropdown');

materialdropdown.addEventListener('click', function() {
  middle.classList.toggle('active');
  cross.classList.toggle('active');
  dropdown.classList.toggle('active');
})
    -->
  </script>
    


  </head>
  <body role="document">
  

    <div class="document">
<div class="header">
    <div class="main-nav">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div id="nav-menu" class="navbar-top">
                <div class="nav-container">
                    <div class="navbar-header">
                        <a href="https://www.orocommerce.com/"
                           class="navbar-brand"><img
                                src="https://www.orocommerce.com/wp-content/themes/commerce/images/orocommerce_logo.svg"
                                alt="Open Source B2B eCommerce Platform - OroCommerce"></a>
                    </div>
                    <div class="navbar-header">
                        <p class="navbar-header" href="#">Documentation for... </p>
                    </div>
                    <div id="navbar" class="navbar-left">
                        <div class="navbar-collapse collapse">
                            <div class="menu-header-menu-container">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/index.html">All Users</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/getting_started/index.html">Getting Started with UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/inventory/index.html">Warehouses and Inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/customers/index.html">Customers and Customer Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/quotes/index.html">Quotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/payment/index.html">Payment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/shipping/index.html">Shipping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/marketing_web_catalog/index.html">Web Catalogs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/marketing_landing_pages/index.html">Landing Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../seo_config_guide/index.html">SEO Configuration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/taxes/index.html">Taxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/segments/index.html">Segments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/system/index.html">System Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../frontstore_guide/index.html">B2B Buyer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/getting_started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/navigation/index.html">Navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/profile/index.html">My Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/users_roles/index.html">My Organization Users and Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/orders/index.html">Orders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/rfq/index.html">Request for Quote</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/quotes/index.html">Quotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/shopping_lists/index.html">Shopping Lists</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../seo_config_guide/index.html">SEO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../seo_config_guide/website/index.html">Website Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin_guide/index.html">Admin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/price_list_sharding.html">How to Configure Price List Sharding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/optimize_index_and_price_calculation.html">Optimize Website Indexation and Price Recalculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../system_requirements.html">System Requirements</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../basics/index.html">OroPlatform Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extend_and_customize/index.html">Customizing Oro Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration/index.html">Web Services API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theme/index.html">Customizing the Theme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_upgrade_and_patch/index.html">Extension and Patch Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/index.html">Annotation and Configuration Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Using and Managing Entities</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">How to... Articles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../community/contribute.html">Contributing to Oro Source Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../community/translations.html">Contributing to Translatiion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../community/write.html">Contributing to Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../community/issues/index.html">Contacting Support and Reporting Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../community/question.html">Submitting a Question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../community/release.html">Release Process</a></li>
</ul>
</li>
</ul>


                                <!--
                                <ul class="nav">
                                    <li><a href="#">Installation</a></li>
                                    <li><a href="#">Configuration</a></li>
                                    <li><a href="#">Use <i class="fa fa-search search-complete__icon"></i></a>
                                        <ul class="sub-nav">
                                            <li class="sub-menu" ><a href="#">HTML</a>
                                            </li>
                                            <li class="sub-menu" ><a
                                                   href="#">CSS</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Resets</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Grids</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Frameworks</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li><a class="sub-menu" href="#">Development</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Ajax</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">jQuery</a>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                    <li><a href="#">Contribution</a>
                                        <ul class="sub-nav">
                                            <li class="sub-menu"><a href="#">Themes</a>
                                            </li>
                                            <li class="sub-menu"><a href="#">Plugins</a>
                                            </li>
                                            <li class="sub-menu"><a href="#">Custom
                                                Post Types</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Portfolios</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Testimonials</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="sub-menu"><a href="#">Options</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                                -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </nav>
    </div>
</div>


      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-pass-request-parameter-to-the-grid">
<span id="index-0"></span><span id="id1"></span><h1>How to pass request parameter to the grid<a class="headerlink" href="#how-to-pass-request-parameter-to-the-grid" title="Permalink to this headline">¶</a></h1>
<p>In some cases, you need to pass parameters from the request to the grid.
This task may be solved using grid event listeners. An existing listener implementation also could be used.</p>
<div class="section" id="grid-configuration">
<h2>Grid Configuration<a class="headerlink" href="#grid-configuration" title="Permalink to this headline">¶</a></h2>
<p>Suppose that you have a grid configuration and a named parameter inside where clause of its source query.
For example:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/Acme/Bundle/TaskBundle/Resources/config/oro/datagrids.yml</span>
<span class="l l-Scalar l-Scalar-Plain">datagrids</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l l-Scalar l-Scalar-Plain">acme-tasks-grid</span><span class="p p-Indicator">:</span>
        <span class="c1"># ...</span>
        <span class="l l-Scalar l-Scalar-Plain">source</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">query</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">where</span><span class="p p-Indicator">:</span>
                    <span class="l l-Scalar l-Scalar-Plain">and</span><span class="p p-Indicator">:</span>
                    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">task.relatedContact = :contactId</span>
        <span class="c1"># ...</span>
    <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div>
<p>Our goal is to set :contactId parameter with the value from the request.</p>
</div>
<div class="section" id="solution-1-grid-parameter-binding">
<h2>Solution 1: Grid Parameter binding<a class="headerlink" href="#solution-1-grid-parameter-binding" title="Permalink to this headline">¶</a></h2>
<p>The easiest way that should be sufficient for most situations is to use the parameter binding option of the datasource
to configure mapping between datagrid and query parameters.</p>
<p>You can do this by adding the <code class="docutils literal"><span class="pre">bind_parameters</span></code> option to your <code class="docutils literal"><span class="pre">datagrids.yml</span></code> using the following syntax:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/Acme/Bundle/TaskBundle/Resources/config/oro/datagrids.yml</span>
<span class="l l-Scalar l-Scalar-Plain">datagrids</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l l-Scalar l-Scalar-Plain">acme-tasks-grid</span><span class="p p-Indicator">:</span>
        <span class="c1"># ...</span>
        <span class="l l-Scalar l-Scalar-Plain">source</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">query</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">where</span><span class="p p-Indicator">:</span>
                    <span class="l l-Scalar l-Scalar-Plain">and</span><span class="p p-Indicator">:</span>
                    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">task.relatedContact = :contactId</span>
            <span class="l l-Scalar l-Scalar-Plain">bind_parameters</span><span class="p p-Indicator">:</span>
                <span class="c1"># Get the &quot;contactId&quot; parameter from the datagrid</span>
                <span class="c1"># and set its value to the &quot;contactId&quot; parameter in the datasource query</span>
                <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">contactId</span>
        <span class="c1"># ...</span>
    <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div>
<p>In case if names of the parameter in the grid and the query do not match you can pass associative array of parameters,
where the key will be the name of the query parameter, and the value will match the name of the parameter in the grid:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/Acme/Bundle/TaskBundle/Resources/config/oro/datagrids.yml</span>
<span class="l l-Scalar l-Scalar-Plain">datagrids</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l l-Scalar l-Scalar-Plain">acme-tasks-grid</span><span class="p p-Indicator">:</span>
        <span class="c1"># ...</span>
        <span class="l l-Scalar l-Scalar-Plain">source</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">query</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">where</span><span class="p p-Indicator">:</span>
                    <span class="l l-Scalar l-Scalar-Plain">and</span><span class="p p-Indicator">:</span>
                    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">task.relatedContact = :contactId</span>
            <span class="l l-Scalar l-Scalar-Plain">bind_parameters</span><span class="p p-Indicator">:</span>
                <span class="c1"># Get the &quot;relatedContactId&quot; parameter from the datagrid</span>
                <span class="c1"># and set its value to the &quot;contactId&quot; parameter in the datasource query</span>
                <span class="l l-Scalar l-Scalar-Plain">contactId</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">relatedContactId</span>
        <span class="c1"># ...</span>
    <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">A datasource must implement the <code class="docutils literal"><span class="pre">Oro\Bundle\DataGridBundle\Datasource\ParameterBinderAwareInterface</span></code>
to support the <code class="docutils literal"><span class="pre">bind_parameters</span></code> option.</p>
</div>
<p>Now we need to pass the parameter with name &#8220;relatedContactId&#8221; to our grid.
The controller receives a contact entity and passes it to the view:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
    <span class="c1">// src/Acme/Bundle/TaskBundle/Controller/TaskController.php</span>
    <span class="k">namespace</span> <span class="nx">Acme\Bundle\TaskBundle\Controller</span><span class="p">;</span>

    <span class="k">use</span> <span class="nx">Sensio\Bundle\FrameworkExtraBundle\Configuration\Route</span><span class="p">;</span>
    <span class="k">use</span> <span class="nx">Sensio\Bundle\FrameworkExtraBundle\Configuration\Template</span><span class="p">;</span>

    <span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>

    <span class="k">use</span> <span class="nx">Oro\Bundle\ContactBundle\Entity\Contact</span><span class="p">;</span>

    <span class="k">class</span> <span class="nc">TaskController</span> <span class="k">extends</span> <span class="nx">Controller</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="sd">/**</span>
<span class="sd">         * @Route(&quot;/contact/{id}/tasks&quot;, name=&quot;acme_task_contact_tasks&quot;, requirements={&quot;id&quot;=&quot;\d+&quot;})</span>
<span class="sd">         * @Template</span>
<span class="sd">         */</span>
        <span class="k">public</span> <span class="k">function</span> <span class="nf">contactTasksAction</span><span class="p">(</span><span class="nx">Contact</span> <span class="nv">$contact</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span> <span class="o">=&gt;</span> <span class="nv">$contact</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// ...</span>
    <span class="p">}</span>

<span class="nx">The</span> <span class="nx">view</span> <span class="nx">passes</span> <span class="nx">the</span> <span class="s2">&quot;relatedContactId&quot;</span> <span class="nx">parameter</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">grid</span><span class="o">:</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-html+jinja"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# src/Acme/Bundle/TaskBundle/Resources/views/Task/contactTasks.html.twig #}</span>
<span class="cp">{%</span> <span class="k">import</span> <span class="s1">&#39;OroDataGridBundle::macros.html.twig&#39;</span> <span class="k">as</span> <span class="nv">dataGrid</span> <span class="cp">%}</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;widget-content&quot;</span><span class="p">&gt;</span>
    <span class="cp">{{</span> <span class="nv">dataGrid.renderGrid</span><span class="o">(</span><span class="s1">&#39;acme-tasks-grid&#39;</span><span class="o">,</span> <span class="o">{</span><span class="nv">relatedContactId</span><span class="o">:</span> <span class="nv">contact.id</span><span class="o">})</span> <span class="cp">}}</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="solution-2-create-custom-event-listener">
<h2>Solution 2. Create custom event listener<a class="headerlink" href="#solution-2-create-custom-event-listener" title="Permalink to this headline">¶</a></h2>
<p>If the first example does not work for you for some reason (datasource does not support parameters binding,
you need to implement additional logic before binding parameters, etc.), you can create a listener for the
<code class="docutils literal"><span class="pre">oro_datagrid.datagrid.build.after</span></code> event and set the parameter for the source query in this listener:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Acme/Bundle/TaskBundle/EventListener/ParameterListener.php</span>
<span class="k">namespace</span> <span class="nx">Acme\Bundle\TaskBundle\EventListener</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\QueryBuilder</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Oro\Bundle\DataGridBundle\Datasource\Orm\OrmDatasource</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\DataGridBundle\Event\BuildAfter</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ParameterListener</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$parameterName</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$requestParameterName</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$parameterName</span><span class="p">,</span> <span class="nv">$requestParameterName</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parameterName</span> <span class="o">=</span> <span class="nv">$parameterName</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">requestParameterName</span> <span class="o">=</span> <span class="nv">$requestParameterName</span> <span class="o">?</span> <span class="nv">$requestParameterName</span> <span class="o">:</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parameterName</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">onBuildAfter</span><span class="p">(</span><span class="nx">BuildAfter</span> <span class="nv">$event</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$datagrid</span>   <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getDatagrid</span><span class="p">();</span>
        <span class="nv">$datasource</span> <span class="o">=</span> <span class="nv">$datagrid</span><span class="o">-&gt;</span><span class="na">getDatasource</span><span class="p">();</span>
        <span class="nv">$parameters</span> <span class="o">=</span> <span class="nv">$datagrid</span><span class="o">-&gt;</span><span class="na">getParameters</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$datasource</span> <span class="nx">instanceof</span> <span class="nx">OrmDatasource</span><span class="p">)</span> <span class="p">{</span>
            <span class="sd">/** @var QueryBuilder $queryBuilder */</span>
            <span class="nv">$queryBuilder</span> <span class="o">=</span> <span class="nv">$datasource</span><span class="o">-&gt;</span><span class="na">getQueryBuilder</span><span class="p">();</span>

            <span class="nv">$queryBuilder</span><span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parameterName</span><span class="p">,</span> <span class="nv">$parameters</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">requestParameterName</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Register this listener in the container:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/Acme/Bundle/TaskBundle/Resources/config/services.yml</span>
<span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">acme_task.event_listener.acme_tasks_grid_parameter_listener</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">class</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Acme\Bundle\TaskBundle\EventListener\ParameterListener</span>
        <span class="l l-Scalar l-Scalar-Plain">arguments</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">contactId</span>
        <span class="l l-Scalar l-Scalar-Plain">tags</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">kernel.event_listener</span><span class="p p-Indicator">,</span> <span class="nv">event</span><span class="p p-Indicator">:</span> <span class="nv">oro_datagrid.datagrid.build.after.acme-tasks-grid</span><span class="p p-Indicator">,</span> <span class="nv">method</span><span class="p p-Indicator">:</span> <span class="nv">onBuildAfter</span> <span class="p p-Indicator">}</span>
</pre></div>
</td></tr></table></div>
<p>Remember that you still need to pass the <code class="docutils literal"><span class="pre">relatedContactId</span></code> parameter to the grid to the grid from a Twig template
Remember that you still need to pass the <code class="docutils literal"><span class="pre">relatedContactId</span></code> parameter to the grid to the grid from a Twig template
(see example in the previous solution).</p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html">Symfony Cookbook How to Register Event Listeners and Subscribers</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<ul>
<li><a class="reference internal" href="#">How to pass request parameter to the grid</a><ul>
<li><a class="reference internal" href="#grid-configuration">Grid Configuration</a></li>
<li><a class="reference internal" href="#solution-1-grid-parameter-binding">Solution 1: Grid Parameter binding</a></li>
<li><a class="reference internal" href="#solution-2-create-custom-event-listener">Solution 2. Create custom event listener</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Developer Guide</a><ul>
  <li><a href="index.html">How to... Articles</a><ul>
      <li>Previous: <a href="how_to_enable_https.html" title="previous chapter">How to enable https</a></li>
      <li>Next: <a href="how_to_use_wsse_authentication.html" title="next chapter">How to use WSSE authentication</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
    <form class="search" action="../../search.html" method="get">
      <div><i class="fa fa-search search-complete__icon"></i>&nbsp;<input class="search_text" type="text" placeholder="Search in documentation " name="q" />
      <input class="submit" type="submit" value="Search" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Oro Inc. All rights reserved.
           
      
    </div>

    

    
  </body>
</html>