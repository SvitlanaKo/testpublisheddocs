<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Add Properties to Core Entities &#8212; OroCommerce 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Customizing CRUD Pages" href="../extend_and_customize/customizing_crud.html" />
    <link rel="prev" title="Customizing Oro Features" href="../extend_and_customize/index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

<script language="javascript" type="text/javascript">
    <!--
    var materialdropdown = document.querySelector('.material-dropdown'),
    middle = document.querySelector('.middle'),
    cross = document.querySelector('.cross'),
    dropdown = document.querySelector('.dropdown');

materialdropdown.addEventListener('click', function() {
  middle.classList.toggle('active');
  cross.classList.toggle('active');
  dropdown.classList.toggle('active');
})
    -->
  </script>
    


  </head>
  <body role="document">
  

    <div class="document">
<div class="header">
    <div class="main-nav">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div id="nav-menu" class="navbar-top">
                <div class="nav-container">
                    <div class="navbar-header">
                        <a href="https://www.orocommerce.com/"
                           class="navbar-brand"><img
                                src="https://www.orocommerce.com/wp-content/themes/commerce/images/orocommerce_logo.svg"
                                alt="Open Source B2B eCommerce Platform - OroCommerce"></a>
                    </div>
                    <div class="navbar-header">
                        <p class="navbar-header" href="#">Documentation</p>
                    </div>
                    <div class="navbar-right">
                        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../extend_and_customize/customizing_crud.html" title="Customizing CRUD Pages"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../extend_and_customize/index.html" title="Customizing Oro Features"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Developer Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../extend_and_customize/index.html" accesskey="U">Customizing Oro Features</a> &#187;</li> 
     <li class="nav-item nav-item-this">Add Properties to Core Entities</li>
      </ul>
    </div>
                    </div>

                </div>
            </div>

        </nav>
    </div>
</div>


      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="add-properties-to-core-entities">
<h1>Add Properties to Core Entities<a class="headerlink" href="#add-properties-to-core-entities" title="Permalink to this headline">Â¶</a></h1>
<p>You may require to customize the default Oro entities to fit your application&#8217;s needs.</p>
<p>Let us customize the Contact entity to store the date of when a contact becomes a member of your company&#8217;s partner network. For the sake of example, we will use the Contact entity from the custom AppBundle.</p>
<p>To achieve this, add a new property <code class="docutils literal"><span class="pre">partnerSince</span></code> to store the date and time of when a contact joined your network. To add the property, create a migration:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Migrations/Schema/v1_0/AddPartnerSinceToContact.php</span>
<span class="k">namespace</span> <span class="nx">AppBundle\Migrations\Schema\v1_0</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\DBAL\Schema\Schema</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\EntityConfig\ExtendScope</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\MigrationBundle\Migration\Migration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\MigrationBundle\Migration\QueryBag</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">AddPartnerSinceToContact</span> <span class="k">implements</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">(</span><span class="nx">Schema</span> <span class="nv">$schema</span><span class="p">,</span> <span class="nx">QueryBag</span> <span class="nv">$queries</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$table</span> <span class="o">=</span> <span class="nv">$schema</span><span class="o">-&gt;</span><span class="na">getTable</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">);</span>
        <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">(</span><span class="s1">&#39;partnerSince&#39;</span><span class="p">,</span> <span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;oro_options&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
                <span class="s1">&#39;extend&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;owner&#39;</span> <span class="o">=&gt;</span> <span class="nx">ExtendScope</span><span class="o">::</span><span class="na">OWNER_CUSTOM</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Please note that the entity that you add a new property to must have the <code class="docutils literal"><span class="pre">&#64;Config</span></code> annotation and should extend an empty Extend class:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Contact.php</span>
<span class="k">namespace</span> <span class="nx">AppBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Oro\Bundle\EntityConfigBundle\Metadata\Annotation\Config</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">AppBundle\Entity\Model\ExtendContact</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\Entity()</span>
<span class="sd"> * @ORM\Table(name=&quot;contact&quot;)</span>
<span class="sd"> * @Config()</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Contact</span> <span class="k">extends</span> <span class="nx">ExtendContact</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="last highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Model/ExtendContact.php</span>
<span class="k">namespace</span> <span class="nx">AppBundle\Model</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ExtendContact</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * A skeleton method for the getter. You can add it to use autocomplete hints from the IDE.</span>
<span class="sd">     * The real implementation of this method is auto generated.</span>
<span class="sd">     *</span>
<span class="sd">     * @return \DateTime</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getPartnerSince</span><span class="p">()</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * A skeleton method for the setter. You can add it to use autocomplete hints from the IDE.</span>
<span class="sd">     * The real implementation of this method is auto generated.</span>
<span class="sd">     *</span>
<span class="sd">     * @param \DateTime $partnerSince</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setPartnerSince</span><span class="p">(</span><span class="nx">\DateTime</span> <span class="nv">$partnerSince</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The important part in this migration (which is different from common Doctrine migrations) is the <code class="docutils literal"><span class="pre">oro_options</span></code> key. It is passed through the <code class="docutils literal"><span class="pre">options</span></code> argument of the <code class="docutils literal"><span class="pre">addColumn()</span></code> method:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">...</span>
         <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">(</span><span class="s1">&#39;partnerSince&#39;</span><span class="p">,</span> <span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="p">[</span>
<span class="hll">             <span class="s1">&#39;oro_options&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span>                 <span class="s1">&#39;extend&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;owner&#39;</span> <span class="o">=&gt;</span> <span class="nx">ExtendScope</span><span class="o">::</span><span class="na">OWNER_CUSTOM</span><span class="p">],</span>
             <span class="p">],</span>
         <span class="p">]);</span>
<span class="o">...</span>
</pre></div>
</td></tr></table></div>
<p>All options nested under this key are handled outside of the usual Doctrine migration workflow.</p>
<p>When the EntityExtendBundle of the OroPlatform finds the <code class="docutils literal"><span class="pre">extend</span></code> key, it generates an intermediate class with getters and setters for the defined properties, thus making them accessible from every part of the code. The intermediate class is generated automatically based on the configured data when the application cache is warmed up.</p>
<p>The <code class="docutils literal"><span class="pre">owner</span></code> attribute can have the following values:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ExtendScope::OWNER_CUSTOM</span></code> &#8212; The property is user-defined and the core system should handle how the property appears in grids, forms, etc. (if not configured otherwise).</li>
<li><code class="docutils literal"><span class="pre">ExtendScope::OWNER_SYSTEM</span></code>&#8212; Nothing is rendered automatically, and the developer must explicitly specify how to show the property in different parts of the system (grids, forms, views, etc.).</li>
</ul>
</div>


          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install_upgrade/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../seo_config_guide/index.html">SEO Configuration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../frontstore_guide/index.html">Storefront Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../basics/index.html">OroPlatform Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extend_and_customize/index.html">Customizing Oro Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web_api/index.html">Web Services API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theme/index.html">Customizing the Theme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_upgrade_and_patch/index.html">Extension and Patch Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/index.html">Annotation and Configuration Format</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Using and Managing Entities</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">How to Work with Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating_entities.html">How to Create Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_fixtures.html">How to Load Data Fixtures</a></li>
<li class="toctree-l3"><a class="reference internal" href="datagrids.html">How to Create a Basic Datagrid</a></li>
<li class="toctree-l3"><a class="reference internal" href="managing_tasks.html">How to Create and Modify Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="deleting_tasks.html">How to Delete Tasks</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Add Properties to Core Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="acls.html">How to Protect Entities Using ACLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="import_export.html">How to Import and Export Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="report.html">How to Create a Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="dashboards.html">How to Create a Dashboard Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_entities.html">How to Use Entities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../other/index.html">How to... Articles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin_guide/index.html">Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration_guide/index.html">Configuration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../system_requirements.html">System Requirements</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Oro Team All rights reserved.
           
      
      |
      <a href="../../_sources/dev_guide/entities/adding_properties.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>