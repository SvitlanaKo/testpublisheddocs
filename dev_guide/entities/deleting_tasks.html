<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to Delete Tasks &#8212; OroCommerce 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How to Protect Entities Using ACLs" href="acls.html" />
    <link rel="prev" title="How to Create and Modify Tasks" href="managing_tasks.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

<script language="javascript" type="text/javascript">
    <!--
    var materialdropdown = document.querySelector('.material-dropdown'),
    middle = document.querySelector('.middle'),
    cross = document.querySelector('.cross'),
    dropdown = document.querySelector('.dropdown');

materialdropdown.addEventListener('click', function() {
  middle.classList.toggle('active');
  cross.classList.toggle('active');
  dropdown.classList.toggle('active');
})
    -->
  </script>
    


  </head>
  <body role="document">
  

    <div class="document">
<div class="header">
    <div class="main-nav">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div id="nav-menu" class="navbar-top">
                <div class="nav-container">
                    <div class="navbar-header">
                        <a href="https://www.orocommerce.com/"
                           class="navbar-brand"><img
                                src="https://www.orocommerce.com/wp-content/themes/commerce/images/orocommerce_logo.svg"
                                alt="Open Source B2B eCommerce Platform - OroCommerce"></a>
                    </div>
                    <div class="navbar-header">
                        <p class="navbar-header" href="#">Documentation</p>
                    </div>
                    <div class="navbar-right">
                        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="acls.html" title="How to Protect Entities Using ACLs"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="managing_tasks.html" title="How to Create and Modify Tasks"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Developer Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Using and Managing Entities</a> &#187;</li> 
     <li class="nav-item nav-item-this">How to Delete Tasks</li>
      </ul>
    </div>
                    </div>

                </div>
            </div>

        </nav>
    </div>
</div>


      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-delete-tasks">
<h1>How to Delete Tasks<a class="headerlink" href="#how-to-delete-tasks" title="Permalink to this headline">¶</a></h1>
<p>The data grid that you created so far is able to let the user delete entries without having to
reload the entire page. To achieve this you have to follow these three steps:</p>
<ol class="arabic simple">
<li><a class="reference internal" href="#cookbook-entity-api-manager-service"><span class="std std-ref">Configure an API manager service</span></a>.</li>
<li><a class="reference internal" href="#cookbook-entity-delete-controller"><span class="std std-ref">Create a controller that deletes a task</span></a>.</li>
<li><a class="reference internal" href="#cookbook-entity-delete-routing"><span class="std std-ref">Register a route for the created controller</span></a>.</li>
<li><a class="reference internal" href="#cookbook-entity-delete-grid-config"><span class="std std-ref">Link to the controller from the data grid</span></a>.</li>
</ol>
<div class="section" id="configure-the-api-manager-service">
<span id="cookbook-entity-api-manager-service"></span><h2>Configure the API Manager Service<a class="headerlink" href="#configure-the-api-manager-service" title="Permalink to this headline">¶</a></h2>
<p>Fortunately, the OroSoapBundle comes with the <code class="docutils literal"><span class="pre">oro_soap.manager.entity_manager.abstract</span></code> service
that is based on the <code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.SoapBundle.Entity.Manager.ApiEntityManager.html" title="Oro\Bundle\SoapBundle\Entity\Manager\ApiEntityManager"><span class="pre">ApiEntityManager</span></a></code> class and
is able to delete any entity managed by Doctrine. You just have to configure a concrete service
that gets the entity&#8217;s fully qualified class name and the entity manager service passed as
arguments:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">app.task_manager.api</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">class</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Oro\Bundle\SoapBundle\Entity\Manager\ApiEntityManager</span>
        <span class="l l-Scalar l-Scalar-Plain">parent</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">oro_soap.manager.entity_manager.abstract</span>
        <span class="l l-Scalar l-Scalar-Plain">arguments</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">AppBundle\Entity\Task</span>
            <span class="p p-Indicator">-</span> <span class="s">&#39;@doctrine.orm.entity_manager&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="create-the-controller">
<span id="cookbook-entity-delete-controller"></span><h2>Create the Controller<a class="headerlink" href="#create-the-controller" title="Permalink to this headline">¶</a></h2>
<p>Creating the controller that is responsible to delete a task is easy as you can extend the
<code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.SoapBundle.Controller.Api.Rest.RestController.html" title="Oro\Bundle\SoapBundle\Controller\Api\Rest\RestController"><span class="pre">RestController</span></a></code> class from the
OroSoapBundle which comes with basic features:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Controller/Api/Rest/TaskController.php</span>
<span class="k">namespace</span> <span class="nx">AppBundle\Controller\Api\Rest</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">FOS\RestBundle\Controller\Annotations\NamePrefix</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">FOS\RestBundle\Controller\Annotations\RouteResource</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\SoapBundle\Controller\Api\Rest\RestController</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @RouteResource(&quot;task&quot;)</span>
<span class="sd"> * @NamePrefix(&quot;app_api_&quot;)</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">TaskController</span> <span class="k">extends</span> <span class="nx">RestController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">deleteAction</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">handleDeleteRequest</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getForm</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// This method is not needed to delete entities.</span>
        <span class="c1">//</span>
        <span class="c1">// Note: You will need to provide a proper implementation here</span>
        <span class="c1">// when you start working with more features of REST APIs.</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getFormHandler</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// This method is not needed to delete entities.</span>
        <span class="c1">//</span>
        <span class="c1">// Note: You will need to provide a proper implementation here</span>
        <span class="c1">// when you start working with more features of REST APIs.</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getManager</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;app.task_manager.api&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The name of action method is important. The FOSRestBundle will use it to ensure that the route
will only be matched when <code class="docutils literal"><span class="pre">DELETE</span></code> requests are issued (which are dispatched by the OroPlatform
when a row is to be deleted).</p>
</div>
</div>
<div class="section" id="register-the-routes">
<span id="cookbook-entity-delete-routing"></span><h2>Register the Routes<a class="headerlink" href="#register-the-routes" title="Permalink to this headline">¶</a></h2>
<p>You now need to make sure that your controller is processed by the route loader of the FOSRestBundle
which automatically creates and registers routes based on the method names of your API controller:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/AppBundle/Resources/config/oro/routing.yml</span>
<span class="l l-Scalar l-Scalar-Plain">app.api.task</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="s">&#39;@AppBundle/Controller/Api/TaskController.php&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rest</span>
    <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">api/rest/{version}/</span>
    <span class="l l-Scalar l-Scalar-Plain">requirements</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">latest|v1</span>
        <span class="l l-Scalar l-Scalar-Plain">_format</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="l l-Scalar l-Scalar-Plain">defaults</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">latest</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="update-the-data-grid-configuration">
<span id="cookbook-entity-delete-grid-config"></span><h2>Update the Data Grid Configuration<a class="headerlink" href="#update-the-data-grid-configuration" title="Permalink to this headline">¶</a></h2>
<p>To make it possible to remove tasks you need to define a property that describes how the URL of
you REST API controller action is built and then add this URL to the list of available actions in
your data grid configuration:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/AppBundle/Resources/config/oro/datagrids.yml</span>
<span class="l l-Scalar l-Scalar-Plain">datagrids</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">app-tasks-grid</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
            <span class="l l-Scalar l-Scalar-Plain">delete_link</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">url</span>
                <span class="l l-Scalar l-Scalar-Plain">route</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">app_api_delete_task</span>
                <span class="l l-Scalar l-Scalar-Plain">params</span><span class="p p-Indicator">:</span>
                    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">id</span>
            <span class="c1"># ...</span>
        <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
            <span class="c1"># ...</span>
            <span class="l l-Scalar l-Scalar-Plain">delete</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">delete</span>
                <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Delete</span>
                <span class="l l-Scalar l-Scalar-Plain">link</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">delete_link</span>
                <span class="l l-Scalar l-Scalar-Plain">icon</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">trash</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is important to use the <code class="docutils literal"><span class="pre">delete</span></code> value for the <code class="docutils literal"><span class="pre">type</span></code> option so that the OroPlatform
issues an HTTP <code class="docutils literal"><span class="pre">DELETE</span></code> request when the trash bin icon is clicked (instead of a regular
<code class="docutils literal"><span class="pre">GET</span></code> request).</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install_upgrade/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../seo_config_guide/index.html">SEO Configuration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../frontstore_guide/index.html">Storefront Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../basics/index.html">OroPlatform Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extend_and_customize/index.html">Customizing Oro Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web_api/index.html">Web Services API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theme/index.html">Customizing the Theme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_upgrade_and_patch/index.html">Extension and Patch Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/index.html">Annotation and Configuration Format</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Using and Managing Entities</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">How to Work with Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating_entities.html">How to Create Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_fixtures.html">How to Load Data Fixtures</a></li>
<li class="toctree-l3"><a class="reference internal" href="datagrids.html">How to Create a Basic Datagrid</a></li>
<li class="toctree-l3"><a class="reference internal" href="managing_tasks.html">How to Create and Modify Tasks</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">How to Delete Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="adding_properties.html">Add Properties to Core Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="acls.html">How to Protect Entities Using ACLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="import_export.html">How to Import and Export Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="report.html">How to Create a Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="dashboards.html">How to Create a Dashboard Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_entities.html">How to Use Entities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../other/index.html">How to... Articles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin_guide/index.html">Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration_guide/index.html">Configuration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../system_requirements.html">System Requirements</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Oro Team All rights reserved.
           
      
      |
      <a href="../../_sources/dev_guide/entities/deleting_tasks.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>