<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to Use Entities &#8212; OroCommerce 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How to... Articles" href="../other/index.html" />
    <link rel="prev" title="How to Create a Dashboard Widget" href="dashboards.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
<div class="header">
    <div class="main-nav">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div id="nav-menu" class="navbar-top">
                <div class="nav-container">
                    <div class="navbar-header">
                        <a href="https://www.orocommerce.com/"
                           class="navbar-brand"><img
                                src="https://www.orocommerce.com/wp-content/themes/commerce/images/orocommerce_logo.svg"
                                alt="Open Source B2B eCommerce Platform - OroCommerce"></a>
                    </div>
                    <div class="navbar-header">
                        <p class="navbar-header" href="#">Documentation for... </p>
                    </div>
                    <div id="navbar" class="navbar-left">
                        <div class="navbar-collapse collapse">
                            <div class="menu-header-menu-container">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install_upgrade/index.html">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../install_upgrade/installation_prerequisites/index.html">Prepare Installation Environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_prerequisites/web_server_configuration.html">Install and Configure a Web Application Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_prerequisites/runtime_configuration.html">PHP Runtime Environment Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_prerequisites/optimize_performance.html">Performance Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_prerequisites/scalability.html">Scalability Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_prerequisites/create_database.html">Create the Database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../install_upgrade/get_files/index.html">Download Files and Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/get_files/get_source_files/index.html">Get the Source Code and Install Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/get_files/download_packages_and_configure_install.html">Download External Packages and Configure Installation Environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../install_upgrade/installation/index.html">Run Installation via Wizard or CLI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation/installation_steps.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../install_upgrade/post_install_steps.html">Perform Post-Install Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install_upgrade/vm.html">Evaluate Oro App in a Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install_upgrade/upgrade/index.html">Upgrade OroCommerce to the Newer Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install_upgrade/upgrade/index.html#upgrade-orocommerce">Upgrade OroCommerce</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install_upgrade/update.html">Update OroPlatform to Oro App</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install_upgrade/installation_quick_start_dev/index.html">Installation Quick Start for Developers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_quick_start_dev/commerce-crm-ee.html">Quick Start Installation: OroCommerce and OroCRM Enterprise Edition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_quick_start_dev/commerce-crm-ee-de.html">Quick Start Installation: OroCommerce and OroCRM Enterprise Edition for Germany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_quick_start_dev/commerce-ee.html">Quick Start Installation: OroCommerce Enterprise Edition (without OroCRM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_quick_start_dev/commerce-crm.html">Quick Start Installation: OroCommerce and OroCRM Community Edition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_quick_start_dev/commerce-crm-de.html">Quick Start Installation: OroCommerce and OroCRM Community Edition for Germany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install_upgrade/installation_quick_start_dev/platform.html">Quick Start Installation: OroPlatform</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/index.html">Use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/getting_started/index.html">Getting Started with UI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_user_profile.html">View and Set up Your User Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_company_structure_org_selector.html">Company Structure and Organization Selector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_navigation.html">Navigation Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_filters.html">Data Filters For Reports, Segments, and Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_nav_shortcuts.html">Shortcuts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_nav_search.html">Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_nav_pinned_pages.html">Pinbar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_nav_user_menu.html">User Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_nav_history_fav_viewed.html">History, Favorites and Most Viewed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_nav_sidebar.html">Sidebar Panel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/intro_nav_popup.html">Flash Notifications and Dialog Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/widgets_recent_calls.html">Recent Calls Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/widgets_today_calendar.html">Today&#8217;s Calendar Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/widgets_recent_emails.html">Recent Emails Dashboard Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/widgets_sidebar_tasks.html">Task List Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/common_actions/manage_address_book.html">Managing Address Book</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/common_actions/manage_translation.html">Managing Translations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/access_oro/index.html">Access Oro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/my_oro/index.html">My Oro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/activities/index.html">Activities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/mass_actions_management_console.html">Mass Actions in Management Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/records/index.html">Information Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/getting_started/import_export/index.html">Export and Import</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/products/index.html">Products</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/configure_product_details.html">Configure Product Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/configure_product_details.html#product-information-structure">Product Information Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/configure_product_details.html#product-price-attributes">Product Price Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/product_brands.html">Use Product Brands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/product_brands.html#make-a-brand-filterable">Make a Brand Filterable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/products/page_templates.html">Manage Product Page Design with Page Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/products/featured.html">Manage Featured Products</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/products/new_arrivals.html">Highlight New Products</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/products/new_arrivals.html#set-up-a-new-arrival-icon">Set Up a New Arrival Icon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/products/new_arrivals.html#set-up-new-arrivals">Set Up New Arrivals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/products/actions_main/index.html">Manage Products: General Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/products/products/actions_details/index.html">Manage Product Characteristics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/master_catalog/index.html">Master Catalog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/master_catalog/category_creation.html">Create a Master Catalog Category</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/master_catalog/subcategory_creation.html">Create a Master Catalog Subcategory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/inventory/index.html">Warehouses and Inventory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/inventory/warehouses/index.html">Warehouses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/pricing/index.html">Pricing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/pricing/pricelist/index.html">Create a Price List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/pricing/pricelist/index.html#schedule-price-adjustments">Schedule Price Adjustments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/pricing/pricelist/index.html#import-and-export-prices">Import and Export Prices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/pricing/pricelist/index.html#manage-product-price-manually">Manage Product Price Manually</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/pricing/pricelist/index.html#generate-product-price-automatically">Generate Product Price Automatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/pricing/pricelist/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/pricing/pricelist/index.html#enable-multiple-currencies-for-the-price-list">Enable Multiple Currencies for the Price List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/pricing/pricelist/index.html#add-price-in-specific-currency-to-the-price-list">Add Price in Specific Currency to the Price List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/pricing/pricelist/index.html#view-price-in-specific-currency-on-the-front-store">View Price in Specific Currency on the Front Store</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/customers/index.html">Customers and Customer Users</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/customers/customer_groups/index.html">Customer Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/customers/customer_user_roles/index.html">Customer User Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/customers/customer_users/index.html">Customer Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/customers/customers/index.html">Customers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/customers/delegate.html">Delegate Account Management to a Customer User</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/quotes/index.html">Quotes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/quotes/create/index.html">Create a Quote</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/quotes/edit.html">Edit a Quote</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/quotes/delete.html">Delete a Quote</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/quotes/quote_states_by_flow/index.html">Next Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/quotes/flows/index.html">Quotes in Use: Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/rfq/index.html">Request for Quote (RFQ)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/rfq/rfq_details.html">View a Request for Quote Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/rfq/rfq_steps_and_transitions.html">Use RFQ Transitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/rfq/rfq_summary.html">View Requests for Quote Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/shopping_lists/index.html">Shopping Lists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/shopping_lists/view.html">View Shopping List Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/shopping_lists/view.html#view-shopping-list-details">View Shopping List Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/shopping_lists/view.html#manage-shopping-list">Manage Shopping List</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/orders/index.html">Orders</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/create_new.html">Create an Order from Scratch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/create_from_rfq.html">Create an Order from an RFQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/create_from_shopping_list.html">Create an Order from a Shopping List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/view.html">View Order Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/viewlist.html">View Order List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/edit.html">Edit an Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/delete.html">Delete an Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/mark_as_shipped.html">Mark an Order as Shipped</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/cancel.html">Cancel an Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/close.html">Close an Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/archive.html">Archive an Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/orders/statuses.html">Order Internal Statuses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/payment/index.html">Payment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/payment/payment_providers_overview/index.html">Payment Methods and Providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/payment/prerequisites/index.html">Payment Integration Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/payment/checkout/index.html">Checkout: Payment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/shipping/index.html">Shipping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/shipping/shipping_overview.html">Shipping Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/shipping/configuration/index.html">Shipping Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/shipping/shipping_attributes.html">Product Shipping Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/shipping/shipping_options_in_quotes.html">Shipping Configuration per Quote</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/shipping/shipping_tracking.html">Shipping Tracking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/marketing_web_catalog/index.html">Web Catalogs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_web_catalog/create.html">Create a Web Catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_web_catalog/edit_content_tree/index.html">Edit Web Catalog Content Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_web_catalog/web_catalog_usecase.html">Enable a Web Catalog Globally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_web_catalog/web_catalog_usecase.html#enable-a-web-catalog-for-a-website">Enable a Web Catalog for a Website</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_web_catalog/web_catalog_usecase.html#customize-web-catalog-contents-for-localization-customer-or-customer-group">Customize Web Catalog Contents for Localization, Customer or Customer Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_web_catalog/web_catalog_usecase.html#build-a-custom-web-catalog-from-scratch-sample">Build a Custom Web Catalog From Scratch (Sample)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/marketing_landing_pages/index.html">Landing Pages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_landing_pages/viewlist.html">View and Filter Landing Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_landing_pages/create.html">Create a Landing Page</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_landing_pages/view.html">View Landing Page Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_landing_pages/edit.html">Edit a Landing Page</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/marketing/index.html">Marketing Automation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing/marketing_lists.html">Marketing Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing/email_campaigns.html">Email Campaigns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing/marketing_campaigns.html">Marketing Campaigns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing/marketing_tracking_website_records.html">Tracking Websites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing/sending_email_campaign_via_dotmailer.html">Send Email Campaign via dotmailer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing/dotmailer_data_fields_mappings.html">Manage dotmailer Data Fields and Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing/sending_email_campaign_via_mailchimp.html">Send Email Campaign via MailChimp</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/marketing_promotions/index.html">Promotions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_promotions/expressions.html">Expression Language for Promotions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_promotions/create.html">Create Promotions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_promotions/viewlist.html">View Promotions in Management Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_promotions/promotions_in_order/index.html">Manage Discounts in Orders</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/marketing_coupons/index.html">Coupons</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_coupons/begin.html">Before You Begin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_coupons/create.html">Create Coupons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_coupons/generate.html">Generate Coupons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_coupons/viewlist.html">Manage a Coupons List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_coupons/edit_in_order/index.html">Manage Coupons in Orders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/marketing_coupons/sample_coupon.html">Sample Coupon Generation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/marketing_content_blocks/index.html">Content Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/taxes/index.html">Taxes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/taxes/customer_tax_codes/index.html">Customer Tax Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/taxes/product_tax_codes/index.html">Product Tax Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/taxes/tax_jurisdictions/index.html">Tax Jurisdictions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/taxes/tax_rules/index.html">Tax Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/taxes/taxes/index.html">Taxes (Tax Rates)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/taxes/link_a_tax_code_to_a_customer.html">Link a Tax Code to a Customer or Customer Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/taxes/link_a_tax_code_to_a_product.html">Link a Tax Code to a Product</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/business_intelligence/index.html">Business Intelligence</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/business_intelligence/business_intelligence_dashboards_widgets/index.html">Dashboards and Widgets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/business_intelligence/business_intelligence_segments.html">Segments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/business_intelligence/business_intelligence_filters.html">Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/business_intelligence/reports/index.html">Reports</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../seo_config_guide/index.html">SEO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../seo_config_guide/website/index.html">Website Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../frontstore_guide/index.html">Buyer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/getting_started/index.html">Register and Sign In</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../frontstore_guide/getting_started/create_account.html">Create Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontstore_guide/getting_started/sign_in.html">Sign In</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontstore_guide/getting_started/forgot_password.html">Forgot Password</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/navigation/index.html">Getting Started with Navigation and UI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../frontstore_guide/navigation/mass_actions_front_store.html">Mass Delete in Tables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/profile/index.html">My Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/address_book/index.html">Address Book</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/users_roles/index.html">My Organization Users and Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/orders/index.html">Orders</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../frontstore_guide/orders/sample_guest_checkout.html">Sample Guest Checkout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontstore_guide/orders/re-order.html">Re-Order Option</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/previously_purchased/index.html">Previously Purchased Products</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/rfq/index.html">Request for Quote</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/quotes/index.html">Quotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frontstore_guide/shopping_lists/index.html">Shopping Lists</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../basics/index.html">OroPlatform Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/frontend_architecture.html">Frontend Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/search.html">Dealing with the Search Index</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extend_and_customize/index.html">Customizing Oro Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="adding_properties.html">Add Properties to Core Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/customizing_crud.html">Customizing CRUD Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/customizing_import_export.html">Extending Entities to Support Bulk Import and Export</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/how_to_add_an_extension_to_oro_marketplace.html">How to Add an Extension to the OroCRM Marketplace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/customizing_data_grid_in_orocommerce.html">Customizing Data Grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/using_php_instead_of_twig_for_templates.html">Using PHP Instead of Twig for Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/how_to_create_new_bundle.html">How to Create New Bundle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/how_to_extend_existing_bundle.html">How to Extend Existing Bundle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/how_to_add_entity_event_listeners.html">How to Add Entity Event Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/how_to_create_and_customize_application_menu.html">How to Create and Customize Application Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/user_custom_validation_constraints.html">How to Add Custom User Validation Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/how_to_create_global_js_component.html">How to Create a Global JavaScript Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/how_to_replace_inline-javascript_with_component.html">How to Replace Inline-Javascript with a Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/payment_method_add.html">Add a New Payment Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/shipping_method_add.html">Add a New Shipping Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/integration.html">How to Create an Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extend_and_customize/installer_generate.html">How to Generate an Installer for a Bundle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../web_api/index.html">Web Services API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../web_api/api_docs/index.html">API Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../theme/index.html">Customizing the Theme</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../theme/layout.html">Customizing the Application Layout</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install_upgrade_and_patch/index.html">Extension and Patch Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install_upgrade_and_patch/how_to_install_extension_from_command_line.html">How to Manage OroPlatform Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_upgrade_and_patch/how_to_upgrade_to_new_version.html">How to Upgrade to a New Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_upgrade_and_patch/how_to_apply_patch.html">How to Apply Patch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_upgrade_and_patch/how_to_co-install_applications.html">How to Co-install OroCommerce and OroCRM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/index.html">Annotation and Configuration Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/annotation/index.html">Annotation Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/format/index.html">Configuration Format Reference</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Using and Managing Entities</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">How to Work with Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating_entities.html">How to Create Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_fixtures.html">How to Load Data Fixtures</a></li>
<li class="toctree-l3"><a class="reference internal" href="datagrids.html">How to Create a Basic Datagrid</a></li>
<li class="toctree-l3"><a class="reference internal" href="managing_tasks.html">How to Create and Modify Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="deleting_tasks.html">How to Delete Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="adding_properties.html">Add Properties to Core Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="acls.html">How to Protect Entities Using ACLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="import_export.html">How to Import and Export Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="report.html">How to Create a Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="dashboards.html">How to Create a Dashboard Widget</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">How to Use Entities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../other/index.html">How to... Articles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../other/how_to_accelerate_import.html">How to Accelerate Import</a></li>
<li class="toctree-l3"><a class="reference internal" href="../other/how_to_enable_https.html">How to enable https</a></li>
<li class="toctree-l3"><a class="reference internal" href="../other/how_to_pass_request_parameter_to_grid.html">How to pass request parameter to the grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../other/how_to_use_wsse_authentication.html">How to use WSSE authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../other/how_to_clone_workflow.html">How to Clone a System Workflow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin_guide/index.html">Admin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/op_structure/index.html">Operational Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin_guide/op_structure/elastic_search.html">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin_guide/op_structure/db_search/index.html">Manage Search in Oro Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin_guide/op_structure/cache.html">Cache in Oro Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin_guide/op_structure/mq/index.html">Message Queue</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/optimize_server_compression_and_caching.html">Web Server Performance Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/price_list_sharding.html">How to Configure Price List Sharding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/optimize_index_and_price_calculation.html">Optimize Website Indexation and Price Recalculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/package_manager.html">Extensions and Package Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/processes.html">Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/jobs.html">Job Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/cron.html">Scheduled Tasks via Cron</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin_guide/monitoring/index.html">Healthcheck and Data Monitoring</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration_guide/index.html">Config</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/landing_system_configuration/index.html">System Configuration Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_system_configuration/general_setup_sysconfig/index.html">General Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_system_configuration/integrations/index.html">Integrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_system_configuration/websites/index.html">Websites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_system_configuration/config_levels.html">Configuration Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_system_configuration/config_levels.html#configuration-level-graphics">Configuration Level Graphics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_system_configuration/quick_search.html">Quick Search Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/landing_commerce/index.html">Commerce Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/catalog/index.html">Catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/customer/index.html">Customer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/design/index.html">Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/guests/index.html">Guests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/inventory/index.html">Inventory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/orders/index.html">Orders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/payment/index.html">Payment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/product/index.html">Product</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/sales/index.html">Sales</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/shipping/index.html">Shipping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_commerce/taxation/index.html">Taxation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/landing_crm/index.html">CRM Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_crm/sales_pipeline/index.html">Sales Pipeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/landing_marketing/index.html">Marketing Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_marketing/general_setup_marketing/index.html">General Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_marketing/marketing_features.html">Marketing Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/landing_marketing/tracking_settings.html">Tracking Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/localization/index.html">System Localization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/localization/languages.html">Languages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/localization/localizations.html">Localizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/localization/localization.html">Global Localization Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/localization/localization.html#related-articles">Related Articles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/localization/website_localization.html">Website Localization Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/localization/language_settings.html">Language Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/localization/language_settings.html#related-articles">Related Articles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/localization/translations.html">Translations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/pricing/index.html">Pricing Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/pricing/common_price_list_configuration_options.html">Price List Configuration Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/pricing/customer_group_price_lists.html">Price List Configuration per Customer Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/pricing/customer_price_lists.html">Price List Configuration Per Customer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/pricing/global_currency.html">Global Currency Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/pricing/global_pricing.html">Global Pricing Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/pricing/price_list_configuration_overview.html">Understanding Price List Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/pricing/website_price_lists.html">Price List Configuration per Website</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/pricing/website_pricing.html">Currency Configuration Per Website</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/email/index.html">Email Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/email/email_configuration.html">Email Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/email/email_templates.html">Email Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/email/notification_rules.html">Automatic Notification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/email/system_mailboxes.html">System Mailboxes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/email/system_mailbox_settings.html">System Mailbox Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/email/email_configuration_settings.html">Email Configuration Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/integrations/index.html">Integrations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/google_integration_settings.html">Google Integration Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/google_single_sign_on.html">Google Single Sign-On</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/ldap_integration.html">LDAP Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/mailchimp_configuration.html">Configure MailChimp Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/dotmailer_integration.html">dotmailer Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/dotmailer_integration_settings.html">dotmailer Synchronization Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/dotmailer_configuration.html">Configure dotmailer Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/dotmailer_single_sign_on.html">Configure Single Sign-on</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/ms_exchange_integration_settings.html">MS Exchange Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/ms_exchange_integration.html">Integration with Microsoft Exchange Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/ms_outlook_integration_settings.html">MS Outlook Integration Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/outlook_sync.html">Synchronization with Outlook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/embedded_forms.html">Embedded Forms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/hangouts.html">Voice and Video Calls via Hangouts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/zendesk_integration.html">Integration with Zendesk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/integrations/commerce_integration.html">CRM and Commerce Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/payment/index.html">Payment Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/payment/payment_configuration.html">System Configuration: Merchant Location</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/payment/payment_method_integrations.html">Payment Method Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/payment/payment_rules.html">Payment Rules Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/menu/index.html">Menus Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/menu/menu_config.html">Customizing a Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/menu/menu_config_levels.html">Menu Configuration Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/menu/menu_frontend.html">Edit a Frontend Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/menu/service_page.html">Used Images</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/workflows/index.html">Workflow Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/workflows/quote_management_workflow.html">Quote Management Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/workflows/backoffice_quote_flow_with_approvals.html">Backoffice Quote Flow with Approvals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/workflows/rfq_backoffice.html">RFQ Management Flow Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/workflows/rfq_frontoffice.html">RFQ Submission Flow Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/workflows/checkout.html">Checkout Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/workflows/alternative_checkout.html">Alternative Checkout Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/workflows/single_page_checkout_workflow.html">Single Page Checkout Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/workflows/task_flow.html">Task Flow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/tags_management/index.html">Tags and Taxonomies Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/tags_management/tags.html">Tags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/tags_management/taxonomies.html">Taxonomies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration_guide/websites/index.html">Website Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/websites/create.html">Create a Website</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/websites/config.html">Configure a Website</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/websites/default_website.html">Set a Website as Default</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration_guide/websites/edit_frontend_menu.html">Edit Front Store Menu</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../community/contribute/index.html">Contribute</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../community/contribute/code_style.html">Code Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../community/contribute/code_version_control.html">Code Version Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../community/contribute/code_dev_env.html">Set Up a Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../community/contribute/code_ui_translations.html">Contribute to Translations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../community/contribute/documentation.html">Contribute to Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../community/issues/index.html">Report Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../community/issues/issue.html">Report an Issue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../community/issues/security.html">Report a Security Issue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../community/issues/translation.html">Report a Translation Issue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../community/issues/documentation.html">Report a Documentation Issue</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../community/release_process.html">Understand Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../community/contact_community.html">Contact Community</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../system_requirements.html">SysReqs</a></li>
</ul>

                                <!--
                                <ul class="nav">
                                    <li><a href="#">Installation</a></li>
                                    <li><a href="#">Configuration</a></li>
                                    <li><a href="#">Use <i class="fa fa-search search-complete__icon"></i></a>
                                        <ul class="sub-nav">
                                            <li class="sub-menu" ><a href="#">HTML</a>
                                            </li>
                                            <li class="sub-menu" ><a
                                                   href="#">CSS</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Resets</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Grids</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Frameworks</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li><a class="sub-menu" href="#">Development</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Ajax</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">jQuery</a>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                    <li><a href="#">Contribution</a>
                                        <ul class="sub-nav">
                                            <li class="sub-menu"><a href="#">Themes</a>
                                            </li>
                                            <li class="sub-menu"><a href="#">Plugins</a>
                                            </li>
                                            <li class="sub-menu"><a href="#">Custom
                                                Post Types</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Portfolios</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Testimonials</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="sub-menu"><a href="#">Options</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                                -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </nav>
    </div>
</div>


      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-use-entities">
<h1>How to Use Entities<a class="headerlink" href="#how-to-use-entities" title="Permalink to this headline">¶</a></h1>
<p>OroPlatform makes it easy to manage your entities:</p>
<ol class="arabic simple">
<li><a class="reference internal" href="#book-entities-doctrine"><span class="std std-ref">Use Doctrine to create your own entities.</span></a></li>
<li><a class="reference internal" href="#book-entities-entity-configuration"><span class="std std-ref">Configure how your entities will be presented and control access.</span></a></li>
</ol>
<div class="section" id="doctrine-entities">
<span id="book-entities-doctrine"></span><h2>Doctrine Entities<a class="headerlink" href="#doctrine-entities" title="Permalink to this headline">¶</a></h2>
<div class="section" id="defining-entities">
<h3>Defining Entities<a class="headerlink" href="#defining-entities" title="Permalink to this headline">¶</a></h3>
<p>You can define entities in the same way that you are used to from common Symfony applications. For
example, you can use the annotations provided by Doctrine (of course, you can use the YAML or XML
configuration format as well):</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Entity/Hotel.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\Entity</span>
<span class="sd"> * @ORM\Table(name=&quot;acme_hotel&quot;)</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Hotel</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @ORM\Id</span>
<span class="sd">     * @ORM\Column(type=&quot;integer&quot;)</span>
<span class="sd">     * @ORM\GeneratedValue(strategy=&quot;AUTO&quot;)</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$id</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @ORM\Column(type=&quot;string&quot;, length=255)</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getId</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setName</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>You create a class that represents a particular model from your domain and add getter and setter
methods to be able to access and modify the data in your application. Then, you add mapping
information to tell Doctrine how the data will be mapped to your database.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Read the <a class="reference external" href="http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/basic-mapping.html">Doctrine ORM documentation</a> to get a deeper understanding of how you can map the model
to a database.</p>
</div>
</div>
<div class="section" id="updating-the-database-schema">
<span id="book-entities-database-schema-update"></span><h3>Updating the Database Schema<a class="headerlink" href="#updating-the-database-schema" title="Permalink to this headline">¶</a></h3>
<p>Once the models have been created, you need to update the database to reflect the changes you have
done. So you need a mechanism to iteratively extend your model. For this purpose, you usually
use migrations. Migrations allow you to version your database schema. Everytime you modify your
model, you&#8217;ll create a new migration that reflects the changes for this particular schema version.</p>
<p>However, Doctrine&#8217;s migration mechanism only works well on the application level. It is not capable
to handle different schema versions per bundle. This means that you cannot use them in a modular
architecture. Luckily, you can use the features provided by the <a class="reference external" href="https://github.com/orocrm/platform/tree/master/src/Oro/Bundle/MigrationBundle">OroMigrationBundle</a> to create
separate migrations for each bundle.</p>
<p>Organizing migrations is pretty easy if you follow some basic conventions:</p>
<ul class="simple">
<li>Place all migrations under the <code class="docutils literal"><span class="pre">Migrations/Schema/</span></code> directory of your bundle.</li>
<li>In this directory, create one subdirectory per schema version.</li>
<li>Create as many migration classes as necessary inside a particular schema version directory (see
the example below).</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The names of the schema version directories are compared to each other using PHP&#8217;s
<code class="docutils literal"><a class="reference external" href="http://php.net/manual/en/function.version-compare.php" title="version_compare"><span class="pre">version_compare</span></a></code> function. So it&#8217;s good practice to name them like <code class="docutils literal"><span class="pre">v1_0</span></code>,
<code class="docutils literal"><span class="pre">v2_0</span></code> and so on.</p>
</div>
<p>When a migration to a particular schema version is performed, all migration classes from the
corresponding directory are evaluated and the contents of their <code class="docutils literal"><span class="pre">up()</span></code> method is executed. A
class is treated as a migration class when it implements the
<code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.MigrationBundle.Migration.Migration.html" title="Oro\Bundle\MigrationBundle\Migration\Migration"><span class="pre">Migration</span></a></code> interface.</p>
<p>For example, the migration class for the <code class="docutils literal"><span class="pre">Hotel</span></code> entity will look like this:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Migraions/Schema/v1_0/Hotel.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Migraions\Schema\v1_0</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\DBAL\Schema\Schema</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\MigrationBundle\Migration\Migration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\MigrationBundle\Migration\QueryBag</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Hotel</span> <span class="k">implements</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">(</span><span class="nx">Schema</span> <span class="nv">$schema</span><span class="p">,</span> <span class="nx">QueryBag</span> <span class="nv">$queries</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$table</span> <span class="o">=</span> <span class="nv">$schema</span><span class="o">-&gt;</span><span class="na">createTable</span><span class="p">(</span><span class="s1">&#39;acme_hotel&#39;</span><span class="p">);</span>
        <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;autoincrement&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">]);</span>
        <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;length&#39;</span> <span class="o">=&gt;</span> <span class="mi">255</span><span class="p">]);</span>
        <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">setPrimaryKey</span><span class="p">([</span><span class="s1">&#39;id&#39;</span><span class="p">]);</span>
        <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">addIndex</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="s1">&#39;hotel_name_idx&#39;</span><span class="p">,</span> <span class="p">[]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>You can modify the database using the interface the Doctrine DBAL offers with its <code class="docutils literal"><span class="pre">Schema</span></code> class
and you can also execute queries directly using the <code class="docutils literal"><span class="pre">QueryBag</span></code> if needed.</p>
<p>Queries that are executed using the <code class="docutils literal"><span class="pre">QueryBag</span></code> are divided into two groups: use the
<code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.MigrationBundle.Migration.QueryBag.html#method_addPreQuery" title="Oro\Bundle\MigrationBundle\Migration\QueryBag::addPreQuery()"><span class="pre">addPreQuery()</span></a></code> method to add a query
that is executed before the schema changes from the migration class are performed. Queries scheduled with
the <code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.MigrationBundle.Migration.QueryBag.html#method_addPostQuery" title="Oro\Bundle\MigrationBundle\Migration\QueryBag::addPostQuery()"><span class="pre">addPostQuery()</span></a></code> method are executed
after the schema has been modified.</p>
<p>To actually load and apply the migrations to the existing database schema, you have to execute the
<code class="docutils literal"><span class="pre">oro:migration:load</span></code> command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ php app/console oro:migration:load --force
</pre></div>
</div>
<p>This command checks for present migration versions that are currently not reflected in the existing
database schema and executes all missing migrations sequentially in ascending order.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can use the <code class="docutils literal"><span class="pre">--dry-run</span></code> option to see what would be executed and you can use the
<code class="docutils literal"><span class="pre">--bundles</span></code> option to perform migrations only for a subset of all available bundles (use
<code class="docutils literal"><span class="pre">--exclude</span></code> for a bundle blacklist instead). Also, you can get more information about each
query with the <code class="docutils literal"><span class="pre">--show-queries</span></code> option.</p>
</div>
</div>
</div>
<div class="section" id="entity-configuration">
<span id="book-entities-entity-configuration"></span><h2>Entity Configuration<a class="headerlink" href="#entity-configuration" title="Permalink to this headline">¶</a></h2>
<p>So far, Doctrine offers a wide range of functionality to map your entities to the database, to
save your data and to retrieve them from the database. However, in an application based on the Oro
Platform, you usually want to control how entities are presented to the user. OroPlatform
includes the <a class="reference external" href="https://github.com/orocrm/platform/tree/master/src/Oro/Bundle/EntityConfigBundle">EntityConfigBundle</a> that makes it easy to configure additional metadata of your
entities as well as the fields of your entities. For example, you can now configure icons and
labels used when showing an entity in the UI or you can set up access levels to control how
entities can be viewed and modified.</p>
<div class="section" id="adding-configuration-options">
<h3>Adding Configuration Options<a class="headerlink" href="#adding-configuration-options" title="Permalink to this headline">¶</a></h3>
<p>In the first step, you need to define the options that should be configurable. New options can be
created per bundle which means that a bundle can extend the set of available options. To add new
options, you create a <code class="docutils literal"><span class="pre">entity_config.yml</span></code> file in your bundle which can look like this:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/Acme/DemoBundle/Resources/config/oro/entity_config.yml</span>
<span class="l l-Scalar l-Scalar-Plain">entity_config</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">acme_demo</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">entity</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">items</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">comment</span><span class="p p-Indicator">:</span>
                    <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">default_value</span><span class="p p-Indicator">:</span> <span class="s">&quot;&quot;</span>
                        <span class="l l-Scalar l-Scalar-Plain">translatable</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">true</span>
                        <span class="l l-Scalar l-Scalar-Plain">indexed</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">true</span>
                    <span class="l l-Scalar l-Scalar-Plain">grid</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span>        <span class="l l-Scalar l-Scalar-Plain">string</span>
                        <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">Comment</span>
                        <span class="l l-Scalar l-Scalar-Plain">show_filter</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
                        <span class="l l-Scalar l-Scalar-Plain">filterable</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">true</span>
                        <span class="l l-Scalar l-Scalar-Plain">filter_type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
                        <span class="l l-Scalar l-Scalar-Plain">sortable</span><span class="p p-Indicator">:</span>    <span class="l l-Scalar l-Scalar-Plain">true</span>
                    <span class="l l-Scalar l-Scalar-Plain">form</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">text</span>
                        <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
                            <span class="l l-Scalar l-Scalar-Plain">block</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">entity</span>
                            <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Comment</span>
        <span class="l l-Scalar l-Scalar-Plain">field</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">items</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">auditable</span><span class="p p-Indicator">:</span>
                    <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">indexed</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">true</span>
                        <span class="l l-Scalar l-Scalar-Plain">priority</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">60</span>
                    <span class="l l-Scalar l-Scalar-Plain">grid</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span>        <span class="l l-Scalar l-Scalar-Plain">boolean</span>
                        <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span>       <span class="s">&#39;Auditable&#39;</span>
                        <span class="l l-Scalar l-Scalar-Plain">show_filter</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
                        <span class="l l-Scalar l-Scalar-Plain">filterable</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">true</span>
                        <span class="l l-Scalar l-Scalar-Plain">filter_type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">boolean</span>
                        <span class="l l-Scalar l-Scalar-Plain">sortable</span><span class="p p-Indicator">:</span>    <span class="l l-Scalar l-Scalar-Plain">true</span>
                        <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span>    <span class="l l-Scalar l-Scalar-Plain">true</span>
                    <span class="l l-Scalar l-Scalar-Plain">form</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">choice</span>
                        <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
                            <span class="l l-Scalar l-Scalar-Plain">block</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">entity</span>
                            <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span>       <span class="s">&#39;Auditable&#39;</span>
                            <span class="l l-Scalar l-Scalar-Plain">choices</span><span class="p p-Indicator">:</span>     <span class="p p-Indicator">[</span><span class="s">&#39;No&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;Yes&#39;</span><span class="p p-Indicator">]</span>
                            <span class="l l-Scalar l-Scalar-Plain">empty_value</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</td></tr></table></div>
<p>The key used in the first level of the entity configuration is a custom identifier used to create
a kind of namespace for the additional options. For each scope, a different service is created (its
name follows the schema <code class="docutils literal"><span class="pre">oro_entity_config.provider.&lt;scope&gt;</span></code>). For example, the service name for
the options configured in the example above is <code class="docutils literal"><span class="pre">oro_entity_config.provider.acme_demo</span></code>. It is an
instance of the <code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Provider.ConfigProvider.html" title="Oro\Bundle\EntityConfigBundle\Provider\ConfigProvider"><span class="pre">ConfigProvider</span></a></code> class.</p>
<p>Options can be configured on two levels: They can be configured on the entity level or they can be
configured per field. The example above adds a new <code class="docutils literal"><span class="pre">comment</span></code> property that allows the users to
add custom comments per configurable entity. It also adds the <code class="docutils literal"><span class="pre">auditable</span></code> option on the field
level. This means that the user can decide for every field on an entity whether or not it should
be audited.</p>
<p>The configured values are stored in different tables:</p>
<ul class="simple">
<li>Values for options on the entity level are stored in the <code class="docutils literal"><span class="pre">oro_entity_config</span></code> table.</li>
<li>The <code class="docutils literal"><span class="pre">oro_entity_config_field</span></code> table is used to store configured values for the field level.</li>
</ul>
<p>Below the configuration level, each option&#8217;s configuration is divided into three sections:</p>
<dl class="docutils" id="book-entities-configuration-options">
<dt><code class="docutils literal"><span class="pre">options</span></code></dt>
<dd><p class="first">These values are used to configure additional behavior for the config field:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">default_value</span></code></td>
<td>The value that is used by default when no custom value was added.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">translatable</span></code></td>
<td>If <code class="docutils literal"><span class="pre">true</span></code>, the value entered by the user is treated as a key which is
then used to look up the actual value using the Symfony translation
procedure.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">indexed</span></code></td>
<td>Set this to <code class="docutils literal"><span class="pre">true</span></code> when the attribute needs to be accessed in SQL
queries (see <a class="reference internal" href="#book-entities-indexed-attributes"><span class="std std-ref">Indexed Attributes</span></a>).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">priority</span></code></td>
<td>Defines the order in which options will be shown in grid views and
forms (options with a higher priority will be displayed before options
with a lower priority).</td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal"><span class="pre">grid</span></code></dt>
<dd><p class="first">Configures the way the field is presented in a datagrid:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">type</span></code></td>
<td>The attribute type</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">label</span></code></td>
<td>The grid column headline</td>
</tr>
<tr class="row-even"><td><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">show_filter</span></code></li>
<li><code class="docutils literal"><span class="pre">filterable</span></code></li>
<li><code class="docutils literal"><span class="pre">filter_type</span></code></li>
</ul>
</td>
<td>These options control whether the view can be filtered by the attribute
value and how the filter options look like.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">sortable</span></code></td>
<td>When enabled, the user can sort the table by clicking on the attribute
column&#8217;s title.</td>
</tr>
</tbody>
</table>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use the attribute in a grid view, it
<a class="reference internal" href="#book-entities-indexed-attributes"><span class="std std-ref">needs to be indexed</span></a>.</p>
</div>
</dd>
<dt><code class="docutils literal"><span class="pre">form</span></code></dt>
<dd><p class="first">You use these options to control how the actual value can be configured by the user:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">type</span></code></td>
<td>The form type</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">options</span></code></td>
<td>Additional options controlling the form layout:</td>
</tr>
<tr class="row-even"><td><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">block</span></code></li>
</ul>
</td>
<td>The block of the form in which the attribute will be displayed</td>
</tr>
<tr class="row-odd"><td><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">label</span></code></li>
</ul>
</td>
<td>The field label</td>
</tr>
<tr class="row-even"><td><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">choices</span></code></li>
</ul>
</td>
<td>Possible values from which the user can choose one (this option is only
available when the form type is <code class="docutils literal"><span class="pre">choice</span></code>)</td>
</tr>
<tr class="row-odd"><td><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">empty_value</span></code></li>
</ul>
</td>
<td>The value that is taken when the user makes no choice (this option is
only available when the form type is <code class="docutils literal"><span class="pre">choice</span></code>)</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>Secondly, you need to update all configurable entities after configuration parameters have been
modified or added using the <code class="docutils literal"><span class="pre">oro:entity-config:update</span></code> command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ php app/console oro:entity-config:update --force
</pre></div>
</div>
<p>When the <code class="docutils literal"><span class="pre">oro:entity-config:update</span></code> command is executed without using the <code class="docutils literal"><span class="pre">--force</span></code> option,
only new values will be added, but no existing parameters will be updated.</p>
<div class="section" id="indexed-attributes">
<span id="book-entities-indexed-attributes"></span><h4>Indexed Attributes<a class="headerlink" href="#indexed-attributes" title="Permalink to this headline">¶</a></h4>
<p id="book-entities-entity-extension">By default, the values the user enters when editing additional entity attributes are stored as
serialized arrays in the database. However, when the application needs to use attributes in an SQL
query, it needs to get the <em>raw</em> data. To achieve this, you have to enable the index using the
<a class="reference internal" href="#book-entities-configuration-options"><span class="std std-ref">indexed key</span></a> in the <code class="docutils literal"><span class="pre">options</span></code> section. When this
option is enabled, the system will store a copy of the attributes value and keep it in sync when it
gets updated (the indexed value is stored in the <code class="docutils literal"><span class="pre">oro_entity_config_index_value</span></code> table).</p>
</div>
</div>
<div class="section" id="configure-entities">
<h3>Configure Entities<a class="headerlink" href="#configure-entities" title="Permalink to this headline">¶</a></h3>
<p>Entities will not be configurable by default. They must be tagged as configurable entities to let
the system apply entity config options to them:</p>
<ul class="simple">
<li>The <a class="reference internal" href="#book-entities-config-annotation"><span class="std std-ref">&#64;Config annotation</span></a> is used to enable entity level
configuration for an entity.</li>
<li>Use the <a class="reference internal" href="#book-entities-config-field-annotation"><span class="std std-ref">&#64;ConfigField annotation</span></a> to enable config
options for selected fields.</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The bundles from OroPlatform offer a large set of predefined options that you can use in
your entities to configure them and control their behavior. Take a look at the
<code class="docutils literal"><span class="pre">entity_config.yml</span></code> files that can be found in many bundles and read their dedicated
documentation.</p>
</div>
<div class="section" id="the-config-annotation">
<span id="book-entities-config-annotation"></span><h4>The <code class="docutils literal"><span class="pre">&#64;Config</span></code> Annotation<a class="headerlink" href="#the-config-annotation" title="Permalink to this headline">¶</a></h4>
<p>To make the <code class="docutils literal"><span class="pre">Hotel</span></code> entity from the first part of the chapter configurable, simply import the
<code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Metadata.Annotation.Config.html" title="Oro\Bundle\EntityConfigBundle\Metadata\Annotation\Config"><span class="pre">&#64;Config</span></a></code> annotation and
use it in the class docblock:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Entity/Hotel.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityConfigBundle\Metadata\Annotation\Config</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\Entity</span>
<span class="sd"> * @ORM\Table(name=&quot;acme_hotel&quot;)</span>
<span class="sd"> * @Config</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Hotel</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>You can also change the default value of each configurable option using the <code class="docutils literal"><span class="pre">defaultValues</span></code>
argument:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Entity/Hotel.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityConfigBundle\Metadata\Annotation\Config</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\Entity</span>
<span class="sd"> * @ORM\Table(name=&quot;acme_hotel&quot;)</span>
<span class="sd"> * @Config(</span>
<span class="sd"> *     defaultValues={</span>
<span class="sd"> *         &quot;acme_demo&quot;={</span>
<span class="sd"> *             &quot;comment&quot;=&quot;Our hotels&quot;</span>
<span class="sd"> *         }</span>
<span class="sd"> *     }</span>
<span class="sd"> * )</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Hotel</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="the-configfield-annotation">
<span id="book-entities-config-field-annotation"></span><h4>The <code class="docutils literal"><span class="pre">&#64;ConfigField</span></code> Annotation<a class="headerlink" href="#the-configfield-annotation" title="Permalink to this headline">¶</a></h4>
<p>Similar to the <code class="docutils literal"><span class="pre">&#64;Config</span></code> annotation for entities, you can use the
<code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Metadata.Annotation.ConfigField.html" title="Oro\Bundle\EntityConfigBundle\Metadata\Annotation\ConfigField"><span class="pre">&#64;ConfigField</span></a></code>
annotation to make properties of an entity configurable:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Entity/Hotel.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityConfigBundle\Metadata\Annotation\ConfigField</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\Entity</span>
<span class="sd"> * @ORM\Table(name=&quot;acme_hotel&quot;)</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Hotel</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="sd">/**</span>
<span class="sd">    * @ORM\Column(type=&quot;string&quot;, length=255)</span>
<span class="sd">    * @ConfigField</span>
<span class="sd">    */</span>
    <span class="k">private</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Default values can be changed in the same way as it can be done on the entity level:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Entity/Hotel.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityConfigBundle\Metadata\Annotation\ConfigField</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\Entity</span>
<span class="sd"> * @ORM\Table(name=&quot;acme_hotel&quot;)</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Hotel</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="sd">/**</span>
<span class="sd">    * @ORM\Column(type=&quot;string&quot;, length=255)</span>
<span class="sd">    * @ConfigField(</span>
<span class="sd">    *     &quot;defaultValues&quot;={</span>
<span class="sd">    *         &quot;acme_demo&quot;={</span>
<span class="sd">    *             &quot;auditable&quot;=true</span>
<span class="sd">    *         }</span>
<span class="sd">    *     }</span>
<span class="sd">    * )</span>
<span class="sd">    */</span>
    <span class="k">private</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="accessing-the-entity-configuration">
<h3>Accessing the Entity Configuration<a class="headerlink" href="#accessing-the-entity-configuration" title="Permalink to this headline">¶</a></h3>
<p>Now that you know how you define additional configuration options and how to use them in your own
entities, you will usually want to access the configured values. The main entry point to access the
configuration is the provider service for the particular scope which has to be retrieved from the
service container. For example, if you want to work with your newly created <code class="docutils literal"><span class="pre">auditable</span></code> option,
you will have to use the <code class="docutils literal"><span class="pre">oro_entity_config.provider.acme_demo</span></code> service (the <code class="docutils literal"><span class="pre">auditable</span></code> option
was defined in the <code class="docutils literal"><span class="pre">acme_demo</span></code> scope):</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// $container is an instance of Symfony\Component\DependencyInjection\ContainerInterface</span>
<span class="nv">$container</span> <span class="o">=</span> <span class="o">...</span><span class="p">;</span>
<span class="nv">$acmeDemoProvider</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;oro_entity_config.provider.acme_demo&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>Then you need to fetch the configuration in this scope for a particular entity or entity field
using the <code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Provider.ConfigProvider.html#method_getConfig" title="Oro\Bundle\EntityConfigBundle\Provider\ConfigProvider::getConfig()"><span class="pre">getConfig()</span></a></code> method. The
configuration for such a configurable object (an entity or a field) is represented by an instance
of the <code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Config.ConfigInterface.html" title="Oro\Bundle\EntityConfigBundle\Config\ConfigInterface"><span class="pre">ConfigInterface</span></a></code>:</p>
<dl class="docutils">
<dt><code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Config.ConfigInterface.html#method_get" title="Oro\Bundle\EntityConfigBundle\Config\ConfigInterface::get()"><span class="pre">get()</span></a></code></dt>
<dd>Returns the actually configured value for an option.</dd>
<dt><code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Config.ConfigInterface.html#method_set" title="Oro\Bundle\EntityConfigBundle\Config\ConfigInterface::set()"><span class="pre">set()</span></a></code></dt>
<dd>Changes the value of an option to a new value.</dd>
<dt><code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Config.ConfigInterface.html#method_remove" title="Oro\Bundle\EntityConfigBundle\Config\ConfigInterface::remove()"><span class="pre">remove()</span></a></code></dt>
<dd>Removes the particular option.</dd>
<dt><code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Config.ConfigInterface.html#method_has" title="Oro\Bundle\EntityConfigBundle\Config\ConfigInterface::has()"><span class="pre">has()</span></a></code></dt>
<dd>Checks whether or not an option with the given name exists.</dd>
<dt><code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Config.ConfigInterface.html#method_is" title="Oro\Bundle\EntityConfigBundle\Config\ConfigInterface::is()"><span class="pre">is()</span></a></code></dt>
<dd>Checks if the value of an option equals the given value.</dd>
<dt><code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Config.ConfigInterface.html#method_in" title="Oro\Bundle\EntityConfigBundle\Config\ConfigInterface::in()"><span class="pre">in()</span></a></code></dt>
<dd>Checks if the value of an option is one of the given values.</dd>
<dt><code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Config.ConfigInterface.html#method_all" title="Oro\Bundle\EntityConfigBundle\Config\ConfigInterface::all()"><span class="pre">all()</span></a></code></dt>
<dd>Returns all parameters for the configurable object.</dd>
<dt><code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Config.ConfigInterface.html#method_setValues" title="Oro\Bundle\EntityConfigBundle\Config\ConfigInterface::setValues()"><span class="pre">setValues()</span></a></code></dt>
<dd>Replaces values for the given options with some given values.</dd>
</dl>
<p>Please note that it is not enough to modify configuration values in the provider. You also need to
persist your changes by calling the <code class="docutils literal"><a class="reference external" href="http://phpdoc.orocrm.com/platform/classes/Oro.Bundle.EntityConfigBundle.Provider.ConfigProvider.html#method_flush" title="Oro\Bundle\EntityConfigBundle\Provider\ConfigProvider::flush()"><span class="pre">flush()</span></a></code>
method afterwards:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="nv">$acmeDemoProvider</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;oro_entity_config.provider.acme_demo&#39;</span><span class="p">);</span>
<span class="nv">$acmeConfig</span> <span class="o">=</span> <span class="nv">$acmeDemoProvider</span><span class="o">-&gt;</span><span class="na">getConfig</span><span class="p">(</span><span class="s1">&#39;Acme\Bundle\AcmeBundle\Entity\Hotel&#39;</span><span class="p">);</span>
<span class="nv">$acmeConfig</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">,</span> <span class="s1">&#39;Updated comment&#39;</span><span class="p">);</span>
<span class="nv">$acmeDemoProvider</span><span class="o">-&gt;</span><span class="na">flush</span><span class="p">();</span>
</pre></div>
</td></tr></table></div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Use the <code class="docutils literal"><span class="pre">oro:entity-config:debug</span></code> command to access or modify configuration values from the
command line.</p>
</div>
</div>
</div>
<div class="section" id="managing-entity-relations">
<h2>Managing Entity Relations<a class="headerlink" href="#managing-entity-relations" title="Permalink to this headline">¶</a></h2>
<p>Adding relations between entities is a common task. For example, imagine that the owner of an
<code class="docutils literal"><span class="pre">Email</span></code> entity can either be a user or a contact. Using OroPlatform, you have two
opportunities to manage relations between the email and its owner:</p>
<p><a class="reference internal" href="#book-entities-doctrine-relations"><span class="std std-ref">Use Doctrine&#8217;s built-in functions</span></a> to add two relations
to the <cite>Email</cite> entity. One to model a many-to-one relationship to a user and another one to model
the relationship to a contact. No matter what actual entity the <code class="docutils literal"><span class="pre">Email</span></code> belongs to, one of the
properties <code class="docutils literal"><span class="pre">contact</span></code> and <code class="docutils literal"><span class="pre">user</span></code> will always be <code class="docutils literal"><span class="pre">null</span></code>. Furthermore, you always have to modify
your code to add new types of ownership. Third-party modules can&#8217;t add new types, but have to ask
you, the developer, to add them instead.</p>
<p>The second approach is <a class="reference internal" href="#book-entities-extended-entities"><span class="std std-ref">to use the EntityExtendBundle</span></a> to
configure so-called associations. Once you have done that in your application, and you can also to
do that for configurable entities from third-party modules, the bundle will create matching
Doctrine relations and getter/setter methods for you automatically. The downside of this approach is
that the owning side of a relationship always has to be an extended entity and that associations do
not work for bidirectional relations.</p>
<div class="section" id="doctrine-relations">
<span id="book-entities-doctrine-relations"></span><h3>Doctrine Relations<a class="headerlink" href="#doctrine-relations" title="Permalink to this headline">¶</a></h3>
<p>If you know in advance which entities will be associated with your <code class="docutils literal"><span class="pre">Email</span></code> entity, you can use
common Doctrine relations. For example, an <code class="docutils literal"><span class="pre">Email</span></code> can either belong to a <code class="docutils literal"><span class="pre">Contact</span></code> or to a
<code class="docutils literal"><span class="pre">User</span></code>. All you have to do is to add both a <code class="docutils literal"><span class="pre">$user</span></code> and a <code class="docutils literal"><span class="pre">$contact</span></code> property to your
<code class="docutils literal"><span class="pre">Email</span></code> class and dynamically choose the property to use in the <code class="docutils literal"><span class="pre">setOwner()</span></code> and <code class="docutils literal"><span class="pre">getOwner()</span></code>
methods:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Entity/Email.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\Entity</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Email</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @ORM\OneToOne(targetEntity=&quot;User&quot;, inversedBy=&quot;email&quot;)</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$user</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @ORM\OneToOne(targetEntity=&quot;Contact&quot;, inversedBy=&quot;email&quot;)</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$contact</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @return User|Contact|null $owner</span>
<span class="sd">     */</span>
   <span class="k">public</span> <span class="k">function</span> <span class="nf">getOwner</span><span class="p">()</span>
   <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="k">null</span> <span class="o">!==</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">;</span>
       <span class="p">}</span>

       <span class="k">if</span> <span class="p">(</span><span class="k">null</span> <span class="o">!==</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">contact</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">contact</span><span class="p">;</span>
       <span class="p">}</span>

       <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
   <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @param User|Contact|null $owner</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setOwner</span><span class="p">(</span><span class="nv">$owner</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">null</span> <span class="o">===</span> <span class="nv">$owner</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">user</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">contact</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$owner</span> <span class="nx">instanceof</span> <span class="nx">User</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">user</span> <span class="o">=</span> <span class="nv">$owner</span><span class="p">;</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">contact</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$owner</span> <span class="nx">instanceof</span> <span class="nx">Contact</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">user</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">contact</span> <span class="o">=</span> <span class="nv">$owner</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">\InvalidArgumentException</span><span class="p">(</span><span class="s1">&#39;Owner needs to be a user or a contact&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The advantage of this solution is that you are in full control of your entity management. For
example, you can add additional methods that ease your development or create bidirectional
relationships. On the downside, your code is more verbose: You have to add conditions in your
getter and setter methods for all possible referenced entities. Furthermore, third-party modules
cannot add new types and you cannot create relations to custom entities that were created by an
administrator through the entity management interface.</p>
<p>If you are in the need of those features, you have to use
<a class="reference internal" href="#book-entities-extended-entities"><span class="std std-ref">associations as provided for extended entities</span></a>.</p>
</div>
<div class="section" id="extending-entities">
<span id="book-entities-extended-entities"></span><h3>Extending Entities<a class="headerlink" href="#extending-entities" title="Permalink to this headline">¶</a></h3>
<p>Common Doctrine entities have a fixed structure. This means that you cannot add additional
attributes to existing entities. Of course, one can extend an entity class and add additional
properties in the subclass. However, this approach does not work anymore when an entity should be
extended by different modules.</p>
<p>To solve this, you can use the <a class="reference external" href="https://github.com/orocrm/platform/tree/master/src/Oro/Bundle/EntityExtendBundle">EntityExtendBundle</a> which offers the following features:</p>
<ul class="simple">
<li>Dynamically add fields to entities through configuration.</li>
<li>Users with appropriate permissions can add or remove dynamic fields from entities in the user
interface without assistance of a developer.</li>
<li>Show dynamic fields in views, forms and grids.</li>
<li>Support for dynamic relations between entities.</li>
</ul>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">It is not recommended to rely on the existence of dynamic fields in your business logic since
they can be removed by administrative users.</p>
</div>
<div class="section" id="creating-extended-entities">
<h4>Creating Extended Entities<a class="headerlink" href="#creating-extended-entities" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">Create the <em>extend entity</em> class:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Model/ExtendHotel.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Model</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ExtendHotel</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Constructor</span>
<span class="sd">     *</span>
<span class="sd">     * The real implementation of this method is auto generated.</span>
<span class="sd">     *</span>
<span class="sd">     * IMPORTANT: If the derived class has own constructor it must call parent constructor.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The class name of an extended entity consists of two parts: Its name always <strong>must</strong> start with
<code class="docutils literal"><span class="pre">Extend</span></code>. The suffix (here <code class="docutils literal"><span class="pre">Hotel</span></code>) must be the name of your entity class.</p>
<p>The class itself is an empty skeleton. Its actual content will be generated dynamically in the
application cache.</p>
</li>
<li><p class="first">Let the <em>entity class</em> extend the <em>extend entity</em> class:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Entity/Hotel.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Acme\DemoBundle\Model\ExtendHotel</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\Entity</span>
<span class="sd"> * @ORM\Table(name=&quot;acme_hotel&quot;)</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Hotel</span> <span class="k">extends</span> <span class="nx">ExtendHotel</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @ORM\Id</span>
<span class="sd">     * @ORM\Column(type=&quot;integer&quot;)</span>
<span class="sd">     * @ORM\GeneratedValue(strategy=&quot;AUTO&quot;)</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$id</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @ORM\Column(type=&quot;string&quot;, length=255)</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getId</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setName</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Add new properties using Oro migrations:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Migraions/Schema/v2_0;</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Migrations\Schema\v2_0</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\DBAL\Schema\Schema</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\MigrationBundle\Migration\Migration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\MigrationBundle\Migration\QueryBag</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\EntityConfig\ExtendScope</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HotelRankingColumn</span> <span class="k">implements</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @inheritdoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">(</span><span class="nx">Schema</span> <span class="nv">$schema</span><span class="p">,</span> <span class="nx">QueryBag</span> <span class="nv">$queries</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$table</span> <span class="o">=</span> <span class="nv">$schema</span><span class="o">-&gt;</span><span class="na">getTable</span><span class="p">(</span><span class="s1">&#39;acme_hotel&#39;</span><span class="p">);</span>
        <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">(</span>
            <span class="s1">&#39;hotel_rating&#39;</span><span class="p">,</span>
            <span class="s1">&#39;string&#39;</span><span class="p">,</span>
            <span class="k">array</span><span class="p">(</span><span class="s1">&#39;oro_options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;extend&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;is_extend&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                    <span class="s1">&#39;owner&#39;</span> <span class="o">=&gt;</span> <span class="nx">ExtendScope</span><span class="o">::</span><span class="na">OWNER_CUSTOM</span>
                <span class="p">),</span>
                <span class="s1">&#39;entity&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Hotel rating&#39;</span><span class="p">),</span>
                <span class="s1">&#39;datagrid&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;is_visible&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">)</span>
            <span class="p">))</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The example above adds a new column <code class="docutils literal"><span class="pre">hotel_ranking</span></code>. The third parameter configures the column
as an extended field. The <code class="docutils literal"><span class="pre">ExtendScope::OWNER_CUSTOM</span></code> owner in the <code class="docutils literal"><span class="pre">oro_options</span></code> key
indicates that the column was added dynamically. It will be visible and configurable in the UI.</p>
<p>Note that this property is neither present in the <code class="docutils literal"><span class="pre">Hotel</span></code> entity class nor in the
<code class="docutils literal"><span class="pre">ExtendHotel</span></code> class in your bundle, but it will only be part of the <code class="docutils literal"><span class="pre">ExtendHotel</span></code> class that
will be generated in your application cache.</p>
</li>
<li><p class="first">Finally, load the changed configuration using the <code class="docutils literal"><span class="pre">oro:migration:load</span></code> command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ php app/console oro:migration:load --force
</pre></div>
</div>
<p>This command updates the database schema and generates the real implementation of the
<code class="docutils literal"><span class="pre">ExtendHotel</span></code> class in the application cache as well.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can add, modify and remove custom fields in the UI under <em>System</em>/<em>Entities</em>/<em>Entity Management</em>.</p>
</div>
<div class="section" id="many-to-one-associations">
<span id="book-entities-many-to-one-associations"></span><h5>Many-to-one Associations<a class="headerlink" href="#many-to-one-associations" title="Permalink to this headline">¶</a></h5>
<p>To explain how to create many-to-one associations, the following section explains some parts of the
<a class="reference external" href="https://github.com/orocrm/platform/tree/master/src/Oro/Bundle/NoteBundle">OroNoteBundle</a> to show how an entity can be created to which you can then attach a collection of
<code class="docutils literal"><span class="pre">Note</span></code> objects. First, you need to create the owning side of the associations. As explained
above, the owning side has to be an extended entity. Please note that the real implementations of
the methods shown below will be generated in the cache:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Oro\Bundle\NoteBundle\Model</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ExtendNote</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">supportTarget</span><span class="p">(</span><span class="nv">$targetClass</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getTarget</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setTarget</span><span class="p">(</span><span class="nv">$target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The actual <code class="docutils literal"><span class="pre">Note</span></code> entity then needs to extend the <code class="docutils literal"><span class="pre">ExtendNote</span></code>:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Oro\Bundle\NoteBundle\Entity</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\Entity</span>
<span class="sd"> * @ORM\Table(name=&quot;oro_note&quot;)</span>
<span class="sd"> * @Config</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Note</span> <span class="k">extends</span> <span class="nx">ExtendNote</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The bundle also defines some entity configuration properties which make it possible to control to
which entities notes can be added:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">entity_config</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">note</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">entity</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">items</span><span class="p p-Indicator">:</span>
                <span class="c1"># indicates whether the entity can have notes or not</span>
                <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="c1"># boolean</span>
                    <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">require_schema_update</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
                        <span class="l l-Scalar l-Scalar-Plain">priority</span><span class="p p-Indicator">:</span>           <span class="l l-Scalar l-Scalar-Plain">250</span>
                        <span class="l l-Scalar l-Scalar-Plain">default_value</span><span class="p p-Indicator">:</span>      <span class="l l-Scalar l-Scalar-Plain">false</span>
                    <span class="l l-Scalar l-Scalar-Plain">form</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span>               <span class="l l-Scalar l-Scalar-Plain">oro_entity_extend_association_choice</span>
                        <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
                            <span class="l l-Scalar l-Scalar-Plain">block</span><span class="p p-Indicator">:</span>          <span class="l l-Scalar l-Scalar-Plain">associations</span>
                            <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">true</span>
                            <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span>          <span class="l l-Scalar l-Scalar-Plain">oro.note.enabled</span>
                            <span class="l l-Scalar l-Scalar-Plain">association_class</span><span class="p p-Indicator">:</span> <span class="s">&#39;OroNoteBundle:Note&#39;</span>

                <span class="c1"># this attribute can be used to prohibit changing the note association state (no matter whether</span>
                <span class="c1"># it is enabled or not) for the entity</span>
                <span class="c1"># if TRUE than the current state cannot be changed</span>
                <span class="l l-Scalar l-Scalar-Plain">immutable</span><span class="p p-Indicator">:</span> <span class="c1"># boolean</span>
                    <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">auditable</span><span class="p p-Indicator">:</span>          <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</td></tr></table></div>
<p>Finally, you have to create extensions for the entity config dumper, the entity generator and the
migrations to make the association available through all stages of the entity generation process:</p>
<ol class="arabic">
<li><p class="first">Hook into the entity config dumper:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Oro\Bundle\NoteBundle\Tools</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Tools\DumperExtensions\AssociationEntityConfigDumperExtension</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\NoteBundle\Entity\Note</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">NoteEntityConfigDumperExtension</span> <span class="k">extends</span> <span class="nx">AssociationEntityConfigDumperExtension</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getAssociationEntityClass</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Note</span><span class="o">::</span><span class="na">ENTITY_NAME</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getAssociationScope</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;note&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Extend the entity generator:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Oro\Bundle\NoteBundle\Tools</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Tools\GeneratorExtensions\AbstractAssociationEntityGeneratorExtension</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\NoteBundle\Entity\Note</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">NoteEntityGeneratorExtension</span> <span class="k">extends</span> <span class="nx">AbstractAssociationEntityGeneratorExtension</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">supports</span><span class="p">(</span><span class="k">array</span> <span class="nv">$schema</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$schema</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="nx">Note</span><span class="o">::</span><span class="na">ENTITY_NAME</span> <span class="o">&amp;&amp;</span> <span class="k">parent</span><span class="o">::</span><span class="na">supports</span><span class="p">(</span><span class="nv">$schema</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Extend the migration behavior to add the association to target entities:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Oro\Bundle\NoteBundle\Migration\Extension</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\DBAL\Schema\Schema</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Migration\Extension\ExtendExtension</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Migration\Extension\ExtendExtensionAwareInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Migration\OroOptions</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Tools\ExtendHelper</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">NoteExtension</span> <span class="k">implements</span> <span class="nx">ExtendExtensionAwareInterface</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="no">NOTE_TABLE_NAME</span> <span class="o">=</span> <span class="s1">&#39;oro_note&#39;</span><span class="p">;</span>

    <span class="sd">/** @var ExtendExtension */</span>
    <span class="k">protected</span> <span class="nv">$extendExtension</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setExtendExtension</span><span class="p">(</span><span class="nx">ExtendExtension</span> <span class="nv">$extendExtension</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">extendExtension</span> <span class="o">=</span> <span class="nv">$extendExtension</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Adds the association between the target table and the note table</span>
<span class="sd">     *</span>
<span class="sd">     * @param Schema $schema</span>
<span class="sd">     * @param string $targetTableName  Target entity table name</span>
<span class="sd">     * @param string $targetColumnName A column name is used to show related entity</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">addNoteAssociation</span><span class="p">(</span>
         <span class="nx">Schema</span> <span class="nv">$schema</span><span class="p">,</span>
         <span class="nv">$targetTableName</span><span class="p">,</span>
         <span class="nv">$targetColumnName</span> <span class="o">=</span> <span class="k">null</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$noteTable</span>   <span class="o">=</span> <span class="nv">$schema</span><span class="o">-&gt;</span><span class="na">getTable</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="na">NOTE_TABLE_NAME</span><span class="p">);</span>
        <span class="nv">$targetTable</span> <span class="o">=</span> <span class="nv">$schema</span><span class="o">-&gt;</span><span class="na">getTable</span><span class="p">(</span><span class="nv">$targetTableName</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$targetColumnName</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$primaryKeyColumns</span> <span class="o">=</span> <span class="nv">$targetTable</span><span class="o">-&gt;</span><span class="na">getPrimaryKeyColumns</span><span class="p">();</span>
            <span class="nv">$targetColumnName</span>  <span class="o">=</span> <span class="nb">array_shift</span><span class="p">(</span><span class="nv">$primaryKeyColumns</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$options</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OroOptions</span><span class="p">();</span>
        <span class="nv">$options</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;note&#39;</span><span class="p">,</span> <span class="s1">&#39;enabled&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
        <span class="nv">$targetTable</span><span class="o">-&gt;</span><span class="na">addOption</span><span class="p">(</span><span class="nx">OroOptions</span><span class="o">::</span><span class="na">KEY</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>

        <span class="nv">$associationName</span> <span class="o">=</span> <span class="nx">ExtendHelper</span><span class="o">::</span><span class="na">buildAssociationName</span><span class="p">(</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">extendExtension</span><span class="o">-&gt;</span><span class="na">getEntityClassByTableName</span><span class="p">(</span><span class="nv">$targetTableName</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">extendExtension</span><span class="o">-&gt;</span><span class="na">addManyToOneRelation</span><span class="p">(</span>
            <span class="nv">$schema</span><span class="p">,</span>
            <span class="nv">$noteTable</span><span class="p">,</span>
            <span class="nv">$associationName</span><span class="p">,</span>
            <span class="nv">$targetTable</span><span class="p">,</span>
            <span class="nv">$targetColumnName</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
</ol>
</div>
<div class="section" id="many-to-many-associations">
<span id="book-entities-many-to-many-associations"></span><h5>Many-to-Many Associations<a class="headerlink" href="#many-to-many-associations" title="Permalink to this headline">¶</a></h5>
<p>When it comes to many-to-many associations, it&#8217;s up to you as the developer to choose the owning
side of the relation. The owning side of this association must be an extended entity and you need
to choose a <em>group</em> name (the group name is the name of the association). Therefore, the extended
entity needs to provide five methods (<code class="docutils literal"><span class="pre">Group</span></code> has to be replaced with the actual name of the
association):</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">supportGroupTarget</span></code></li>
<li><code class="docutils literal"><span class="pre">getGroupTargets</span></code></li>
<li><code class="docutils literal"><span class="pre">hasGroupTarget</span></code></li>
<li><code class="docutils literal"><span class="pre">addGroupTarget</span></code></li>
<li><code class="docutils literal"><span class="pre">removeGroupTarget</span></code></li>
</ul>
<p>To make this more clear, the <a class="reference external" href="https://github.com/orocrm/platform/blob/master/src/Oro/Bundle/ActivityBundle">ActivityBundle</a> will be taken as an example. It provides the ability
to assign activities (like calls, emails, tasks) to other entities. The association name is
<code class="docutils literal"><span class="pre">Activity</span></code>. Therefore, the <code class="docutils literal"><span class="pre">ExtendActivity</span></code> class looks like this:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Oro\Bundle\ActivityBundle\Model</span><span class="p">;</span>

<span class="k">trait</span> <span class="nx">ExtendActivity</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Checks if an entity of the given type can be associated with this activity entity</span>
<span class="sd">     *</span>
<span class="sd">     * The real implementation of this method is auto generated.</span>
<span class="sd">     *</span>
<span class="sd">     * @param string $targetClass The class name of the target entity</span>
<span class="sd">     * @return bool</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">supportActivityTarget</span><span class="p">(</span><span class="nv">$targetClass</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Gets entities of the given type associated with this activity entity</span>
<span class="sd">     *</span>
<span class="sd">     * The real implementation of this method is auto generated.</span>
<span class="sd">     *</span>
<span class="sd">     * @param string $targetClass The class name of the target entity</span>
<span class="sd">     * @return object[]</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getActivityTargets</span><span class="p">(</span><span class="nv">$targetClass</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Checks is the given entity is associated with this activity entity</span>
<span class="sd">     *</span>
<span class="sd">     * The real implementation of this method is auto generated.</span>
<span class="sd">     *</span>
<span class="sd">     * @param object $target Any configurable entity that can be associated with this activity</span>
<span class="sd">     *</span>
<span class="sd">     * @return bool</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">hasActivityTarget</span><span class="p">(</span><span class="nv">$target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Associates the given entity with this activity entity</span>
<span class="sd">     *</span>
<span class="sd">     * The real implementation of this method is auto generated.</span>
<span class="sd">     *</span>
<span class="sd">     * @param object $target Any configurable entity that can be associated with this activity</span>
<span class="sd">     * @return object This object</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">addActivityTarget</span><span class="p">(</span><span class="nv">$target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Removes the association of the given entity with this activity entity</span>
<span class="sd">     *</span>
<span class="sd">     * The real implementation of this method is auto generated.</span>
<span class="sd">     *</span>
<span class="sd">     * @param object $target Any configurable entity that can be associated with this activity</span>
<span class="sd">     * @return object This object</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">removeActivityTarget</span><span class="p">(</span><span class="nv">$target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>To create a new entity that can be assigned in an <code class="docutils literal"><span class="pre">Activity</span></code> association, let the entity class
use the <code class="docutils literal"><span class="pre">ExtendActivity</span></code> trait:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Model/ExtendEmail.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Model</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Oro\Bundle\ActivityBundle\Model\ActivityInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\ActivityBundle\Model\ExtendActivity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ExtendEmail</span> <span class="k">implements</span> <span class="nx">ActivityInterface</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">ExtendActivity</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * Constructor</span>
<span class="sd">     *</span>
<span class="sd">     * The real implementation of this method is auto generated.</span>
<span class="sd">     *</span>
<span class="sd">     * IMPORTANT: If the derived class has own constructor it must call parent constructor.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Acme/DemoBundle/Entity/Email.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityConfigBundle\Metadata\Annotation\Config</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Acme\DemoBundle\Model\ExtendEmail</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @ORM\Entity</span>
<span class="sd"> * @ORM\Table(name=&quot;acme_email&quot;)</span>
<span class="sd"> * @Config</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Email</span> <span class="k">extends</span> <span class="nx">ExtendEmail</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>You then have to use the entity configuration</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/Acme/DemoBundle/Resources/config/oro/entity_config.yml</span>
<span class="l l-Scalar l-Scalar-Plain">entity_config</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">activity</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">entity</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">items</span><span class="p p-Indicator">:</span>
                <span class="c1"># the list of activities that can be assigned to the entity</span>
                <span class="l l-Scalar l-Scalar-Plain">activities</span><span class="p p-Indicator">:</span> <span class="c1"># array of class names</span>
                    <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">require_schema_update</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
                        <span class="l l-Scalar l-Scalar-Plain">priority</span><span class="p p-Indicator">:</span>           <span class="l l-Scalar l-Scalar-Plain">250</span>
                    <span class="l l-Scalar l-Scalar-Plain">form</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span>               <span class="l l-Scalar l-Scalar-Plain">oro_entity_extend_multiple_association_choice</span>
                        <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
                            <span class="l l-Scalar l-Scalar-Plain">block</span><span class="p p-Indicator">:</span>          <span class="l l-Scalar l-Scalar-Plain">associations</span>
                            <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">false</span>
                            <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span>          <span class="l l-Scalar l-Scalar-Plain">oro.activity.activities</span>
                            <span class="l l-Scalar l-Scalar-Plain">association_class</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">activity</span>

                <span class="c1"># this attribute can be used to prohibit changing activity state (no matter whether</span>
                <span class="c1"># it is enabled or not) for the entity</span>
                <span class="c1"># if TRUE than no one activity state can be changed</span>
                <span class="c1"># also it can be an array with the list of class names of activities which state cannot be changed</span>
                <span class="l l-Scalar l-Scalar-Plain">immutable</span><span class="p p-Indicator">:</span> <span class="c1"># boolean or array</span>
                    <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
                        <span class="l l-Scalar l-Scalar-Plain">auditable</span><span class="p p-Indicator">:</span>          <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</td></tr></table></div>
<p>Finally, you have to create extensions for the entity config dumper, the entity generator and the
migrations to make the association available through all stages of the entity generation process:</p>
<ol class="arabic">
<li><p class="first">Hook into the entity config dumper:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Oro\Bundle\ActivityBundle\Tools</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Oro\Bundle\ActivityBundle\EntityConfig\ActivityScope</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Tools\DumperExtensions\MultipleAssociationEntityConfigDumperExtension</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ActivityEntityConfigDumperExtension</span> <span class="k">extends</span> <span class="nx">MultipleAssociationEntityConfigDumperExtension</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getAssociationScope</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;activity&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getAssociationAttributeName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;activities&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getAssociationKind</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ActivityScope</span><span class="o">::</span><span class="na">ASSOCIATION_KIND</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Extend the entity generator:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Oro\Bundle\ActivityBundle\Tools</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">CG\Generator\PhpClass</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\ActivityBundle\EntityConfig\ActivityScope</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityConfigBundle\Provider\ConfigProvider</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Extend\RelationType</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Tools\GeneratorExtensions\AbstractAssociationEntityGeneratorExtension</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ActivityEntityGeneratorExtension</span> <span class="k">extends</span> <span class="nx">AbstractAssociationEntityGeneratorExtension</span>
<span class="p">{</span>
    <span class="sd">/** @var ConfigProvider */</span>
    <span class="k">protected</span> <span class="nv">$groupingConfigProvider</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @param ConfigProvider $groupingConfigProvider</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">ConfigProvider</span> <span class="nv">$groupingConfigProvider</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">groupingConfigProvider</span> <span class="o">=</span> <span class="nv">$groupingConfigProvider</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">supports</span><span class="p">(</span><span class="k">array</span> <span class="nv">$schema</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">groupingConfigProvider</span><span class="o">-&gt;</span><span class="na">hasConfig</span><span class="p">(</span><span class="nv">$schema</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nv">$groups</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">groupingConfigProvider</span><span class="o">-&gt;</span><span class="na">getConfig</span><span class="p">(</span><span class="nv">$schema</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;groups&#39;</span><span class="p">);</span>

        <span class="k">return</span>
            <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$groups</span><span class="p">)</span>
            <span class="o">&amp;&amp;</span> <span class="nb">in_array</span><span class="p">(</span><span class="nx">ActivityScope</span><span class="o">::</span><span class="na">GROUP_ACTIVITY</span><span class="p">,</span> <span class="nv">$groups</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">generate</span><span class="p">(</span><span class="k">array</span> <span class="nv">$schema</span><span class="p">,</span> <span class="nx">PhpClass</span> <span class="nv">$class</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$class</span><span class="o">-&gt;</span><span class="na">addInterfaceName</span><span class="p">(</span><span class="s1">&#39;Oro\Bundle\ActivityBundle\Model\ActivityInterface&#39;</span><span class="p">);</span>

        <span class="k">parent</span><span class="o">::</span><span class="na">generate</span><span class="p">(</span><span class="nv">$schema</span><span class="p">,</span> <span class="nv">$class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getAssociationKind</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ActivityScope</span><span class="o">::</span><span class="na">ASSOCIATION_KIND</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getAssociationType</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">RelationType</span><span class="o">::</span><span class="na">MANY_TO_MANY</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Extend the migration behavior to add the association to target entities:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Oro\Bundle\ActivityBundle\Migration\Extension</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\DBAL\Schema\Schema</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Oro\Bundle\ActivityBundle\EntityConfig\ActivityScope</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Migration\Extension\ExtendExtension</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Migration\Extension\ExtendExtensionAwareInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Migration\OroOptions</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Bundle\EntityExtendBundle\Tools\ExtendHelper</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ActivityExtension</span> <span class="k">implements</span> <span class="nx">ExtendExtensionAwareInterface</span>
<span class="p">{</span>
    <span class="sd">/** @var ExtendExtension */</span>
    <span class="k">protected</span> <span class="nv">$extendExtension</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setExtendExtension</span><span class="p">(</span><span class="nx">ExtendExtension</span> <span class="nv">$extendExtension</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">extendExtension</span> <span class="o">=</span> <span class="nv">$extendExtension</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Adds the association between the given table and the table contains activity records</span>
<span class="sd">     *</span>
<span class="sd">     * The activity entity must be included in &#39;activity&#39; group (&#39;groups&#39; attribute of &#39;grouping&#39; scope)</span>
<span class="sd">     *</span>
<span class="sd">     * @param Schema $schema</span>
<span class="sd">     * @param string $activityTableName Activity entity table name. It is owning side of the association</span>
<span class="sd">     * @param string $targetTableName   Target entity table name</span>
<span class="sd">     * @param bool   $immutable         Set TRUE to prohibit disabling the activity association from UI</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">addActivityAssociation</span><span class="p">(</span>
        <span class="nx">Schema</span> <span class="nv">$schema</span><span class="p">,</span>
        <span class="nv">$activityTableName</span><span class="p">,</span>
        <span class="nv">$targetTableName</span><span class="p">,</span>
        <span class="nv">$immutable</span> <span class="o">=</span> <span class="k">false</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$targetTable</span> <span class="o">=</span> <span class="nv">$schema</span><span class="o">-&gt;</span><span class="na">getTable</span><span class="p">(</span><span class="nv">$targetTableName</span><span class="p">);</span>

        <span class="c1">// Column names are used to show a title of target entity</span>
        <span class="nv">$targetTitleColumnNames</span> <span class="o">=</span> <span class="nv">$targetTable</span><span class="o">-&gt;</span><span class="na">getPrimaryKeyColumns</span><span class="p">();</span>
        <span class="c1">// Column names are used to show detailed info about target entity</span>
        <span class="nv">$targetDetailedColumnNames</span> <span class="o">=</span> <span class="nv">$targetTable</span><span class="o">-&gt;</span><span class="na">getPrimaryKeyColumns</span><span class="p">();</span>
        <span class="c1">// Column names are used to show target entity in a grid</span>
        <span class="nv">$targetGridColumnNames</span> <span class="o">=</span> <span class="nv">$targetTable</span><span class="o">-&gt;</span><span class="na">getPrimaryKeyColumns</span><span class="p">();</span>

        <span class="nv">$activityClassName</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">extendExtension</span><span class="o">-&gt;</span><span class="na">getEntityClassByTableName</span><span class="p">(</span><span class="nv">$activityTableName</span><span class="p">);</span>

        <span class="nv">$options</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OroOptions</span><span class="p">();</span>
        <span class="nv">$options</span><span class="o">-&gt;</span><span class="na">append</span><span class="p">(</span>
            <span class="s1">&#39;activity&#39;</span><span class="p">,</span>
            <span class="s1">&#39;activities&#39;</span><span class="p">,</span>
            <span class="nv">$activityClassName</span>
        <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$immutable</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$options</span><span class="o">-&gt;</span><span class="na">append</span><span class="p">(</span>
                <span class="s1">&#39;activity&#39;</span><span class="p">,</span>
                <span class="s1">&#39;immutable&#39;</span><span class="p">,</span>
                <span class="nv">$activityClassName</span>
            <span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$targetTable</span><span class="o">-&gt;</span><span class="na">addOption</span><span class="p">(</span><span class="nx">OroOptions</span><span class="o">::</span><span class="na">KEY</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>

        <span class="nv">$associationName</span> <span class="o">=</span> <span class="nx">ExtendHelper</span><span class="o">::</span><span class="na">buildAssociationName</span><span class="p">(</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">extendExtension</span><span class="o">-&gt;</span><span class="na">getEntityClassByTableName</span><span class="p">(</span><span class="nv">$targetTableName</span><span class="p">),</span>
            <span class="nx">ActivityScope</span><span class="o">::</span><span class="na">ASSOCIATION_KIND</span>
        <span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">extendExtension</span><span class="o">-&gt;</span><span class="na">addManyToManyRelation</span><span class="p">(</span>
            <span class="nv">$schema</span><span class="p">,</span>
            <span class="nv">$activityTableName</span><span class="p">,</span>
            <span class="nv">$associationName</span><span class="p">,</span>
            <span class="nv">$targetTable</span><span class="p">,</span>
            <span class="nv">$targetTitleColumnNames</span><span class="p">,</span>
            <span class="nv">$targetDetailedColumnNames</span><span class="p">,</span>
            <span class="nv">$targetGridColumnNames</span><span class="p">,</span>
            <span class="p">[</span>
                <span class="s1">&#39;extend&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
                    <span class="s1">&#39;without_default&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
                <span class="p">]</span>
            <span class="p">]</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<ul>
<li><a class="reference internal" href="#">How to Use Entities</a><ul>
<li><a class="reference internal" href="#doctrine-entities">Doctrine Entities</a><ul>
<li><a class="reference internal" href="#defining-entities">Defining Entities</a></li>
<li><a class="reference internal" href="#updating-the-database-schema">Updating the Database Schema</a></li>
</ul>
</li>
<li><a class="reference internal" href="#entity-configuration">Entity Configuration</a><ul>
<li><a class="reference internal" href="#adding-configuration-options">Adding Configuration Options</a><ul>
<li><a class="reference internal" href="#indexed-attributes">Indexed Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configure-entities">Configure Entities</a><ul>
<li><a class="reference internal" href="#the-config-annotation">The <code class="docutils literal"><span class="pre">&#64;Config</span></code> Annotation</a></li>
<li><a class="reference internal" href="#the-configfield-annotation">The <code class="docutils literal"><span class="pre">&#64;ConfigField</span></code> Annotation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#accessing-the-entity-configuration">Accessing the Entity Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#managing-entity-relations">Managing Entity Relations</a><ul>
<li><a class="reference internal" href="#doctrine-relations">Doctrine Relations</a></li>
<li><a class="reference internal" href="#extending-entities">Extending Entities</a><ul>
<li><a class="reference internal" href="#creating-extended-entities">Creating Extended Entities</a><ul>
<li><a class="reference internal" href="#many-to-one-associations">Many-to-one Associations</a></li>
<li><a class="reference internal" href="#many-to-many-associations">Many-to-Many Associations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Developer Guide</a><ul>
  <li><a href="index.html">Using and Managing Entities</a><ul>
      <li>Previous: <a href="dashboards.html" title="previous chapter">How to Create a Dashboard Widget</a></li>
      <li>Next: <a href="../other/index.html" title="next chapter">How to... Articles</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
    <form class="search" action="../../search.html" method="get">
      <div><i class="fa fa-search search-complete__icon"></i>&nbsp;<input class="search_text" type="text" placeholder="Search in documentation " name="q" />
      <input class="submit" type="submit" value="Search" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Oro Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
    </div>

    

    
  </body>
</html>