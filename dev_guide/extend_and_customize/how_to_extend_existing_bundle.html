<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to Extend Existing Bundle &#8212; OroCommerce 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How to Add Entity Event Listeners" href="how_to_add_entity_event_listeners.html" />
    <link rel="prev" title="How to Create New Bundle" href="how_to_create_new_bundle.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-extend-existing-bundle">
<span id="index-0"></span><span id="id1"></span><h1>How to Extend Existing Bundle<a class="headerlink" href="#how-to-extend-existing-bundle" title="Permalink to this headline">¶</a></h1>
<p><em>Used application: OroPlatform 1.7</em></p>
<div class="section" id="bundle-extension">
<h2>Bundle Extension<a class="headerlink" href="#bundle-extension" title="Permalink to this headline">¶</a></h2>
<p>The OroPlatform application uses <a class="reference external" href="http://symfony.com/doc/2.3/cookbook/bundles/inheritance.html">default Symfony functionality to extend bundle</a> (in terms of Symfony it is called
inheritance). To do that you have to override method getParent in your bundle class.
Let&#8217;s assume that we are using demo bundle from <a class="reference external" href="./how-to-create-new-bundle">How to create new bundle</a>
article and we want to extend OroUserBundle - in this case <code class="docutils literal"><span class="pre">AcmeNewBundle.php</span></code> file should look like this:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Acme/Bundle/NewBundle/AcmeNewBundle.php</span>
<span class="k">namespace</span> <span class="nx">Acme\Bundle\NewBundle</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\HttpKernel\Bundle\Bundle</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">AcmeNewBundle</span> <span class="k">extends</span> <span class="nx">Bundle</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getParent</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;OroUserBundle&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Due to the Symfony default behaviour the routing from the parent bundle will not be imported automatically.
So in case if you have any controllers defined in your child bundle you should copy routing definitions from the
parent bundle.
You can check the <cite>Routing</cite> section of Symfony&#8217;s <a class="reference external" href="http://symfony.com/doc/current/cookbook/bundles/override.html#routing">How to Override any Part of a Bundle</a> manual for more information.</p>
</div>
<p>In our case will need to add the <code class="docutils literal"><span class="pre">routing.yml</span></code> file with the following content:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/Acme/Bundle/NewBundle/Resources/config/oro/routing.yml</span>
<span class="l l-Scalar l-Scalar-Plain">acme_parent_bundle</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span>     <span class="s">&quot;@!OroUserBundle/Controller&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span>         <span class="l l-Scalar l-Scalar-Plain">annotation</span>
    <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/user</span>
</pre></div>
</td></tr></table></div>
<p>The <code class="docutils literal"><span class="pre">&#64;!</span></code> notion is important since it states that the resource should be imported from the parent bundle.</p>
<p>Now let&#8217;s check that our extension works - to do that let&#8217;s create a custom template for the User information widget.
So, we need to create <code class="docutils literal"><span class="pre">/src/Acme/Bundle/NewBundle/Resources/views/User/widget/info.html.twig</span></code> file
(this file structure duplicates the file structure of the extended bundle) with our custom content:</p>
<div class="highlight-html+jinja"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;widget-content&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row-fluid form-horizontal&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;responsive-block&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>My user info widget<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Username:<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span> <span class="cp">{{</span> <span class="nv">entity.username</span> <span class="cp">}}</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>And now we can go to the user view page (e.g. http://&lt;oro_application_base_url&gt;/app_dev.php/#url=/app_dev.php/user/view/1) and find
that user info widget has changed:</p>
<img alt="../../_images/user_info_widget.png" src="../../_images/user_info_widget.png" />
<p>That&#8217;s all - now our demo bundle extends OroUserBundle and can override its parts.</p>
</div>
<div class="section" id="features-and-recommendations">
<h2>Features and Recommendations<a class="headerlink" href="#features-and-recommendations" title="Permalink to this headline">¶</a></h2>
<p>OroPlatform provides several ways of extending bundle resources, and each of them should be used in specific cases.
Extension is the most simple and useful way to do that for basic bundle resources and it can be used widely all over
the system. Other ways to extend specific resources (e.g. configuration files) will be described in further
articles.
Here are the basic parts that can be extended and the way to do that:</p>
<ul class="simple">
<li><strong>controller</strong> - using bundle extension (inheritance);</li>
<li><strong>templates</strong> - using bundle extension (inheritance);</li>
<li><strong>bundles</strong> - using file /Resources/config/oro/bundles.yml;</li>
<li><strong>routing</strong> - using file /Resources/config/oro/routing.yml;</li>
<li><strong>twig themes</strong> - using file /Resources/config/oro/twig.yml;</li>
<li><strong>localization</strong> - using files /Resources/config/oro/locale_data.yml, /Resources/config/oro/name_format.yml,
/Resources/config/oro/address_format.yml, /Resources/config/oro/currency_data.yml.</li>
</ul>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://symfony.com/doc/2.3/cookbook/bundles/inheritance.html">How to use Bundle Inheritance to Override parts of a Bundle</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../../index.html">Table Of Contents</a></h3>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/dev_guide/extend_and_customize/how_to_extend_existing_bundle.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Developer Guide</a><ul>
  <li><a href="index.html">Customizing Oro Features</a><ul>
      <li>Previous: <a href="how_to_create_new_bundle.html" title="previous chapter">How to Create New Bundle</a></li>
      <li>Next: <a href="how_to_add_entity_event_listeners.html" title="next chapter">How to Add Entity Event Listeners</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Oro Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../../_sources/dev_guide/extend_and_customize/how_to_extend_existing_bundle.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>