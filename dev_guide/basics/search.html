<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dealing with the Search Index &#8212; OroCommerce 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Customizing Oro Features" href="../extend_and_customize/index.html" />
    <link rel="prev" title="Frontend Architecture" href="frontend_architecture.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dealing-with-the-search-index">
<span id="index-0"></span><h1>Dealing with the Search Index<a class="headerlink" href="#dealing-with-the-search-index" title="Permalink to this headline">¶</a></h1>
<p>As a part of OroPlatform, the <a class="reference external" href="https://github.com/orocrm/platform/tree/master/src/Oro/Bundle/SearchBundle">SearchBundle</a> allows you to create an advanced
search index for mapped objects and to perform advanced queries on the indexed
data.</p>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="database-setup">
<h3>Database Setup<a class="headerlink" href="#database-setup" title="Permalink to this headline">¶</a></h3>
<p>Common database management systems like MySQL or Postgres offer additional
indexes for fulltext searches. To initialize the advanced database index,
run the <code class="docutils literal"><span class="pre">oro:search:reindex</span></code> command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ php ./app/console oro:search:reindex
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">By default, MySQL limits the fulltext index to words with a minimal length
of four characters. It is recommended to allow words with a length of
three characters to be included in the index. Decrease the value of the
<a class="reference external" href="http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_ft_min_word_len">ft_min_word_len</a> option to <code class="docutils literal"><span class="pre">3</span></code>. You can find more details in the
<a class="reference external" href="http://dev.mysql.com/doc/refman/5.6/en/fulltext-fine-tuning.html">MySQL fulltext search documentation</a>.</p>
</div>
</div>
<div class="section" id="configuration-options">
<span id="item-container-template-config-option"></span><h3>Configuration Options<a class="headerlink" href="#configuration-options" title="Permalink to this headline">¶</a></h3>
<p>The configuration of the SearchBundle is driven by three configuration options:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">engine</span></code></dt>
<dd>The indexing engine to be used. Currently, only the <code class="docutils literal"><span class="pre">orm</span></code> engine is
supported by the SearchBundle.</dd>
<dt><code class="docutils literal"><span class="pre">entities_config</span></code></dt>
<dd>Configuration of entity properties to be indexed (read
<a class="reference internal" href="#indexing-entities"><span class="std std-ref">the following section</span></a> for a detailed description
of the config format).</dd>
<dt><code class="docutils literal"><span class="pre">item_container_template</span></code></dt>
<dd>The default template used to display an item in the search results list
(<code class="docutils literal"><span class="pre">OroSearchBundle:Datagrid:itemContainer.html.twig</span></code> by default).</dd>
</dl>
</div>
</div>
<div class="section" id="indexing-entities">
<span id="id1"></span><h2>Indexing Entities<a class="headerlink" href="#indexing-entities" title="Permalink to this headline">¶</a></h2>
<p>Each time an entity is updated, the changed data needs to be persisted into
the search index. The mapping of your entity fields to the search index can
be configured either globally (under the <code class="docutils literal"><span class="pre">oro_search</span></code> key) or in a config
file named <code class="docutils literal"><span class="pre">search.yml</span></code> which must be located in the bundle&#8217;s <code class="docutils literal"><span class="pre">Resources/config/oro</span></code>
directory. Such a file would then look something like this:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">search</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">Acme\DemoBundle\Entity\Product</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">alias</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">demo_product</span>
        <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Demo products</span>
        <span class="l l-Scalar l-Scalar-Plain">route</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">acme_demo_search_product</span>
            <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">id</span>
        <span class="l l-Scalar l-Scalar-Plain">title_fields</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">]</span>
        <span class="l l-Scalar l-Scalar-Plain">fields</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span>
                <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name</span>
                <span class="l l-Scalar l-Scalar-Plain">target_type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">text</span>
            <span class="p p-Indicator">-</span>
                <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">description</span>
                <span class="l l-Scalar l-Scalar-Plain">target_type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">text</span>
                <span class="l l-Scalar l-Scalar-Plain">target_fields</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">description</span><span class="p p-Indicator">,</span> <span class="nv">another_index_name</span><span class="p p-Indicator">]</span>
            <span class="p p-Indicator">-</span>
                <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">manufacturer</span>
                <span class="l l-Scalar l-Scalar-Plain">relation_type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">many-to-one</span>
                <span class="l l-Scalar l-Scalar-Plain">relation_fields</span><span class="p p-Indicator">:</span>
                    <span class="p p-Indicator">-</span>
                        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name</span>
                        <span class="l l-Scalar l-Scalar-Plain">target_type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">text</span>
                        <span class="l l-Scalar l-Scalar-Plain">target_fields</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">manufacturer</span><span class="p p-Indicator">,</span> <span class="nv">all_data</span><span class="p p-Indicator">]</span>
                    <span class="p p-Indicator">-</span>
                        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">id</span>
                        <span class="l l-Scalar l-Scalar-Plain">target_type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">integer</span>
                        <span class="l l-Scalar l-Scalar-Plain">target_fields</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">manufacturer</span><span class="p p-Indicator">]</span>
            <span class="p p-Indicator">-</span>
                <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">categories</span>
                <span class="l l-Scalar l-Scalar-Plain">relation_type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">many-to-many</span>
                <span class="l l-Scalar l-Scalar-Plain">relation_fields</span><span class="p p-Indicator">:</span>
                    <span class="p p-Indicator">-</span>
                        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name</span>
                        <span class="l l-Scalar l-Scalar-Plain">target_type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">text</span>
                        <span class="l l-Scalar l-Scalar-Plain">target_fields</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">all_data</span><span class="p p-Indicator">]</span>
</pre></div>
</td></tr></table></div>
<p>You can use the following options to configure the entity&#8217;s search index
mapping:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">search_template</span></code></dt>
<dd>The template to use for the current entity when the search result page is
rendered. This is only necessary if the global template should not be used.
(see the <a class="reference internal" href="#item-container-template-config-option"><span class="std std-ref">available configuration options</span></a>).</dd>
<dt><code class="docutils literal"><span class="pre">label</span></code></dt>
<dd>A label that is displayed with each search result for the current entity
type</dd>
<dt><code class="docutils literal"><span class="pre">route</span></code></dt>
<dd><p class="first">The route used to display the detailed search result:</p>
<dl class="last docutils">
<dt><code class="docutils literal"><span class="pre">name</span></code></dt>
<dd>The route&#8217;s name</dd>
<dt><code class="docutils literal"><span class="pre">parameters</span></code></dt>
<dd>Optional route parameters</dd>
</dl>
</dd>
<dt><code class="docutils literal"><span class="pre">alias</span></code></dt>
<dd>Alias which can be used to reference the current entity in an
<a class="reference internal" href="#advanced-search-api"><span class="std std-ref">advanced search</span></a></dd>
<dt><code class="docutils literal"><span class="pre">fields</span></code></dt>
<dd><p class="first">Fields to include in the search index:</p>
<dl class="last docutils">
<dt><code class="docutils literal"><span class="pre">name</span></code></dt>
<dd>The field&#8217;s (property&#8217;s) name</dd>
<dt><code class="docutils literal"><span class="pre">target_type</span></code></dt>
<dd><dl class="first last docutils">
<dt>The virtual form type (supported values are <code class="docutils literal"><span class="pre">text</span></code>, <code class="docutils literal"><span class="pre">integer</span></code>,</dt>
<dd><code class="docutils literal"><span class="pre">double</span></code> and <code class="docutils literal"><span class="pre">datetime</span></code>)</dd>
</dl>
</dd>
<dt><code class="docutils literal"><span class="pre">target_fields</span></code></dt>
<dd>A list of virtual fields</dd>
<dt><code class="docutils literal"><span class="pre">relation_type</span></code></dt>
<dd><dl class="first last docutils">
<dt>Indicates a relation to another entity (one of <code class="docutils literal"><span class="pre">one-to-one</span></code>, <code class="docutils literal"><span class="pre">many-to-many</span></code>,</dt>
<dd><code class="docutils literal"><span class="pre">one-to-many</span></code>, <code class="docutils literal"><span class="pre">many-to-one</span></code>)</dd>
</dl>
</dd>
<dt><code class="docutils literal"><span class="pre">relation_fields</span></code></dt>
<dd><dl class="first last docutils">
<dt>List of fields of the related entity that should be included in the</dt>
<dd>search index.</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="searching">
<h2>Searching<a class="headerlink" href="#searching" title="Permalink to this headline">¶</a></h2>
<p>You can search in the index in two different ways:</p>
<ol class="arabic simple">
<li>Run queries locally using the Query Builder;</li>
<li>Send simple or advanced REST or SOAP requests to the search API.</li>
</ol>
<div class="section" id="the-query-builder">
<h3>The Query Builder<a class="headerlink" href="#the-query-builder" title="Permalink to this headline">¶</a></h3>
<p>The syntax of the search query builder is very similar to the Doctrine query
builder:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$container</span> <span class="o">=</span> <span class="o">...</span><span class="p">;</span> <span class="c1">// the Symfony service container</span>
<span class="nv">$indexer</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;oro_search.index&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$indexer</span>
    <span class="o">-&gt;</span><span class="na">select</span><span class="p">([</span><span class="s1">&#39;text.name&#39;</span><span class="p">,</span> <span class="s1">&#39;text.description&#39;</span><span class="p">,</span> <span class="s1">&#39;integer.sku&#39;</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;oro_search_product&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">andWhere</span><span class="p">(</span><span class="s1">&#39;all_data&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="s1">&#39;Functions&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">orWhere</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="s1">&#39;decimal&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>The query builder offers several methods to modify the generated search:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">select</span></code></dt>
<dd>Specify the values to retrieve from search indexes. Expects for a string
or array of field names, with type prefix. If the type prefix is not provided,
default type of <code class="docutils literal"><span class="pre">text</span></code> will be used.</dd>
<dt><code class="docutils literal"><span class="pre">from</span></code></dt>
<dd>One entity or an array of entity aliases to search in (the special <code class="docutils literal"><span class="pre">*</span></code> can
be used to search in all entities).</dd>
<dt><code class="docutils literal"><span class="pre">andWhere</span></code>, <code class="docutils literal"><span class="pre">orWhere</span></code></dt>
<dd><p class="first">Add <code class="docutils literal"><span class="pre">and</span></code> or <code class="docutils literal"><span class="pre">or</span></code> where clauses to the search query. Expects four
arguments:</p>
<ul class="last simple">
<li>The field to check</li>
<li>The comparison operator (<code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">&gt;</span></code>, <code class="docutils literal"><span class="pre">=</span></code>, <code class="docutils literal"><span class="pre">!=</span></code>, etc.)</li>
<li>The value to search for</li>
<li>The field type</li>
</ul>
</dd>
<dt><code class="docutils literal"><span class="pre">addSelect</span></code></dt>
<dd>Add another field name to gather the data for from the search indexes.
If no type prefix is specified, the default <code class="docutils literal"><span class="pre">text</span></code> type will be used.</dd>
<dt><code class="docutils literal"><span class="pre">setOrderBy</span></code></dt>
<dd>Field and direction to order the search result by. By default, search
results are sorted by relevance.</dd>
<dt><code class="docutils literal"><span class="pre">setFirstResult</span></code></dt>
<dd>Changes the search result offset (useful for pagination).</dd>
<dt><code class="docutils literal"><span class="pre">setMaxResults</span></code></dt>
<dd>The maximum number of search results returned.</dd>
</dl>
<p>The result of such a query is a <a class="reference external" href="https://github.com/orocrm/platform/blob/master/src/Oro/Bundle/SearchBundle/Query/Result.php">Result object</a>. It contains the original
search request, the search results and the number of records returned.</p>
</div>
<div class="section" id="the-search-api">
<h3>The Search API<a class="headerlink" href="#the-search-api" title="Permalink to this headline">¶</a></h3>
<p>You can query the search index remotely in two different ways: send simple
queries which query all fields of all entities, or use a powerful query language
to describe more precise search queries.</p>
<p>Both APIs return a data object with three attributes:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">records_count</span></code></dt>
<dd>The total number of results (<code class="docutils literal"><span class="pre">max_results</span></code> and <code class="docutils literal"><span class="pre">offset</span></code> are not being
taken into account)</dd>
<dt><code class="docutils literal"><span class="pre">count</span></code></dt>
<dd>Number of returned search results (less than or equal to <code class="docutils literal"><span class="pre">max_results</span></code>)</dd>
<dt><code class="docutils literal"><span class="pre">data</span></code></dt>
<dd><p class="first">An array of search results. Each result is an object containing the following
data:</p>
<dl class="last docutils">
<dt><code class="docutils literal"><span class="pre">entity_name</span></code></dt>
<dd>The result&#8217;s entity class name</dd>
<dt><code class="docutils literal"><span class="pre">record_id</span></code></dt>
<dd>The record&#8217;s id</dd>
<dt><code class="docutils literal"><span class="pre">record_string</span></code></dt>
<dd>The record&#8217;s title</dd>
</dl>
</dd>
</dl>
<div class="section" id="the-simple-search-api">
<h4>The simple Search API<a class="headerlink" href="#the-simple-search-api" title="Permalink to this headline">¶</a></h4>
<p>The simple search API can be used to remotely search in all text fields of
all entities. It&#8217;s driven by three parameters describing a query:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">search</span></code></dt>
<dd>The string to search for</dd>
<dt><code class="docutils literal"><span class="pre">offset</span></code></dt>
<dd>The result offset</dd>
<dt><code class="docutils literal"><span class="pre">max_results</span></code></dt>
<dd>The maximum number of search results being returned</dd>
</dl>
<p>The endpoint of the simple REST search API is described by the <code class="docutils literal"><span class="pre">oro_api_get_search</span></code>
route. Its path defaults to <code class="docutils literal"><span class="pre">/api/rest/{version}/search.{_format}</span></code>. Valid
formats are <code class="docutils literal"><span class="pre">json``and</span> <span class="pre">``html</span></code> with <code class="docutils literal"><span class="pre">json</span></code> being the default format and <code class="docutils literal"><span class="pre">latest</span></code>
being the default version. The SOAP function name is <code class="docutils literal"><span class="pre">search</span></code>.</p>
</div>
<div class="section" id="the-advanced-search-api">
<span id="advanced-search-api"></span><h4>The advanced Search API<a class="headerlink" href="#the-advanced-search-api" title="Permalink to this headline">¶</a></h4>
<p>Instead of searching in all fields of all entities, you can use the advanced
search API to create your own remote search queries. Each query is passed
as the <code class="docutils literal"><span class="pre">query</span></code> parameter. It takes the following form:
<code class="docutils literal"><span class="pre">[from</span> <span class="pre">&lt;entity&gt;]</span> <span class="pre">[conditions]</span> <span class="pre">[order_by</span> <span class="pre">field_type</span> <span class="pre">field_name</span> <span class="pre">direction]</span> <span class="pre">[offset</span> <span class="pre">&lt;offset&gt;</span> <span class="pre">max_results</span> <span class="pre">&lt;max_results&gt;]</span></code>:</p>
<ul>
<li><p class="first">You can query one ore more entities at the same time:</p>
<blockquote>
<div><div class="highlight-text"><div class="highlight"><pre><span></span>from one_alias
from (first_alias, second_alias)
</pre></div>
</div>
</div></blockquote>
<p>If you omit this part, all entities will be searched.</p>
</li>
<li><p class="first">A condition is of the form <code class="docutils literal"><span class="pre">field_type</span> <span class="pre">field_name</span> <span class="pre">operator</span> <span class="pre">value</span></code>.
Several conditions can be separated using the <code class="docutils literal"><span class="pre">and</span></code> or the <code class="docutils literal"><span class="pre">or</span></code> keyword.</p>
<p>The field type has to be one of <code class="docutils literal"><span class="pre">text</span></code>, <code class="docutils literal"><span class="pre">integer</span></code>, <code class="docutils literal"><span class="pre">decimal</span></code>, <code class="docutils literal"><span class="pre">datetime</span></code>.</p>
<p>Valid operators are:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">~</span></code>: contains (this operator can only be used on string types)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">!~</span></code>: does not contain (this operator can only be used on string types)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">=</span></code>: equals (this operator cannot be used on string types)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">!=</span></code>: not equals (this operator cannot be used on string types)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">&gt;</span></code>: greater than (this operator cannot be used on string types)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">&lt;</span></code>: less than (this operator cannot be used on string types)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">&lt;=</span></code>: less than or equals (this operator cannot be used on string types)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">&gt;=</span></code>: greater than or equals (this operator cannot be used on string
types)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">in</span></code>: to filter for records where a field is in a given set of data
(this operator cannot be used on string types):</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>integer count in (5, 10, 15, 20)
decimal price in (12.2, 55.25)
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">!in</span></code>: to filter for records where a field is not in a given set of
data (this operator cannot be used on string types):</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>integer count !in (1, 3, 5)
decimal price !in (2.1, 55, 45.4)
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
<p><strong>Examples</strong></p>
<ul>
<li><p class="first">Search for products where the name contains the string <em>samsung</em> and where
the price is greater than 100:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>from demo_product where name ~ samsung and double price &gt; 100
</pre></div>
</div>
</li>
<li><p class="first">Search for products where the current count is not equal to 10:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>from demo_product where integer count != 10
</pre></div>
</div>
</li>
<li><p class="first">Search all entities where the name doesn&#8217;t contain the string <em>test string</em>:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>where name !~ &quot;test string&quot;
</pre></div>
</div>
</li>
<li><p class="first">Select 10 records from products and categories where the description contains
the string <em>test</em> starting with record 5 and order it by their name attribute:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>from (demo_products, demo_categories) where description ~ test order_by name offset 5 max_results 10
</pre></div>
</div>
</li>
</ul>
<p>The endpoint of the advanced REST search API is described by the <code class="docutils literal"><span class="pre">oro_api_get_search_advanced</span></code>
route. Its path defaults to <code class="docutils literal"><span class="pre">/api/rest/{version}/search/advanced.{_format}</span></code>. Valid
formats are <code class="docutils literal"><span class="pre">json``and</span> <span class="pre">``html</span></code> with <code class="docutils literal"><span class="pre">json</span></code> being the default format and <code class="docutils literal"><span class="pre">latest</span></code>
being the default version. The SOAP function name is <code class="docutils literal"><span class="pre">advancedSearch</span></code>.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../../index.html">Table Of Contents</a></h3>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/dev_guide/basics/search.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Developer Guide</a><ul>
  <li><a href="index.html">OroPlatform Architecture</a><ul>
      <li>Previous: <a href="frontend_architecture.html" title="previous chapter">Frontend Architecture</a></li>
      <li>Next: <a href="../extend_and_customize/index.html" title="next chapter">Customizing Oro Features</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Oro Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../../_sources/dev_guide/basics/search.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>