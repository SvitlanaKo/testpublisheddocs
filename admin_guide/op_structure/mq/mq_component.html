<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Message Queue Component in Oro Application &#8212; OroCommerce 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="DBAL Transport Options and Limitations" href="dbal.html" />
    <link rel="prev" title="Message Queue Jobs and Transport Configuration" href="mq_bundle.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
<div class="header">
    <div class="main-nav">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div id="nav-menu" class="navbar-top">
                <div class="nav-container">
                    <div class="navbar-header">
                        <a href="https://www.orocommerce.com/"
                           class="navbar-brand"><img
                                src="https://www.orocommerce.com/wp-content/themes/commerce/images/orocommerce_logo.svg"
                                alt="Open Source B2B eCommerce Platform - OroCommerce"></a>
                    </div>
                    <div class="navbar-header">
                        <p class="navbar-header" href="#">Documentation for... </p>
                    </div>
                    <div id="navbar" class="navbar-left">
                        <div class="navbar-collapse collapse">
                            <div class="menu-header-menu-container">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../install_upgrade/index.html">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../install_upgrade/installation_prerequisites/index.html">Prepare Installation Environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_prerequisites/web_server_configuration.html">Install and Configure a Web Application Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_prerequisites/runtime_configuration.html">PHP Runtime Environment Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_prerequisites/optimize_performance.html">Performance Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_prerequisites/scalability.html">Scalability Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_prerequisites/create_database.html">Create the Database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../install_upgrade/get_files/index.html">Download Files and Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/get_files/get_source_files/index.html">Get the Source Code and Install Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/get_files/download_packages_and_configure_install.html">Download External Packages and Configure Installation Environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../install_upgrade/installation/index.html">Run Installation via Wizard or CLI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation/installation_steps.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../install_upgrade/post_install_steps.html">Perform Post-Install Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../install_upgrade/vm.html">Evaluate Oro App in a Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../install_upgrade/upgrade/index.html">Upgrade OroCommerce to the Newer Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../install_upgrade/upgrade/index.html#upgrade-orocommerce">Upgrade OroCommerce</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../install_upgrade/update.html">Update OroPlatform to Oro App</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../install_upgrade/installation_quick_start_dev/index.html">Installation Quick Start for Developers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_quick_start_dev/commerce-crm-ee.html">Quick Start Installation: OroCommerce and OroCRM Enterprise Edition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_quick_start_dev/commerce-crm-ee-de.html">Quick Start Installation: OroCommerce and OroCRM Enterprise Edition for Germany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_quick_start_dev/commerce-ee.html">Quick Start Installation: OroCommerce Enterprise Edition (without OroCRM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_quick_start_dev/commerce-crm.html">Quick Start Installation: OroCommerce and OroCRM Community Edition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_quick_start_dev/commerce-crm-de.html">Quick Start Installation: OroCommerce and OroCRM Community Edition for Germany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install_upgrade/installation_quick_start_dev/platform.html">Quick Start Installation: OroPlatform</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/index.html">Use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/getting_started/index.html">Getting Started with UI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_user_profile.html">View and Set up Your User Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_company_structure_org_selector.html">Company Structure and Organization Selector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_navigation.html">Navigation Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_filters.html">Data Filters For Reports, Segments, and Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_nav_shortcuts.html">Shortcuts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_nav_search.html">Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_nav_pinned_pages.html">Pinbar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_nav_user_menu.html">User Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_nav_history_fav_viewed.html">History, Favorites and Most Viewed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_nav_sidebar.html">Sidebar Panel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/intro_nav_popup.html">Flash Notifications and Dialog Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/widgets_recent_calls.html">Recent Calls Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/widgets_today_calendar.html">Today&#8217;s Calendar Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/widgets_recent_emails.html">Recent Emails Dashboard Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/widgets_sidebar_tasks.html">Task List Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/common_actions/manage_address_book.html">Managing Address Book</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/common_actions/manage_translation.html">Managing Translations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/access_oro/index.html">Access Oro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/my_oro/index.html">My Oro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/activities/index.html">Activities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/mass_actions_management_console.html">Mass Actions in Management Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/records/index.html">Information Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/getting_started/import_export/index.html">Export and Import</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/products/index.html">Products</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/configure_product_details.html">Configure Product Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/configure_product_details.html#product-information-structure">Product Information Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/configure_product_details.html#product-price-attributes">Product Price Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/product_brands.html">Use Product Brands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/product_brands.html#make-a-brand-filterable">Make a Brand Filterable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/products/page_templates.html">Manage Product Page Design with Page Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/products/featured.html">Manage Featured Products</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/products/new_arrivals.html">Highlight New Products</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/products/new_arrivals.html#set-up-a-new-arrival-icon">Set Up a New Arrival Icon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/products/new_arrivals.html#set-up-new-arrivals">Set Up New Arrivals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/products/actions_main/index.html">Manage Products: General Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/products/products/actions_details/index.html">Manage Product Characteristics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/master_catalog/index.html">Master Catalog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/master_catalog/category_creation.html">Create a Master Catalog Category</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/master_catalog/subcategory_creation.html">Create a Master Catalog Subcategory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/inventory/index.html">Warehouses and Inventory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/inventory/warehouses/index.html">Warehouses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/pricing/index.html">Pricing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/pricing/pricelist/index.html">Create a Price List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/pricing/pricelist/index.html#schedule-price-adjustments">Schedule Price Adjustments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/pricing/pricelist/index.html#import-and-export-prices">Import and Export Prices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/pricing/pricelist/index.html#manage-product-price-manually">Manage Product Price Manually</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/pricing/pricelist/index.html#generate-product-price-automatically">Generate Product Price Automatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/pricing/pricelist/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/pricing/pricelist/index.html#enable-multiple-currencies-for-the-price-list">Enable Multiple Currencies for the Price List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/pricing/pricelist/index.html#add-price-in-specific-currency-to-the-price-list">Add Price in Specific Currency to the Price List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/pricing/pricelist/index.html#view-price-in-specific-currency-on-the-front-store">View Price in Specific Currency on the Front Store</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/customers/index.html">Customers and Customer Users</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/customers/customer_groups/index.html">Customer Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/customers/customer_user_roles/index.html">Customer User Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/customers/customer_users/index.html">Customer Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/customers/customers/index.html">Customers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/customers/delegate.html">Delegate Account Management to a Customer User</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/quotes/index.html">Quotes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/quotes/create/index.html">Create a Quote</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/quotes/edit.html">Edit a Quote</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/quotes/delete.html">Delete a Quote</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/quotes/quote_states_by_flow/index.html">Next Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/quotes/flows/index.html">Quotes in Use: Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/rfq/index.html">Request for Quote (RFQ)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/rfq/rfq_details.html">View a Request for Quote Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/rfq/rfq_steps_and_transitions.html">Use RFQ Transitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/rfq/rfq_summary.html">View Requests for Quote Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/shopping_lists/index.html">Shopping Lists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/shopping_lists/view.html">View Shopping List Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/shopping_lists/view.html#view-shopping-list-details">View Shopping List Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/shopping_lists/view.html#manage-shopping-list">Manage Shopping List</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/orders/index.html">Orders</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/create_new.html">Create an Order from Scratch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/create_from_rfq.html">Create an Order from an RFQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/create_from_shopping_list.html">Create an Order from a Shopping List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/view.html">View Order Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/viewlist.html">View Order List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/edit.html">Edit an Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/delete.html">Delete an Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/mark_as_shipped.html">Mark an Order as Shipped</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/cancel.html">Cancel an Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/close.html">Close an Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/archive.html">Archive an Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/orders/statuses.html">Order Internal Statuses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/payment/index.html">Payment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/payment/payment_providers_overview/index.html">Payment Methods and Providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/payment/prerequisites/index.html">Payment Integration Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/payment/checkout/index.html">Checkout: Payment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/shipping/index.html">Shipping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/shipping/shipping_overview.html">Shipping Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/shipping/configuration/index.html">Shipping Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/shipping/shipping_attributes.html">Product Shipping Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/shipping/shipping_options_in_quotes.html">Shipping Configuration per Quote</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/shipping/shipping_tracking.html">Shipping Tracking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/marketing_web_catalog/index.html">Web Catalogs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_web_catalog/create.html">Create a Web Catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_web_catalog/edit_content_tree/index.html">Edit Web Catalog Content Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_web_catalog/web_catalog_usecase.html">Enable a Web Catalog Globally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_web_catalog/web_catalog_usecase.html#enable-a-web-catalog-for-a-website">Enable a Web Catalog for a Website</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_web_catalog/web_catalog_usecase.html#customize-web-catalog-contents-for-localization-customer-or-customer-group">Customize Web Catalog Contents for Localization, Customer or Customer Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_web_catalog/web_catalog_usecase.html#build-a-custom-web-catalog-from-scratch-sample">Build a Custom Web Catalog From Scratch (Sample)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/marketing_landing_pages/index.html">Landing Pages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_landing_pages/viewlist.html">View and Filter Landing Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_landing_pages/create.html">Create a Landing Page</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_landing_pages/view.html">View Landing Page Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_landing_pages/edit.html">Edit a Landing Page</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/marketing/index.html">Marketing Automation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing/marketing_lists.html">Marketing Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing/email_campaigns.html">Email Campaigns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing/marketing_campaigns.html">Marketing Campaigns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing/marketing_tracking_website_records.html">Tracking Websites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing/sending_email_campaign_via_dotmailer.html">Send Email Campaign via dotmailer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing/dotmailer_data_fields_mappings.html">Manage dotmailer Data Fields and Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing/sending_email_campaign_via_mailchimp.html">Send Email Campaign via MailChimp</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/marketing_promotions/index.html">Promotions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_promotions/expressions.html">Expression Language for Promotions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_promotions/create.html">Create Promotions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_promotions/viewlist.html">View Promotions in Management Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_promotions/promotions_in_order/index.html">Manage Discounts in Orders</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/marketing_coupons/index.html">Coupons</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_coupons/begin.html">Before You Begin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_coupons/create.html">Create Coupons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_coupons/generate.html">Generate Coupons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_coupons/viewlist.html">Manage a Coupons List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_coupons/edit_in_order/index.html">Manage Coupons in Orders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/marketing_coupons/sample_coupon.html">Sample Coupon Generation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/marketing_content_blocks/index.html">Content Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/taxes/index.html">Taxes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/taxes/customer_tax_codes/index.html">Customer Tax Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/taxes/product_tax_codes/index.html">Product Tax Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/taxes/tax_jurisdictions/index.html">Tax Jurisdictions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/taxes/tax_rules/index.html">Tax Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/taxes/taxes/index.html">Taxes (Tax Rates)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/taxes/link_a_tax_code_to_a_customer.html">Link a Tax Code to a Customer or Customer Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/taxes/link_a_tax_code_to_a_product.html">Link a Tax Code to a Product</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/business_intelligence/index.html">Business Intelligence</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/business_intelligence/business_intelligence_dashboards_widgets/index.html">Dashboards and Widgets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/business_intelligence/business_intelligence_segments.html">Segments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/business_intelligence/business_intelligence_filters.html">Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/business_intelligence/reports/index.html">Reports</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../seo_config_guide/index.html">SEO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../seo_config_guide/website/index.html">Website Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../frontstore_guide/index.html">Buyer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../frontstore_guide/getting_started/index.html">Register and Sign In</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../frontstore_guide/getting_started/create_account.html">Create Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontstore_guide/getting_started/sign_in.html">Sign In</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontstore_guide/getting_started/forgot_password.html">Forgot Password</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../frontstore_guide/navigation/index.html">Getting Started with Navigation and UI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../frontstore_guide/navigation/mass_actions_front_store.html">Mass Delete in Tables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../frontstore_guide/profile/index.html">My Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../frontstore_guide/address_book/index.html">Address Book</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../frontstore_guide/users_roles/index.html">My Organization Users and Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../frontstore_guide/orders/index.html">Orders</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../frontstore_guide/orders/sample_guest_checkout.html">Sample Guest Checkout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontstore_guide/orders/re-order.html">Re-Order Option</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../frontstore_guide/previously_purchased/index.html">Previously Purchased Products</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../frontstore_guide/rfq/index.html">Request for Quote</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../frontstore_guide/quotes/index.html">Quotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../frontstore_guide/shopping_lists/index.html">Shopping Lists</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_guide/index.html">Developer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../dev_guide/basics/index.html">OroPlatform Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/basics/frontend_architecture.html">Frontend Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/basics/search.html">Dealing with the Search Index</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev_guide/extend_and_customize/index.html">Customizing Oro Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/adding_properties.html">Add Properties to Core Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/customizing_crud.html">Customizing CRUD Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/customizing_import_export.html">Extending Entities to Support Bulk Import and Export</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/how_to_add_an_extension_to_oro_marketplace.html">How to Add an Extension to the OroCRM Marketplace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/customizing_data_grid_in_orocommerce.html">Customizing Data Grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/using_php_instead_of_twig_for_templates.html">Using PHP Instead of Twig for Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/how_to_create_new_bundle.html">How to Create New Bundle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/how_to_extend_existing_bundle.html">How to Extend Existing Bundle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/how_to_add_entity_event_listeners.html">How to Add Entity Event Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/how_to_create_and_customize_application_menu.html">How to Create and Customize Application Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/user_custom_validation_constraints.html">How to Add Custom User Validation Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/how_to_create_global_js_component.html">How to Create a Global JavaScript Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/how_to_replace_inline-javascript_with_component.html">How to Replace Inline-Javascript with a Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/payment_method_add.html">Add a New Payment Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/shipping_method_add.html">Add a New Shipping Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/integration.html">How to Create an Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/extend_and_customize/installer_generate.html">How to Generate an Installer for a Bundle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev_guide/web_api/index.html">Web Services API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/web_api/api_docs/index.html">API Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev_guide/theme/index.html">Customizing the Theme</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/theme/layout.html">Customizing the Application Layout</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev_guide/install_upgrade_and_patch/index.html">Extension and Patch Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/install_upgrade_and_patch/how_to_install_extension_from_command_line.html">How to Manage OroPlatform Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/install_upgrade_and_patch/how_to_upgrade_to_new_version.html">How to Upgrade to a New Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/install_upgrade_and_patch/how_to_apply_patch.html">How to Apply Patch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/install_upgrade_and_patch/how_to_co-install_applications.html">How to Co-install OroCommerce and OroCRM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev_guide/reference/index.html">Annotation and Configuration Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/reference/annotation/index.html">Annotation Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/reference/format/index.html">Configuration Format Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev_guide/entities/index.html">Using and Managing Entities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/introduction.html">How to Work with Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/creating_entities.html">How to Create Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/data_fixtures.html">How to Load Data Fixtures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/datagrids.html">How to Create a Basic Datagrid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/managing_tasks.html">How to Create and Modify Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/deleting_tasks.html">How to Delete Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/adding_properties.html">Add Properties to Core Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/acls.html">How to Protect Entities Using ACLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/import_export.html">How to Import and Export Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/report.html">How to Create a Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/dashboards.html">How to Create a Dashboard Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/entities/using_entities.html">How to Use Entities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev_guide/other/index.html">How to... Articles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/other/how_to_accelerate_import.html">How to Accelerate Import</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/other/how_to_enable_https.html">How to enable https</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/other/how_to_pass_request_parameter_to_grid.html">How to pass request parameter to the grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/other/how_to_use_wsse_authentication.html">How to use WSSE authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dev_guide/other/how_to_clone_workflow.html">How to Clone a System Workflow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Admin</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Operational Structure</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../elastic_search.html">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../db_search/index.html">Manage Search in Oro Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cache.html">Cache in Oro Application</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Message Queue</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../optimize_server_compression_and_caching.html">Web Server Performance Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../price_list_sharding.html">How to Configure Price List Sharding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../optimize_index_and_price_calculation.html">Optimize Website Indexation and Price Recalculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../package_manager.html">Extensions and Package Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../processes.html">Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jobs.html">Job Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cron.html">Scheduled Tasks via Cron</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../monitoring/index.html">Healthcheck and Data Monitoring</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../configuration_guide/index.html">Config</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/landing_system_configuration/index.html">System Configuration Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_system_configuration/general_setup_sysconfig/index.html">General Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_system_configuration/integrations/index.html">Integrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_system_configuration/websites/index.html">Websites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_system_configuration/config_levels.html">Configuration Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_system_configuration/config_levels.html#configuration-level-graphics">Configuration Level Graphics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_system_configuration/quick_search.html">Quick Search Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/landing_commerce/index.html">Commerce Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/catalog/index.html">Catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/customer/index.html">Customer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/design/index.html">Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/guests/index.html">Guests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/inventory/index.html">Inventory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/orders/index.html">Orders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/payment/index.html">Payment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/product/index.html">Product</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/sales/index.html">Sales</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/shipping/index.html">Shipping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_commerce/taxation/index.html">Taxation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/landing_crm/index.html">CRM Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_crm/sales_pipeline/index.html">Sales Pipeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/landing_marketing/index.html">Marketing Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_marketing/general_setup_marketing/index.html">General Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_marketing/marketing_features.html">Marketing Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/landing_marketing/tracking_settings.html">Tracking Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/localization/index.html">System Localization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/localization/languages.html">Languages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/localization/localizations.html">Localizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/localization/localization.html">Global Localization Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/localization/localization.html#related-articles">Related Articles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/localization/website_localization.html">Website Localization Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/localization/language_settings.html">Language Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/localization/language_settings.html#related-articles">Related Articles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/localization/translations.html">Translations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/pricing/index.html">Pricing Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/pricing/common_price_list_configuration_options.html">Price List Configuration Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/pricing/customer_group_price_lists.html">Price List Configuration per Customer Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/pricing/customer_price_lists.html">Price List Configuration Per Customer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/pricing/global_currency.html">Global Currency Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/pricing/global_pricing.html">Global Pricing Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/pricing/price_list_configuration_overview.html">Understanding Price List Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/pricing/website_price_lists.html">Price List Configuration per Website</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/pricing/website_pricing.html">Currency Configuration Per Website</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/email/index.html">Email Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/email/email_configuration.html">Email Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/email/email_templates.html">Email Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/email/notification_rules.html">Automatic Notification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/email/system_mailboxes.html">System Mailboxes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/email/system_mailbox_settings.html">System Mailbox Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/email/email_configuration_settings.html">Email Configuration Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/integrations/index.html">Integrations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/google_integration_settings.html">Google Integration Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/google_single_sign_on.html">Google Single Sign-On</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/ldap_integration.html">LDAP Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/mailchimp_configuration.html">Configure MailChimp Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/dotmailer_integration.html">dotmailer Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/dotmailer_integration_settings.html">dotmailer Synchronization Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/dotmailer_configuration.html">Configure dotmailer Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/dotmailer_single_sign_on.html">Configure Single Sign-on</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/ms_exchange_integration_settings.html">MS Exchange Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/ms_exchange_integration.html">Integration with Microsoft Exchange Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/ms_outlook_integration_settings.html">MS Outlook Integration Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/outlook_sync.html">Synchronization with Outlook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/embedded_forms.html">Embedded Forms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/hangouts.html">Voice and Video Calls via Hangouts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/zendesk_integration.html">Integration with Zendesk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/integrations/commerce_integration.html">CRM and Commerce Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/payment/index.html">Payment Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/payment/payment_configuration.html">System Configuration: Merchant Location</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/payment/payment_method_integrations.html">Payment Method Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/payment/payment_rules.html">Payment Rules Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/menu/index.html">Menus Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/menu/menu_config.html">Customizing a Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/menu/menu_config_levels.html">Menu Configuration Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/menu/menu_frontend.html">Edit a Frontend Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/menu/service_page.html">Used Images</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/workflows/index.html">Workflow Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/workflows/quote_management_workflow.html">Quote Management Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/workflows/backoffice_quote_flow_with_approvals.html">Backoffice Quote Flow with Approvals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/workflows/rfq_backoffice.html">RFQ Management Flow Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/workflows/rfq_frontoffice.html">RFQ Submission Flow Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/workflows/checkout.html">Checkout Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/workflows/alternative_checkout.html">Alternative Checkout Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/workflows/single_page_checkout_workflow.html">Single Page Checkout Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/workflows/task_flow.html">Task Flow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/tags_management/index.html">Tags and Taxonomies Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/tags_management/tags.html">Tags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/tags_management/taxonomies.html">Taxonomies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration_guide/websites/index.html">Website Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/websites/create.html">Create a Website</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/websites/config.html">Configure a Website</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/websites/default_website.html">Set a Website as Default</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration_guide/websites/edit_frontend_menu.html">Edit Front Store Menu</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../community/index.html">Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../community/contribute/index.html">Contribute</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../community/contribute/code_style.html">Code Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../community/contribute/code_version_control.html">Code Version Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../community/contribute/code_dev_env.html">Set Up a Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../community/contribute/code_ui_translations.html">Contribute to Translations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../community/contribute/documentation.html">Contribute to Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../community/issues/index.html">Report Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../community/issues/issue.html">Report an Issue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../community/issues/security.html">Report a Security Issue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../community/issues/translation.html">Report a Translation Issue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../community/issues/documentation.html">Report a Documentation Issue</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../community/release_process.html">Understand Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../community/contact_community.html">Contact Community</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../system_requirements.html">SysReqs</a></li>
</ul>

                                <!--
                                <ul class="nav">
                                    <li><a href="#">Installation</a></li>
                                    <li><a href="#">Configuration</a></li>
                                    <li><a href="#">Use <i class="fa fa-search search-complete__icon"></i></a>
                                        <ul class="sub-nav">
                                            <li class="sub-menu" ><a href="#">HTML</a>
                                            </li>
                                            <li class="sub-menu" ><a
                                                   href="#">CSS</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Resets</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Grids</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Frameworks</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li><a class="sub-menu" href="#">Development</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Ajax</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">jQuery</a>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                    <li><a href="#">Contribution</a>
                                        <ul class="sub-nav">
                                            <li class="sub-menu"><a href="#">Themes</a>
                                            </li>
                                            <li class="sub-menu"><a href="#">Plugins</a>
                                            </li>
                                            <li class="sub-menu"><a href="#">Custom
                                                Post Types</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Portfolios</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Testimonials</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="sub-menu"><a href="#">Options</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                                -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </nav>
    </div>
</div>


      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="message-queue-component-in-oro-application">
<span id="op-structure-mq-complete"></span><h1>Message Queue Component in Oro Application<a class="headerlink" href="#message-queue-component-in-oro-application" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id4">Overview</a></li>
<li><a class="reference internal" href="#terminology" id="id5">Terminology</a></li>
<li><a class="reference internal" href="#message-processors" id="id6">Message Processors</a></li>
<li><a class="reference internal" href="#jobs" id="id7">Jobs</a></li>
<li><a class="reference internal" href="#message-flow" id="id8">Message Flow</a></li>
<li><a class="reference internal" href="#more-examples" id="id9">More Examples</a></li>
<li><a class="reference internal" href="#usage" id="id10">Usage</a></li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id4">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The MessageQueue component incorporates a message queue in your application via
different transports. It contains several layers.</p>
<p>The lowest layer is called Transport and provides an abstraction of
transport protocol. The Consumption layer provides tools to consume
messages, such as the cli command, signal handling, logging, extensions. It
works on top of transport layer.</p>
<p>The Client layer provides the ability to start producing/consuming
messages with as little configuration as possible.</p>
<div class="section" id="publish-subscribe-messaging">
<h3>Publish/Subscribe Messaging<a class="headerlink" href="#publish-subscribe-messaging" title="Permalink to this headline">¶</a></h3>
<p>OroMessageQueue uses <em>Publish/subscribe messaging</em>. It means that the
sending application publishes (sends) a message with a specific <em>topic</em>
and a <em>consumer</em> finds a subscriber(s) for the topic. Publish/subscribe
messaging allows decoupling of the information provider from the
consumers of that information. The sending application and the receiving
application do not need to know anything about each other for the
information to be sent and received.</p>
</div>
</div>
<div class="section" id="terminology">
<h2><a class="toc-backref" href="#id5">Terminology</a><a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Message</strong> - An information message which contains a <em>message topic</em>
that indicates which <em>message processor(s)</em> will process it and a
<em>message body</em> - array of parameters required for the processing, for
example an entity id or a channel name. Messages are created and sent
by a <em>message producer</em> and put to the &#8220;tail&#8221; of the <em>message queue</em>.
When the message comes up, it is processed by a <em>consumer</em> using a
<em>message processor</em>. Messages also contain a number of additional
settings (see <a class="reference external" href="#message-settings">Message settings</a>).</li>
<li><strong>Message Queue</strong> - A FIFO queue that holds <em>queue messages</em> until
they are processed. There can be one or more queues. If we use only
one queue, it is much easier. If there are several queues, it is much
more difficult but more flexible sometimes.</li>
<li><strong>Consumer</strong> - A component which takes messages from the queue and
processes them. It processes one message at a time: once one message
has finished being processed, the next message follows. For each
message, the consumer runs a <em>message processor</em> subscribed to the
<em>message topic</em> (if one exists). If there are several processors
subscribed to the same topic, they can be run in parallel (actually
messages are sent via broker and if the broker sees that a message
has several receivers, it clones the message to create an individual
message for each receiver). There can be more than one consumer and
they can work on different servers. It can be done to increase the
performance. When implementing a message processor, a developer
should remember that <em>there can be several consumers working on
different servers</em>.</li>
<li><strong>Message Processor</strong> - Processes the queue messages (i.e. contains a
code that should run when a consumer processes a message with the
specified topic).</li>
<li><strong>Message Topic</strong> - An identifier that indicates which message
processor should be executed for the message. One processor can
subscribe to several topics. Also, there can be several processes
subscribed to the same topic.</li>
<li><strong>Job</strong> - A message processor can process a message directly or
create a job. Jobs are created in the db and allow monitoring of the
processes status, start and end time, interrupt processes. Also, if
we split a process into a set of parallel processes, jobs allow
monitoring and control of the whole set. See details in the
<a class="reference external" href="#jobs">Jobs</a> section.</li>
</ul>
<div class="section" id="message-settings">
<h3>Message Settings<a class="headerlink" href="#message-settings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>Topic</strong> - Refers to the term &#8216;Message Topic&#8217; above.</li>
<li><strong>Body</strong> - A string or json encoded array with some data.</li>
<li><strong>Priority</strong> - Can be <code class="docutils literal"><span class="pre">MessagePriority::VERY_LOW</span></code>,
<code class="docutils literal"><span class="pre">MessagePriority::LOW</span></code>, <code class="docutils literal"><span class="pre">MessagePriority::NORMAL</span></code>,
<code class="docutils literal"><span class="pre">MessagePriority::HIGH</span></code>, <code class="docutils literal"><span class="pre">MessagePriority::VERY_HIGH</span></code>.
Recognizing priority is simple: there are five queues, one queue per
priority. Consumers process messages from the VERY_HIGH queue. If
there are no messages in the VERY_HIGH queue, consumers process
messages from the HIGH queue, etc. Consequently, if all other queues
are empty, consumer processes messages from the VERY_LOW queue.</li>
<li><strong>Expire</strong> - A number of seconds after which the message should be
removed from the queue without processing.</li>
<li><strong>Delay</strong> - A number of seconds that the message should be delayed
for before it is sent to a queue.</li>
</ul>
</div>
</div>
<div class="section" id="message-processors">
<h2><a class="toc-backref" href="#id6">Message Processors</a><a class="headerlink" href="#message-processors" title="Permalink to this headline">¶</a></h2>
<p><strong>Message Processors</strong> are classes that process queue messages. They
implement <code class="docutils literal"><span class="pre">MessageProcessorInterface</span></code>. In addition, they usually
subscribe to the specific topics and implement
<code class="docutils literal"><span class="pre">TopicSubscriberInterface</span></code>.</p>
<p>A <code class="docutils literal"><span class="pre">process(MessageInterface</span> <span class="pre">$message,</span> <span class="pre">SessionInterface</span> <span class="pre">$session)</span></code>
method describes the actions that should be performed when a message is
received. It can perform the actions directly or create a job. It can
also produce a new message to run another processor asynchronously.</p>
<div class="section" id="processing-status">
<h3>Processing Status<a class="headerlink" href="#processing-status" title="Permalink to this headline">¶</a></h3>
<p>The received message can be processed, rejected, and re-queued. An
exception can also be thrown.</p>
<p><strong>Message Processor will return ``self::ACK`` in the following cases:</strong></p>
<ul class="simple">
<li>If a message wass processed successfully.</li>
<li>If the created job returned <code class="docutils literal"><span class="pre">true</span></code>.</li>
</ul>
<p>It means that the message was processed successfully and is removed from
the queue.</p>
<p><strong>Message Processor will return ``self::REJECT`` in the following
cases:</strong></p>
<ul class="simple">
<li>If a message is broken.</li>
<li>If the created job returned <code class="docutils literal"><span class="pre">false</span></code>.</li>
</ul>
<p>It means that the message was not processed and is removed from the
queue because it is unprocessable and will never become processable
(e.g. a required parameter is missing or another permanent error
appears).</p>
<p><strong>There could be two options:</strong></p>
<ul class="simple">
<li>The message became unprocessable as a result of normal work. For
example, when the message was sent to an the entity that existed at
the moment of sending, but somebody deleted it. The entity will not
appear again and we can reject the message. It is normal workflow, so
user intervention is not required.</li>
<li>The message became unprocessable due a failure. For example, when an
entity id was invalid or missing. This is abnormal behavior, the
message should also be rejected, but the processor requires user
attention (e.g. log a critical error or even throw an exception).</li>
</ul>
<p><strong>If a message cannot be processed temporarily</strong>, for example, in case
of connection timeout due server overload, the <code class="docutils literal"><span class="pre">process</span></code> method should
return <code class="docutils literal"><span class="pre">self::REQUEUE</span></code>. The message will be returned to the queue
again and will be processed later. <strong>This will also happen if an
exception is thrown during processing or job running</strong>.</p>
<p><strong>The workflow of re-queuing messages (processor returns
``self::REQUEUE``) is the following:</strong></p>
<ol class="arabic simple">
<li>A consumer processes a message (runs the <code class="docutils literal"><span class="pre">process</span></code> method of the
message processor).</li>
<li>The <code class="docutils literal"><span class="pre">process</span></code> method returns <code class="docutils literal"><span class="pre">self::REQUEUE</span></code>.</li>
<li>The consumer puts the message (i.e. a copy of the message) to the end
of the queue setting the <code class="docutils literal"><span class="pre">redelivery</span></code> flag to true.</li>
<li>The consumer continues message processing (the requeued message is at
the end of the queue).</li>
<li>When the turn of the requeued message comes, the
<code class="docutils literal"><span class="pre">DelayRedeliveredMessageExtension</span></code> works and sets a delay for the
requeued message.</li>
<li>The time set in the delay passes and the message is processed again.</li>
</ol>
<p><strong>The workflow of re-queuing messages when an exception is thrown inside
a message processor is slightly different:</strong></p>
<ol class="arabic simple">
<li>A consumer processes a message (runs <code class="docutils literal"><span class="pre">process</span></code> method of the
message processor).</li>
<li>An exception is thrown inside the <code class="docutils literal"><span class="pre">process</span></code> method.</li>
<li>The consumer logs the exception and puts the message (i.e. a copy of
the message) to the end of the queue setting the <code class="docutils literal"><span class="pre">redelivery</span></code> flag
to true. Then the consumer fails with the exception.</li>
<li>The consumer should be re-run at this stage. It can be done manually
or automatically with an utility like
<a class="reference external" href="http://supervisord.org/">supervisord</a>. Manual re-run is preferred
for developing as developers should review the exceptions thrown on
the message processing. Automatic re-run is preferred for regression
testing or prod.</li>
<li>The consumer continues message processing (the failing message is at
the end of the queue).</li>
<li>When the turn of the failing message comes, the
<code class="docutils literal"><span class="pre">DelayRedeliveredMessageExtension</span></code> works and sets a delay for the
failing message.</li>
<li>After the delay time passes, the message is processed again and the
consumer can fail again.</li>
</ol>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>A processor receives a message with the entity id. It finds the entity
and changes its status without creating any job.</p>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * {@inheritdoc}</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">process</span><span class="p">(</span><span class="nx">MessageInterface</span> <span class="nv">$message</span><span class="p">,</span> <span class="nx">SessionInterface</span> <span class="nv">$session</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="o">::</span><span class="na">decode</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">());</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$body</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">-&gt;</span><span class="na">critical</span><span class="p">(</span>
            <span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;Got invalid message, id is empty: &quot;%s&quot;&#39;</span><span class="p">,</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()),</span>
            <span class="p">[</span><span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="nv">$message</span><span class="p">]</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="nx">self</span><span class="o">::</span><span class="na">REJECT</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$em</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getEntityManager</span><span class="p">();</span>
    <span class="nv">$repository</span> <span class="o">=</span> <span class="nv">$em</span><span class="o">-&gt;</span><span class="na">getRepository</span><span class="p">(</span><span class="nx">SomeEntity</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

    <span class="nv">$entity</span> <span class="o">=</span> <span class="nv">$repository</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="nv">$body</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]);</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="nv">$entity</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">(</span>
            <span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;Cannot find an entity with id: &quot;%s&quot;&#39;</span><span class="p">,</span> <span class="nv">$body</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]),</span>
            <span class="p">[</span><span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="nv">$message</span><span class="p">]</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="nx">self</span><span class="o">::</span><span class="na">REJECT</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$entity</span><span class="o">-&gt;</span><span class="na">setStatus</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">);</span>
    <span class="nv">$em</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$entity</span><span class="p">);</span>
    <span class="nv">$em</span><span class="o">-&gt;</span><span class="na">flush</span><span class="p">();</span>

    <span class="k">return</span> <span class="nx">self</span><span class="o">::</span><span class="na">ACK</span><span class="p">;</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>Overall, there can be three cases:</p>
<ul class="simple">
<li>The processor received a message with an entity id. The entity was
found. The process method of the processor changed the entity status
and returned self::ACK.</li>
<li>The processor received a message with an entity id. The entity was
not found. This is possible if the entity was deleted when the
message was in the queue (i.e. after it was sent but before it was
processed). This is expected behavior, but the processor rejects the
message because the entity does not exist and will not appear later.
Please note that we use error logging level.</li>
<li>The processor received a message with an empty entity id. This is
unexpected behavior. There are definitely bugs in the code that sent
the message. We also reject the message but using critical logging
level to inform that user intervention is required.</li>
</ul>
</div>
</div>
<div class="section" id="jobs">
<span id="op-structure-mq-component-jobs"></span><h2><a class="toc-backref" href="#id7">Jobs</a><a class="headerlink" href="#jobs" title="Permalink to this headline">¶</a></h2>
<p>A message processor can be implemented with or without creating jobs.</p>
<p>There is no ideal criteria to help decide whether a job should be
created or not. A developer should decide each time which approach is
better in this case.</p>
<p>Here are a few recommendations:</p>
<p>Skip a job creation if:</p>
<ul class="simple">
<li>There is an easy fast-executing action such as status changing etc.</li>
<li>The action looks like an event listener.</li>
</ul>
<p>Always create jobs if:</p>
<ul class="simple">
<li>The action is complicated and can be executed for a long time.</li>
<li>There is a need to monitor execution status.</li>
<li>There is a need to run an unique job i.e. do not allow running a job with the
same name until the previous job has finished.</li>
<li>There is a need to run a step-by-step action i.e. the message flow has
several steps (tasks) which run one after another.</li>
<li>There is a need to split a job for a set of sub-jobs to run in parallel and
monitor the status of the whole task.</li>
</ul>
<p>Jobs are usually run with JobRunner.</p>
<div class="section" id="jobrunner">
<h3>JobRunner<a class="headerlink" href="#jobrunner" title="Permalink to this headline">¶</a></h3>
<p>JobRunner creates and runs a job. Usually one of the following methods
is used:</p>
<div class="section" id="rununique">
<h4>runUnique<a class="headerlink" href="#rununique" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">public</span> <span class="pre">function</span> <span class="pre">runUnique($ownerId,</span> <span class="pre">$name,</span> <span class="pre">\Closure</span> <span class="pre">$runCallback)</span></code></p>
<p>Runs the <code class="docutils literal"><span class="pre">$runCallback</span></code>. It does not allow another job with the same
name to be run at the same time.</p>
</div>
<div class="section" id="createdelayed">
<h4>createDelayed<a class="headerlink" href="#createdelayed" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">public</span> <span class="pre">function</span> <span class="pre">createDelayed($name,</span> <span class="pre">\Closure</span> <span class="pre">$startCallback)</span></code></p>
<p>A sub-job which runs asynchronously (sending its own message). It can
only run inside another job.</p>
</div>
<div class="section" id="rundelayed">
<h4>runDelayed<a class="headerlink" href="#rundelayed" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">public</span> <span class="pre">function</span> <span class="pre">runDelayed($jobId,</span> <span class="pre">\Closure</span> <span class="pre">$runCallback)</span></code></p>
<p>This method is used inside a processor for a message which was sent with
createDelayed.</p>
<p>The <code class="docutils literal"><span class="pre">$runCallback</span></code> closure usually returns <code class="docutils literal"><span class="pre">true</span></code> or <code class="docutils literal"><span class="pre">false</span></code>, the
job status depends on the returned value. See <a class="reference external" href="#jobs-statuses">Jobs
statuses</a> section for the details.</p>
<p>To reuse existing processor logic in scope of job it may be decorated
with <code class="docutils literal"><span class="pre">DelayedJobRunnerDecoratingProcessor</span></code> which will execute
runDelayed, pass control to given processor and then handle result in
format applicable for <code class="docutils literal"><span class="pre">runDelayed</span></code></p>
</div>
</div>
<div class="section" id="a-dependent-job">
<h3>A Dependent Job<a class="headerlink" href="#a-dependent-job" title="Permalink to this headline">¶</a></h3>
<p>Use a dependent job when your job flow has several steps but you want to
send a new message when all steps are finished.</p>
<p>In the example below, a root job is created. As soon as its work is
completed, it sends two messages with the &#8216;topic1&#8217; and &#8216;topic2&#8217; topics
to the queue.</p>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MessageProcessor</span> <span class="k">implements</span> <span class="nx">MessageProcessorInterface</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @var JobRunner</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$jobRunner</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @var DependentJobService</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$dependentJob</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">process</span><span class="p">(</span><span class="nx">MessageInterface</span> <span class="nv">$message</span><span class="p">,</span> <span class="nx">SessionInterface</span> <span class="nv">$session</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="o">::</span><span class="na">decode</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">());</span>

        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jobRunner</span><span class="o">-&gt;</span><span class="na">runUnique</span><span class="p">(</span>
            <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getMessageId</span><span class="p">(),</span>
            <span class="s1">&#39;oro:index:reindex&#39;</span><span class="p">,</span>
            <span class="k">function</span> <span class="p">(</span><span class="nx">JobRunner</span> <span class="nv">$runner</span><span class="p">,</span> <span class="nx">Job</span> <span class="nv">$job</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// register two dependent jobs</span>
                <span class="c1">// next messages will be sent to queue when that job and all children are finished</span>
                <span class="nv">$context</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dependentJob</span><span class="o">-&gt;</span><span class="na">createDependentJobContext</span><span class="p">(</span><span class="nv">$job</span><span class="o">-&gt;</span><span class="na">getRootJob</span><span class="p">());</span>
                <span class="nv">$context</span><span class="o">-&gt;</span><span class="na">addDependentJob</span><span class="p">(</span><span class="s1">&#39;topic1&#39;</span><span class="p">,</span> <span class="s1">&#39;message1&#39;</span><span class="p">);</span>
                <span class="nv">$context</span><span class="o">-&gt;</span><span class="na">addDependentJob</span><span class="p">(</span><span class="s1">&#39;topic2&#39;</span><span class="p">,</span> <span class="s1">&#39;message2&#39;</span><span class="p">,</span> <span class="nx">MessagePriority</span><span class="o">::</span><span class="na">VERY_HIGH</span><span class="p">);</span>

                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dependentJob</span><span class="o">-&gt;</span><span class="na">saveDependentJob</span><span class="p">(</span><span class="nv">$context</span><span class="p">);</span>

                <span class="c1">// some work to do</span>

                <span class="k">return</span> <span class="k">true</span><span class="p">;</span> <span class="c1">// if you want to ACK message or false to REJECT</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="nv">$result</span> <span class="o">?</span> <span class="nx">self</span><span class="o">::</span><span class="na">ACK</span> <span class="o">:</span> <span class="nx">self</span><span class="o">::</span><span class="na">REJECT</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The dependant jobs can be added only to root jobs (i.e. to the jobs
created with <code class="docutils literal"><span class="pre">runUnique</span></code>, not <code class="docutils literal"><span class="pre">runDelayed</span></code>).</p>
</div>
<div class="section" id="jobs-structure">
<h3>Jobs Structure<a class="headerlink" href="#jobs-structure" title="Permalink to this headline">¶</a></h3>
<p>A two-level job hierarchy is created for the process where:</p>
<ul class="simple">
<li>A root job can have a few child jobs.</li>
<li>A child job can have one root job.</li>
<li>A child job cannot have child jobs of its own.</li>
<li>A root job cannot have a root job of its own.</li>
<li>If we use just <code class="docutils literal"><span class="pre">runUnique</span></code>, then a parent and a child jobs with the
same name are created.</li>
<li>If we use <code class="docutils literal"><span class="pre">runUnique</span></code> and <code class="docutils literal"><span class="pre">createDelayed</span></code> inside it, then a
parent and a child job for <code class="docutils literal"><span class="pre">runUnique</span></code> are created. Then each run
of <code class="docutils literal"><span class="pre">createDelayed</span></code> adds another child for the runUnique parent.</li>
</ul>
</div>
<div class="section" id="job-statuses">
<h3>Job Statuses<a class="headerlink" href="#job-statuses" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>Single job:</strong> When a message is being processed by a consumer and a
JobRunner method <code class="docutils literal"><span class="pre">runUnique</span></code> is called without creating any child
jobs:</li>
<li>The root job is created and the closure passed in params runs. The
job gets <code class="docutils literal"><span class="pre">Job::STATUS_RUNNING</span></code> status, the job <code class="docutils literal"><span class="pre">startedAt</span></code> field
is set to the current time.</li>
<li>If the closure returns <code class="docutils literal"><span class="pre">true</span></code>, the job status is changed to
<code class="docutils literal"><span class="pre">Job::STATUS_SUCCESS</span></code>, the job <code class="docutils literal"><span class="pre">stoppedAt</span></code> field is changed to
the current time.</li>
<li>If the closure returns <code class="docutils literal"><span class="pre">false</span></code> or throws an exception, the job
status is changed to <code class="docutils literal"><span class="pre">Job::STATUS_FAILED</span></code>, the job <code class="docutils literal"><span class="pre">stoppedAt</span></code>
field is changed to the current time.</li>
<li>If someone interrupts the job, it stops working and gets
<code class="docutils literal"><span class="pre">Job::STATUS_CANCELLED</span></code> status, the job <code class="docutils literal"><span class="pre">stoppedAt</span></code> field is
changed to the current time.</li>
<li><strong>Child jobs:</strong> When a message is being processed by a consumer, a
JobRunner method <code class="docutils literal"><span class="pre">runUnique</span></code> is called which creates child jobs
with <code class="docutils literal"><span class="pre">createDelayed</span></code>:</li>
<li>The root job is created and the closure passed in params runs. The
job gets <code class="docutils literal"><span class="pre">Job::STATUS_RUNNING</span></code> status, the job <code class="docutils literal"><span class="pre">startedAt</span></code> field
is set to the current time.</li>
<li>When the JobRunner method <code class="docutils literal"><span class="pre">createDelayed</span></code> is called, the child jobs
are created and get the <code class="docutils literal"><span class="pre">Job::STATUS_NEW</span></code> statuses. The messages
for the jobs are sent to the message queue.</li>
<li>When a message for a child job is being processed by a consumer and a
JobRunner method <code class="docutils literal"><span class="pre">runDelayed</span></code> is called, the closure runs and the
child jobs get <code class="docutils literal"><span class="pre">Job::STATUS_RUNNING</span></code> status.</li>
<li>If the closure returns <code class="docutils literal"><span class="pre">true</span></code>, the child job status is changed to
<code class="docutils literal"><span class="pre">Job::STATUS_SUCCESS</span></code>, the job <code class="docutils literal"><span class="pre">stoppedAt</span></code> field is changed to
the current time.</li>
<li>If the closure returns <code class="docutils literal"><span class="pre">false</span></code> or throws an exception, the child
job status is changed to <code class="docutils literal"><span class="pre">Job::STATUS_FAILED</span></code>, the job
<code class="docutils literal"><span class="pre">stoppedAt</span></code> field is changed to the current time.</li>
<li>When all child jobs are stopped, the root job status is changed
according to the child jobs statuses.</li>
<li>If someone interrupts a child job, it stops working and gets
<code class="docutils literal"><span class="pre">Job::STATUS_CANCELLED</span></code> status, the job <code class="docutils literal"><span class="pre">stoppedAt</span></code> field is
changed to the current time.</li>
<li>If someone interrupts the root job, the child jobs that are already
running finish their work and get the statuses according to the work
result (see the description above). The child jobs that are not run
yet are cancelled and get <code class="docutils literal"><span class="pre">Job::STATUS_CANCELLED</span></code> statuses.</li>
<li><strong>Also:</strong> If a jobs closure returns <code class="docutils literal"><span class="pre">true</span></code>, the process method
which runs this job should return <code class="docutils literal"><span class="pre">self::ACK</span></code>. If a job closure
returns <code class="docutils literal"><span class="pre">false</span></code>, the process method which runs this job should
return <code class="docutils literal"><span class="pre">self::REJECT</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="message-flow">
<h2><a class="toc-backref" href="#id8">Message Flow</a><a class="headerlink" href="#message-flow" title="Permalink to this headline">¶</a></h2>
<div class="section" id="simple-flow">
<h3>Simple flow<a class="headerlink" href="#simple-flow" title="Permalink to this headline">¶</a></h3>
<p>Usually the message flow looks the following way:</p>
<div class="figure" id="id1">
<img alt="Simple Message Flow" src="../../../_images/simple_message_flow.png" />
<p class="caption"><span class="caption-text">Simple Message Flow</span></p>
</div>
<p>However, if there are more than one processor subscribed to the same
topic, the flow becomes more complicated. The client&#8217;s message producer
sends a message to a router message processor. It takes the message and
searches for real recipients that are interested in such message. Then
it sends a copy of the message to all of them. Each target message
processor takes its copy of the message and processes it.</p>
</div>
<div class="section" id="simple-way-to-run-several-processes-in-parallel">
<h3>Simple Way to Run Several Processes in Parallel<a class="headerlink" href="#simple-way-to-run-several-processes-in-parallel" title="Permalink to this headline">¶</a></h3>
<p>Let us imagine that we want to run two processes in parallel. In this
case, we can create a Processor B with the first process and Processor C
with the second process. We can then create Processor A, inject Message
Producer into it, and send messages to Processor B and Processor C. The
messages are put to the queue and when their turn comes, the consumers
run processes B and C. That could be done in parallel.</p>
<div class="figure" id="id2">
<img alt="Simple Parallel Process Running Flow" src="../../../_images/simple_parallel_processes_running.png" />
<p class="caption"><span class="caption-text">Simple Parallel Process Running Flow</span></p>
</div>
<p>Code example:</p>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">process</span><span class="p">(</span><span class="nx">MessageInterface</span> <span class="nv">$message</span><span class="p">,</span> <span class="nx">SessionInterface</span> <span class="nv">$session</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="o">::</span><span class="na">decode</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">());</span>

    <span class="k">if</span> <span class="p">({</span><span class="nv">$message</span> <span class="nx">is</span> <span class="nx">invalid</span><span class="p">})</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">-&gt;</span><span class="na">critical</span><span class="p">(</span>
            <span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;Got invalid message: &quot;%s&quot;&#39;</span><span class="p">,</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()),</span>
            <span class="p">[</span><span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="nv">$message</span><span class="p">]</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="nx">self</span><span class="o">::</span><span class="na">REJECT</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;ids&#39;</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">producer</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nx">Topics</span><span class="o">::</span><span class="na">DO_SOMETHING_WITH_ENTITY</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">,</span>
            <span class="s1">&#39;targetClass&#39;</span> <span class="o">=&gt;</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;targetClass&#39;</span><span class="p">],</span>
            <span class="s1">&#39;targetId&#39;</span> <span class="o">=&gt;</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;targetId&#39;</span><span class="p">],</span>
        <span class="p">]);</span>
    <span class="p">}</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span>
        <span class="s1">&#39;Sent &quot;%s&quot; messages&#39;</span><span class="p">,</span>
        <span class="nb">count</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;ids&#39;</span><span class="p">])</span>
    <span class="p">));</span>

    <span class="k">return</span> <span class="nx">self</span><span class="o">::</span><span class="na">ACK</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The processor in the example accepts an array of some entity ids and
sends a message <code class="docutils literal"><span class="pre">Topics:DO_SOMETHING_WITH_ENTITY</span></code> to each id. The
messages are put to the message queue and will be processed when their
turn comes. It could be done in parallel if several consumers are
running.</p>
<p>The approach is simple and works perfectly well, although it has a few
flaws.</p>
<ul class="simple">
<li>We do not have a way to <strong>monitor</strong> the <strong>status</strong> of processes
except for reading log files. In the example above we do not know how
many entities are being processed and how many are still in the
queue. We also do not know how many entities were processed
successfully and how many received errors during the processing.</li>
<li>We cannot ensure the <strong>unique</strong> run.</li>
<li>We cannot easily <strong>interrupt</strong> the running processes.</li>
</ul>
</div>
<div class="section" id="flow-to-run-parallel-jobs-via-creating-a-root-job-and-child-jobs-using-rununique-createdelayed-rundelayed">
<h3>Flow to Run Parallel Jobs via Creating a Root Job and Child Jobs Using runUnique/createDelayed/runDelayed<a class="headerlink" href="#flow-to-run-parallel-jobs-via-creating-a-root-job-and-child-jobs-using-rununique-createdelayed-rundelayed" title="Permalink to this headline">¶</a></h3>
<p>This way of running parallel jobs is more appropriate than the previous
one, although it is slightly more complicated. It is, however, the
preferred way for the parallel processes implementation.</p>
<p>The task is the same as the previous one. We want to run two processes
in parallel. We are also creating processors A, B and C but they are
slightly different.</p>
<p>We inject JobRunner to <em>Processor A</em>. Inside the <code class="docutils literal"><span class="pre">process</span></code> method, it
runs <code class="docutils literal"><span class="pre">runUnique</span></code> method. In the closure of the <code class="docutils literal"><span class="pre">runUnique</span></code>, it runs
<code class="docutils literal"><span class="pre">createDelayed</span></code> method for <em>Processor B</em> and for <em>Processor C</em> passing
<code class="docutils literal"><span class="pre">jobId</span></code> param to its closure. Inside the closures of
<code class="docutils literal"><span class="pre">createDelayed</span></code>, the messages for <em>Processor B</em> and <em>Processor C</em> are
created and sent. We should also add the <code class="docutils literal"><span class="pre">jobId</span></code> params to the message
bodies except for the required params.</p>
<p>Processors B and C are also slightly different. Their process methods
call <code class="docutils literal"><span class="pre">runDelayed</span></code> method passing the received <code class="docutils literal"><span class="pre">jobId</span></code> param.</p>
<p>The benefits are the following:</p>
<ul class="simple">
<li><strong>Unique running</strong>. As we use <code class="docutils literal"><span class="pre">runUnique</span></code> method in Processor A, a
new instance of it cannot run until the previous instance completes
all the jobs.</li>
<li><strong>Jobs are created in the db</strong>. A root job is created for Processor A
and child jobs are added to it for Processors B and C.</li>
<li><strong>Status monitoring</strong>. We can see the statuses of all the child jobs:
<em>new</em> for just created, <em>running</em> for the jobs that are currently
running, <em>success</em> for the jobs that finished successfully and
<em>failed</em> for the jobs that failed.</li>
<li>A root job status is <em>running</em> until all child jobs are finished.</li>
<li><strong>Interrupt</strong>. We can interrupt a child job or a root job. If we
interrupt a root job, all its running child jobs complete their work.
Child jobs that have not started will not start.</li>
</ul>
<div class="figure" id="id3">
<img alt="Running Parallel Jobs" src="../../../_images/running_parallel_jobs.png" />
<p class="caption"><span class="caption-text">Running Parallel Jobs - a Root Job with async Sub-jobs</span></p>
</div>
<div class="section" id="example-of-createdelayed-and-rundelayed-usage">
<h4>Example of createDelayed and runDelayed Usage<a class="headerlink" href="#example-of-createdelayed-and-rundelayed-usage" title="Permalink to this headline">¶</a></h4>
<p>The processor subscribes to <code class="docutils literal"><span class="pre">Topics::DO_BIG_JOB</span></code> and runs a unique big
job (the name of the job is Topics::DO_BIG_JOB - the same as the topic
name so it will not be possible to run another big job at the same time)
The processor creates a set of delayed jobs, each of them sends
<code class="docutils literal"><span class="pre">Topics::DO_SMALL_JOB</span></code> message.</p>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * {@inheritdoc}</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">process</span><span class="p">(</span><span class="nx">MessageInterface</span> <span class="nv">$message</span><span class="p">,</span> <span class="nx">SessionInterface</span> <span class="nv">$session</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$bigJobParts</span> <span class="o">=</span> <span class="nx">JSON</span><span class="o">::</span><span class="na">decode</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">());</span>

    <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jobRunner</span><span class="o">-&gt;</span><span class="na">runUnique</span><span class="p">(</span> <span class="c1">//a root job is creating here</span>
        <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getMessageId</span><span class="p">(),</span>
        <span class="nx">Topics</span><span class="o">::</span><span class="na">DO_BIG_JOB</span><span class="p">,</span>
        <span class="k">function</span> <span class="p">(</span><span class="nx">JobRunner</span> <span class="nv">$jobRunner</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$bigJobParts</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$bigJobParts</span> <span class="k">as</span> <span class="nv">$smallJob</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$jobRunner</span><span class="o">-&gt;</span><span class="na">createDelayed</span><span class="p">(</span> <span class="c1">// child jobs are creating here and get new status</span>
                    <span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;%s:%s&#39;</span><span class="p">,</span> <span class="nx">Topics</span><span class="o">::</span><span class="na">DO_SMALL_JOB</span><span class="p">,</span> <span class="nv">$smallJob</span><span class="p">),</span>
                    <span class="k">function</span> <span class="p">(</span><span class="nx">JobRunner</span> <span class="nv">$jobRunner</span><span class="p">,</span> <span class="nx">Job</span> <span class="nv">$child</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$smallJob</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">producer</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nx">Topics</span><span class="o">::</span><span class="na">DO_SMALL_JOB</span><span class="p">,</span> <span class="p">[</span> <span class="c1">// messages for child jobs are sent here</span>
                            <span class="s1">&#39;smallJob&#39;</span> <span class="o">=&gt;</span> <span class="nv">$smallJob</span><span class="p">,</span>
                            <span class="s1">&#39;jobId&#39;</span> <span class="o">=&gt;</span> <span class="nv">$child</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span> <span class="c1">// the created child jobs ids are passing as message body params</span>
                        <span class="p">]);</span>
                    <span class="p">}</span>
                <span class="p">);</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="nv">$result</span> <span class="o">?</span> <span class="nx">self</span><span class="o">::</span><span class="na">ACK</span> <span class="o">:</span> <span class="nx">self</span><span class="o">::</span><span class="na">REJECT</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The processor subscribes to the <code class="docutils literal"><span class="pre">Topics::DO_SMALL_JOB</span></code> and runs the
created delayed job.</p>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * {@inheritdoc}</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">process</span><span class="p">(</span><span class="nx">MessageInterface</span> <span class="nv">$message</span><span class="p">,</span> <span class="nx">SessionInterface</span> <span class="nv">$session</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$payload</span> <span class="o">=</span> <span class="nx">JSON</span><span class="o">::</span><span class="na">decode</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">());</span>

    <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jobRunner</span><span class="o">-&gt;</span><span class="na">runDelayed</span><span class="p">(</span><span class="nv">$payload</span><span class="p">[</span><span class="s1">&#39;jobId&#39;</span><span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="nx">JobRunner</span> <span class="nv">$jobRunner</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$payload</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//the child job status with the id $payload[&#39;jobId&#39;] is changed from new to running</span>

        <span class="nv">$smallJobData</span> <span class="o">=</span> <span class="nv">$payload</span><span class="p">[</span><span class="s1">&#39;smallJob&#39;</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">checkDataValidity</span><span class="p">(</span><span class="nv">$smallJobData</span><span class="p">)))</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">(</span>
                <span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;Invalid data received: &quot;%s&quot;&#39;</span><span class="p">,</span> <span class="nv">$smallJobData</span><span class="p">),</span>
                <span class="p">[</span><span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="nv">$payload</span><span class="p">]</span>
            <span class="p">);</span>

            <span class="k">return</span> <span class="k">false</span><span class="p">;</span> <span class="c1">//the child job status with the id $payload[&#39;jobId&#39;] is changed from running to failed</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="k">true</span><span class="p">;</span> <span class="c1">//the child job status with the id $payload[&#39;jobId&#39;] is changed from running to success</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="nv">$result</span> <span class="o">?</span> <span class="nx">self</span><span class="o">::</span><span class="na">ACK</span> <span class="o">:</span> <span class="nx">self</span><span class="o">::</span><span class="na">REJECT</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A root job is created for the big job and a set of its child jobs is
created for the small jobs.</p>
</div>
</div>
</div>
<div class="section" id="more-examples">
<h2><a class="toc-backref" href="#id9">More Examples</a><a class="headerlink" href="#more-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="run-only-a-single-job-i-e-job-with-one-step-with-rununique">
<h3>Run Only a Single Job (i.e. Job with One Step with runUnique)<a class="headerlink" href="#run-only-a-single-job-i-e-job-with-one-step-with-rununique" title="Permalink to this headline">¶</a></h3>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MessageProcessor</span> <span class="k">implements</span> <span class="nx">MessageProcessorInterface</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @var JobRunner</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$jobRunner</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">process</span><span class="p">(</span><span class="nx">MessageInterface</span> <span class="nv">$message</span><span class="p">,</span> <span class="nx">SessionInterface</span> <span class="nv">$session</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="o">::</span><span class="na">decode</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">());</span>

        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jobRunner</span><span class="o">-&gt;</span><span class="na">runUnique</span><span class="p">(</span>
            <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getMessageId</span><span class="p">(),</span>
            <span class="s1">&#39;oro:index:reindex&#39;</span><span class="p">,</span>
            <span class="k">function</span> <span class="p">(</span><span class="nx">JobRunner</span> <span class="nv">$runner</span><span class="p">,</span> <span class="nx">Job</span> <span class="nv">$job</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// do your job</span>

                <span class="k">return</span> <span class="k">true</span><span class="p">;</span> <span class="c1">// if you want to ACK message or false to REJECT</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="nv">$result</span> <span class="o">?</span> <span class="nx">self</span><span class="o">::</span><span class="na">ACK</span> <span class="o">:</span> <span class="nx">self</span><span class="o">::</span><span class="na">REJECT</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="job-flow-has-two-or-more-steps">
<h3>Job Flow Has Two or More Steps<a class="headerlink" href="#job-flow-has-two-or-more-steps" title="Permalink to this headline">¶</a></h3>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Step1MessageProcessor</span> <span class="k">implements</span> <span class="nx">MessageProcessorInterface</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @var JobRunner</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$jobRunner</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @var MessageProducerInterface</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$producer</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">process</span><span class="p">(</span><span class="nx">MessageInterface</span> <span class="nv">$message</span><span class="p">,</span> <span class="nx">SessionInterface</span> <span class="nv">$session</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="o">::</span><span class="na">decode</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">());</span>

        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jobRunner</span><span class="o">-&gt;</span><span class="na">runUnique</span><span class="p">(</span>
            <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getMessageId</span><span class="p">(),</span>
            <span class="s1">&#39;oro:index:reindex&#39;</span><span class="p">,</span>
            <span class="k">function</span> <span class="p">(</span><span class="nx">JobRunner</span> <span class="nv">$runner</span><span class="p">,</span> <span class="nx">Job</span> <span class="nv">$job</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// for example first step generates tasks for step two</span>

                <span class="k">foreach</span> <span class="p">(</span><span class="nv">$entities</span> <span class="k">as</span> <span class="nv">$entity</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// every job name must be unique</span>
                    <span class="nv">$jobName</span> <span class="o">=</span> <span class="s1">&#39;oro:index:index-single-entity:&#39;</span> <span class="o">.</span> <span class="nv">$entity</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
                    <span class="nv">$runner</span><span class="o">-&gt;</span><span class="na">createDelayed</span><span class="p">(</span>
                        <span class="nv">$jobName</span><span class="p">,</span>
                        <span class="k">function</span> <span class="p">(</span><span class="nx">JobRunner</span> <span class="nv">$runner</span><span class="p">,</span> <span class="nx">Job</span> <span class="nv">$childJob</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$entity</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">producer</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="s1">&#39;oro:index:index-single-entity&#39;</span><span class="p">,</span> <span class="p">[</span>
                                <span class="s1">&#39;entityId&#39;</span> <span class="o">=&gt;</span> <span class="nv">$entity</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span>
                                <span class="s1">&#39;jobId&#39;</span> <span class="o">=&gt;</span> <span class="nv">$childJob</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span>
                            <span class="p">])</span>
                    <span class="p">});</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="k">true</span><span class="p">;</span> <span class="c1">// if you want to ACK message or false to REJECT</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="nv">$result</span> <span class="o">?</span> <span class="nx">self</span><span class="o">::</span><span class="na">ACK</span> <span class="o">:</span> <span class="nx">self</span><span class="o">::</span><span class="na">REJECT</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Step2MessageProcessor</span> <span class="k">implements</span> <span class="nx">MessageProcessorInterface</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @var JobRunner</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$jobRunner</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">process</span><span class="p">(</span><span class="nx">MessageInterface</span> <span class="nv">$message</span><span class="p">,</span> <span class="nx">SessionInterface</span> <span class="nv">$session</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="o">::</span><span class="na">decode</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">());</span>

        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">jobRunner</span><span class="o">-&gt;</span><span class="na">runDelayed</span><span class="p">(</span>
            <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;jobId&#39;</span><span class="p">],</span>
            <span class="k">function</span> <span class="p">(</span><span class="nx">JobRunner</span> <span class="nv">$runner</span><span class="p">,</span> <span class="nx">Job</span> <span class="nv">$job</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// do your job</span>

                <span class="k">return</span> <span class="k">true</span><span class="p">;</span> <span class="c1">// if you want to ACK message or false to REJECT</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="nv">$result</span> <span class="o">?</span> <span class="nx">self</span><span class="o">::</span><span class="na">ACK</span> <span class="o">:</span> <span class="nx">self</span><span class="o">::</span><span class="na">REJECT</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id10">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The following is an example of a message producing using only a
transport layer:</p>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Oro\Component\MessageQueue\Transport\Dbal\DbalConnection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\DBAL\Configuration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\DBAL\DriverManager</span><span class="p">;</span>

<span class="nv">$doctrineConnection</span> <span class="o">=</span> <span class="nx">DriverManager</span><span class="o">::</span><span class="na">getConnection</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mysql://user:secret@localhost/mydb&#39;</span><span class="p">],</span>
    <span class="k">new</span> <span class="nx">Configuration</span>
<span class="p">);</span>

<span class="nv">$connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DbalConnection</span><span class="p">(</span><span class="nv">$doctrineConnection</span><span class="p">,</span> <span class="s1">&#39;oro_message_queue&#39;</span><span class="p">);</span>

<span class="nv">$session</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">createSession</span><span class="p">();</span>

<span class="nv">$queue</span> <span class="o">=</span> <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">createQueue</span><span class="p">(</span><span class="s1">&#39;aQueue&#39;</span><span class="p">);</span>
<span class="nv">$message</span> <span class="o">=</span> <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">createMessage</span><span class="p">(</span><span class="s1">&#39;Something has happened&#39;</span><span class="p">);</span>

<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">createProducer</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$queue</span><span class="p">,</span> <span class="nv">$message</span><span class="p">);</span>

<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
<span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
</pre></div>
</div>
<p>The following is an example of a message consuming using only a
transport layer:</p>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Oro\Component\MessageQueue\Transport\Dbal\DbalConnection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\DBAL\Configuration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\DBAL\DriverManager</span><span class="p">;</span>

<span class="nv">$doctrineConnection</span> <span class="o">=</span> <span class="nx">DriverManager</span><span class="o">::</span><span class="na">getConnection</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mysql://user:secret@localhost/mydb&#39;</span><span class="p">],</span>
    <span class="k">new</span> <span class="nx">Configuration</span>
<span class="p">);</span>

<span class="nv">$connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DbalConnection</span><span class="p">(</span><span class="nv">$doctrineConnection</span><span class="p">,</span> <span class="s1">&#39;oro_message_queue&#39;</span><span class="p">);</span>

<span class="nv">$session</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">createSession</span><span class="p">();</span>

<span class="nv">$queue</span> <span class="o">=</span> <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">createQueue</span><span class="p">(</span><span class="s1">&#39;aQueue&#39;</span><span class="p">);</span>
<span class="nv">$consumer</span> <span class="o">=</span> <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">createConsumer</span><span class="p">(</span><span class="nv">$queue</span><span class="p">);</span>

<span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$message</span> <span class="o">=</span> <span class="nv">$consumer</span><span class="o">-&gt;</span><span class="na">receive</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">();</span>

        <span class="nv">$consumer</span><span class="o">-&gt;</span><span class="na">acknowledge</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
<span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
</pre></div>
</div>
<p>The following is an example of a message consuming using consumption
layer:</p>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">use</span> <span class="nx">Oro\Component\MessageQueue\Consumption\MessageProcessor</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">FooMessageProcessor</span> <span class="k">implements</span> <span class="nx">MessageProcessor</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">process</span><span class="p">(</span><span class="nx">Message</span> <span class="nv">$message</span><span class="p">,</span> <span class="nx">Session</span> <span class="nv">$session</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">self</span><span class="o">::</span><span class="na">ACK</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="code php highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">use</span> <span class="nx">Doctrine\DBAL\Configuration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\DBAL\DriverManager</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Component\MessageQueue\Consumption\ChainExtension</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Component\MessageQueue\Consumption\QueueConsumer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Oro\Component\MessageQueue\Transport\Dbal\DbalConnection</span><span class="p">;</span>

<span class="nv">$doctrineConnection</span> <span class="o">=</span> <span class="nx">DriverManager</span><span class="o">::</span><span class="na">getConnection</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mysql://user:secret@localhost/mydb&#39;</span><span class="p">],</span>
    <span class="k">new</span> <span class="nx">Configuration</span>
<span class="p">);</span>

<span class="nv">$connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DbalConnection</span><span class="p">(</span><span class="nv">$doctrineConnection</span><span class="p">,</span> <span class="s1">&#39;oro_message_queue&#39;</span><span class="p">);</span>

<span class="nv">$queueConsumer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QueueConsumer</span><span class="p">(</span><span class="nv">$connection</span><span class="p">,</span> <span class="k">new</span> <span class="nx">ChainExtension</span><span class="p">([]));</span>
<span class="nv">$queueConsumer</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">(</span><span class="s1">&#39;aQueue&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">FooMessageProcessor</span><span class="p">());</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$queueConsumer</span><span class="o">-&gt;</span><span class="na">consume</span><span class="p">();</span>
<span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="nv">$queueConsumer</span><span class="o">-&gt;</span><span class="na">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<ul>
<li><a class="reference internal" href="#">Message Queue Component in Oro Application</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#publish-subscribe-messaging">Publish/Subscribe Messaging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#terminology">Terminology</a><ul>
<li><a class="reference internal" href="#message-settings">Message Settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#message-processors">Message Processors</a><ul>
<li><a class="reference internal" href="#processing-status">Processing Status</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jobs">Jobs</a><ul>
<li><a class="reference internal" href="#jobrunner">JobRunner</a><ul>
<li><a class="reference internal" href="#rununique">runUnique</a></li>
<li><a class="reference internal" href="#createdelayed">createDelayed</a></li>
<li><a class="reference internal" href="#rundelayed">runDelayed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a-dependent-job">A Dependent Job</a></li>
<li><a class="reference internal" href="#jobs-structure">Jobs Structure</a></li>
<li><a class="reference internal" href="#job-statuses">Job Statuses</a></li>
</ul>
</li>
<li><a class="reference internal" href="#message-flow">Message Flow</a><ul>
<li><a class="reference internal" href="#simple-flow">Simple flow</a></li>
<li><a class="reference internal" href="#simple-way-to-run-several-processes-in-parallel">Simple Way to Run Several Processes in Parallel</a></li>
<li><a class="reference internal" href="#flow-to-run-parallel-jobs-via-creating-a-root-job-and-child-jobs-using-rununique-createdelayed-rundelayed">Flow to Run Parallel Jobs via Creating a Root Job and Child Jobs Using runUnique/createDelayed/runDelayed</a><ul>
<li><a class="reference internal" href="#example-of-createdelayed-and-rundelayed-usage">Example of createDelayed and runDelayed Usage</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#more-examples">More Examples</a><ul>
<li><a class="reference internal" href="#run-only-a-single-job-i-e-job-with-one-step-with-rununique">Run Only a Single Job (i.e. Job with One Step with runUnique)</a></li>
<li><a class="reference internal" href="#job-flow-has-two-or-more-steps">Job Flow Has Two or More Steps</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Administrator Guide</a><ul>
  <li><a href="../index.html">Operational Structure</a><ul>
  <li><a href="index.html">Message Queue</a><ul>
      <li>Previous: <a href="mq_bundle.html" title="previous chapter">Message Queue Jobs and Transport Configuration</a></li>
      <li>Next: <a href="dbal.html" title="next chapter">DBAL Transport Options and Limitations</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
    <form class="search" action="../../../search.html" method="get">
      <div><i class="fa fa-search search-complete__icon"></i>&nbsp;<input class="search_text" type="text" placeholder="Search in documentation " name="q" />
      <input class="submit" type="submit" value="Search" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Oro Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
    </div>

    

    
  </body>
</html>