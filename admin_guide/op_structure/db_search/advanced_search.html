<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>API Advanced Search &#8212; OroCommerce 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Query Builder" href="query_builder.html" />
    <link rel="prev" title="API Simple Search" href="simple_search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
<div class="header">
    <div class="main-nav">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div id="nav-menu" class="navbar-top">
                <div class="nav-container">
                    <div class="navbar-header">
                        <a href="https://www.orocommerce.com/"
                           class="navbar-brand"><img
                                src="https://www.orocommerce.com/wp-content/themes/commerce/images/orocommerce_logo.svg"
                                alt="Open Source B2B eCommerce Platform - OroCommerce"></a>
                    </div>
                    <div class="navbar-header">
                        <p class="navbar-header" href="#">Documentation</p>
                    </div>
                    <div class="navbar-right">
                        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="query_builder.html" title="Query Builder"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="simple_search.html" title="API Simple Search"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Administrator Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >Operational Structure</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U">Manage Search in Oro Applications</a> &#187;</li> 
     <li class="nav-item nav-item-this">API Advanced Search</li>
      </ul>
    </div>
                    </div>

                </div>
            </div>

        </nav>
    </div>
</div>


      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="api-advanced-search">
<h1>API Advanced Search<a class="headerlink" href="#api-advanced-search" title="Permalink to this headline">¶</a></h1>
<p>REST and SOAP APIs allow to create advanced search queries.</p>
<p>Parameters for APIs requests:</p>
<ul class="simple">
<li><strong>query</strong> - search string</li>
</ul>
<p>REST API url: <a class="reference external" href="http://domail.com/api/rest/latest/search/advanced">http://domail.com/api/rest/latest/search/advanced</a></p>
<p>SOAP function name: advancedSearch</p>
<p>REST API work with get request only.</p>
</div>
<div class="section" id="result">
<h1>Result<a class="headerlink" href="#result" title="Permalink to this headline">¶</a></h1>
<p>Request returns an array with data:</p>
<ul class="simple">
<li><strong>records_count</strong> - the total number of results (without <code class="docutils literal"><span class="pre">offset</span></code>
and <code class="docutils literal"><span class="pre">max_results</span></code>) parameters</li>
<li><strong>count</strong> - count of records in the current request</li>
<li><strong>data</strong> - array with data. Data consists of the following values:<ul>
<li><strong>entity_name</strong> - class name of entity</li>
<li><strong>record_id</strong> - id of record from this entity</li>
<li><strong>record_string</strong> - the title of this record</li>
<li><strong>record_url</strong> - the given URL for this record</li>
<li><strong>selected_data</strong> - data from fields that have been explicitly
selected in the select clause (optional)</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="query-language">
<h1>Query Language<a class="headerlink" href="#query-language" title="Permalink to this headline">¶</a></h1>
<div class="section" id="keywords">
<h2>Keywords<a class="headerlink" href="#keywords" title="Permalink to this headline">¶</a></h2>
<div class="section" id="select">
<h3>select<a class="headerlink" href="#select" title="Permalink to this headline">¶</a></h3>
<p>Includes field values, taken from the search index, as an additional
&#8220;selected_data&#8221; section in the search result items. You can select one
or more fields to be attached to search results. The name of the field
should consist the type prefix, otherwise the default <code class="docutils literal"><span class="pre">text</span></code> type will
be used.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>select text.field_name
select (text.first_field_name, text.second_field_name)
</pre></div>
</div>
<p>You can use fieldname aliasing, as known in SQL, for example:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>select text.field_1 as name, text.field_2 as author
</pre></div>
</div>
<p>You can use fieldname aliasing, as known in SQL, for example:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>select (text.field_1 as name, text.field_2 as author)
</pre></div>
</div>
<p>Note that parentheses are mandatory.</p>
</div>
<div class="section" id="from">
<h3>from<a class="headerlink" href="#from" title="Permalink to this headline">¶</a></h3>
<p>A list of entity aliases to search from. It can be one alias or group.
Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>from one_alias
from (first_alias, second_alias)
</pre></div>
</div>
</div>
<div class="section" id="where">
<h3>where<a class="headerlink" href="#where" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">where</span></code> clause defines the search parameters.</p>
</div>
<div class="section" id="and-or">
<h3>and, or<a class="headerlink" href="#and-or" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">And</span></code> and <code class="docutils literal"><span class="pre">or</span></code> operators are used to combine multiple clauses, allowing you to refine your search.</p>
<p>Syntax:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>and field_type field_name operator value
or field_type field_name operator value
</pre></div>
</div>
<p>If the field type is not set, then text field type will be used.</p>
</div>
<div class="section" id="offset">
<h3>offset<a class="headerlink" href="#offset" title="Permalink to this headline">¶</a></h3>
<p>The offset clause allows to set the offset of the first result.</p>
</div>
<div class="section" id="max-results">
<h3>max_results<a class="headerlink" href="#max-results" title="Permalink to this headline">¶</a></h3>
<p>The set results count for the query.</p>
</div>
<div class="section" id="order-by">
<h3>order_by<a class="headerlink" href="#order-by" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">order_by</span></code> clause allows to sort results in ascending or descending order.</p>
<p>Syntax:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>order_by field_type field_name direction
</pre></div>
</div>
<p>If the field type is set, the text field will be assigned. Direction -
<code class="docutils literal"><span class="pre">ASC</span></code>, <code class="docutils literal"><span class="pre">DESC</span></code>. If the direction is not assigned, the
<code class="docutils literal"><span class="pre">ASC</span></code> direction will be used.</p>
</div>
</div>
<div class="section" id="field-types">
<h2>Field Types<a class="headerlink" href="#field-types" title="Permalink to this headline">¶</a></h2>
<p>User should specify field type in query string. By default, if type is
not set, it will be used text type. Supported field types: * <strong>text</strong>
* <strong>integer</strong> * <strong>decimal</strong> * <strong>datetime</strong></p>
</div>
<div class="section" id="operators">
<h2>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h2>
<p>Different field types support different operators in the <code class="docutils literal"><span class="pre">where</span></code> block.</p>
<div class="section" id="for-string-fields">
<h3>For String Fields<a class="headerlink" href="#for-string-fields" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>~ (CONTAINS)</strong> - operator <code class="docutils literal"><span class="pre">~</span></code> is used for set text field value.
If search value is string, it must be quoted. Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>name ~ value
name ~ &quot;string value&quot;
</pre></div>
</div>
</li>
<li><p class="first"><strong>!~ (NOT CONTAINS)</strong> - operator <code class="docutils literal"><span class="pre">!~</span></code> is used for search strings
without value. If the search value is a string, it must be quoted.
Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>name !~ value
name !~ &quot;string value&quot;
</pre></div>
</div>
</li>
<li><p class="first"><strong>like</strong> - operator <code class="docutils literal"><span class="pre">like</span></code> is used to finding records with a
specified substring in any position (<code class="docutils literal"><span class="pre">LIKE</span> <span class="pre">%value%</span></code> statement
behaviour). If the search value is a multi-word string that contains
whitespaces, it should be enclosed in quotes. Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>name like value
name like &quot;string value&quot;
</pre></div>
</div>
</li>
<li><p class="first"><strong>notlike</strong> - operator <code class="docutils literal"><span class="pre">notlike</span></code> is used to find records
without a specified substring in any position (<code class="docutils literal"><span class="pre">NOT</span> <span class="pre">LIKE</span> <span class="pre">%value%</span></code>
statement behaviour). If the search value is a multi-word string that
contains whitespaces, it should be enclosed in quotes. Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>name notlike value
name notlike &quot;string value&quot;
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="for-numeric-fields">
<h3>For Numeric Fields<a class="headerlink" href="#for-numeric-fields" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>= (EQUALS)</strong> - operator <code class="docutils literal"><span class="pre">=</span></code> is used to search for records where the
field value matches the specified value. Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>integer count = 100
decimal price = 12.5
datetime create_date = &quot;2013-01-01 00:00:00&quot;
</pre></div>
</div>
</li>
<li><p class="first"><strong>!= (NOT EQUALS)</strong> - operator <code class="docutils literal"><span class="pre">!=</span></code> is used to search for records
where the field value does not match the specified value. Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>integer count != 5
decimal price != 45
datetime create_date != &quot;2012-01-01 00:00:00&quot;
</pre></div>
</div>
</li>
<li><p class="first"><strong>&gt;, &lt;, &lt;=, &gt;=</strong> - Operators are used to search for the records where the field value is <code class="docutils literal"><span class="pre">greater</span></code>, <code class="docutils literal"><span class="pre">less</span></code>,
<code class="docutils literal"><span class="pre">less</span> <span class="pre">than</span> <span class="pre">or</span> <span class="pre">equals</span></code> or <code class="docutils literal"><span class="pre">greater</span> <span class="pre">than</span> <span class="pre">or</span> <span class="pre">equals</span></code> of the
specified value. Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>integer count &gt;= 5
decimal price &lt; 45
datetime create_date &gt; &quot;2012-01-01 00:00:00&quot;
</pre></div>
</div>
</li>
<li><p class="first"><strong>in</strong> - operator <code class="docutils literal"><span class="pre">in</span></code> is used to search for the records where the value is in
the specified set of data. Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>integer count in (5, 10, 15, 20)
decimal price in (12.2, 55.25)
</pre></div>
</div>
</li>
<li><p class="first"><strong>!in</strong> - operator <code class="docutils literal"><span class="pre">!in</span></code> is used to search for records where the field value is not
in the specified set of data. Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>integer count !in (1, 3, 5)
decimal price !in (2.1, 55, 45.4)
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="query-brackets">
<h3>Query Brackets<a class="headerlink" href="#query-brackets" title="Permalink to this headline">¶</a></h3>
<p>User can combined operators in the search query with brackets.</p>
<p>Examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>from oro_test where (owner ~ john and (integer count &gt; 10 or float price = 10)) or (owner ~ mary and (integer count &gt; 5 or float price = 150))
</pre></div>
</div>
</div>
</div>
<div class="section" id="query-examples">
<h2>Query Examples<a class="headerlink" href="#query-examples" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Search by demo products where the name contains the <code class="docutils literal"><span class="pre">opportunity</span></code> string
and where the price is greater than <code class="docutils literal"><span class="pre">100</span></code>.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>from demo_product where name ~ opportunity and double price &gt; 100
</pre></div>
</div>
</li>
<li><p class="first">Search and return entity data plus the name and the description of demo
products.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>select (name, description) from demo_product
</pre></div>
</div>
</li>
<li><p class="first">Search by all entities where the integer field count is not equal <code class="docutils literal"><span class="pre">10</span></code>.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>integer count != 10
</pre></div>
</div>
</li>
<li><p class="first">Search by all entities where text field <code class="docutils literal"><span class="pre">all_text</span></code> does not contain the
<code class="docutils literal"><span class="pre">opportunity</span></code> string.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>all_text !~ &quot;opportunity&quot;
</pre></div>
</div>
</li>
<li><p class="first">Select <code class="docutils literal"><span class="pre">10</span></code> results from the <code class="docutils literal"><span class="pre">demo_products</span></code> and <code class="docutils literal"><span class="pre">demo_categories</span></code>
entities where the text field description contains <code class="docutils literal"><span class="pre">test</span></code>, order
<code class="docutils literal"><span class="pre">ASC</span></code> by text field name and offset first result to <code class="docutils literal"><span class="pre">5</span></code>.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>from (demo_products, demo_categories) where description ~ test order_by name offset 5 max_results 10
</pre></div>
</div>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../install_upgrade/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../seo_config_guide/index.html">SEO Configuration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../frontstore_guide/index.html">Front Store Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_guide/index.html">Developer Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Administrator Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Operational Structure</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../elastic_search.html">Elasticsearch</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Manage Search in Oro Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cache.html">Cache in Oro Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mq/index.html">Message Queue</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../optimize_server_compression_and_caching.html">Web Server Performance Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../price_list_sharding.html">How to Configure Price List Sharding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../optimize_index_and_price_calculation.html">Optimize Website Indexation and Price Recalculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../package_manager.html">Extensions and Package Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../processes.html">Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jobs.html">Job Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cron.html">Scheduled Tasks via Cron</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../monitoring/index.html">Healthcheck and Data Monitoring</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../configuration_guide/index.html">Configuration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../community/index.html">Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../system_requirements.html">System Requirements</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Oro Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../../../_sources/admin_guide/op_structure/db_search/advanced_search.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>