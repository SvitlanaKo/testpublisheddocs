<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Optimize Website Indexation and Price Recalculation &#8212; OroCommerce 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Extensions and Package Manager" href="package_manager.html" />
    <link rel="prev" title="How to Configure Price List Sharding" href="price_list_sharding.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

<script language="javascript" type="text/javascript">
    <!--
    var materialdropdown = document.querySelector('.material-dropdown'),
    middle = document.querySelector('.middle'),
    cross = document.querySelector('.cross'),
    dropdown = document.querySelector('.dropdown');

materialdropdown.addEventListener('click', function() {
  middle.classList.toggle('active');
  cross.classList.toggle('active');
  dropdown.classList.toggle('active');
})
    -->
  </script>
    


  </head>
  <body role="document">
  

    <div class="document">
<div class="header">
    <div class="main-nav">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div id="nav-menu" class="navbar-top">
                <div class="nav-container">
                    <div class="navbar-header">
                        <a href="https://www.orocommerce.com/"
                           class="navbar-brand"><img
                                src="https://www.orocommerce.com/wp-content/themes/commerce/images/orocommerce_logo.svg"
                                alt="Open Source B2B eCommerce Platform - OroCommerce"></a>
                    </div>
                    <div class="navbar-header">
                        <p class="navbar-header" href="#">Documentation</p>
                    </div>
                    <div class="navbar-right">
                        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="package_manager.html" title="Extensions and Package Manager"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="price_list_sharding.html" title="How to Configure Price List Sharding"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Administrator Guide</a> &#187;</li> 
     <li class="nav-item nav-item-this">Optimize Website Indexation and Price Recalculation</li>
      </ul>
    </div>
                    </div>

                </div>
            </div>

        </nav>
    </div>
</div>


      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="optimize-website-indexation-and-price-recalculation">
<span id="admin-optimize-indexation"></span><h1>Optimize Website Indexation and Price Recalculation<a class="headerlink" href="#optimize-website-indexation-and-price-recalculation" title="Permalink to this headline">¶</a></h1>
<p>While website indexation and price recalculation background processes are vital
for OroCommerce store, they may be time- and resource- consuming.</p>
<p>This topic summarizes best practices and advice that helps you maximize the
efficiency of these processes by tuning your software and hardware.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Price recalculation is required before the indexation.</p>
</div>
<div class="section" id="price-recalculation">
<h2>Price Recalculation<a class="headerlink" href="#price-recalculation" title="Permalink to this headline">¶</a></h2>
<p>The price list data may contain quite complex dependencies and
formula. When price recalculation happens, all of the price list data is
analyzed, recalculated if necessary, and saved to the simplified combine tables.
This cache-like approach enables quicker data retrieval and increases the
OroCommerce storefront responsiveness.</p>
<p>To launch the price recalculation process, run the following console command:</p>
<p><code class="docutils literal"><span class="pre">app/console</span> <span class="pre">oro:price-lists:recalculation</span> <span class="pre">--all</span></code></p>
<p>Execution time may vary from seconds on bare factory data to multiple hours for
several hundred thousand product prices.</p>
<p>To optimize the price recalculation, use the <code class="docutils literal"><span class="pre">--disable-triggers</span></code> parameter in
the command above to disable the triggers and speed up the SQL insert execution.</p>
</div>
<div class="section" id="indexation">
<h2>Indexation<a class="headerlink" href="#indexation" title="Permalink to this headline">¶</a></h2>
<p>For faster search and access, the business data in the database should be
indexed via an internal search engine. After indexation, the user gets prompt
search and auto-complete results even for the extremely large amount of raw data.
The engine indexes the information (prices, product descriptions, SEO, attributes
etc.) and guarantees quick data retrieval leaving the original data untouched.</p>
<p>OroCommerce search index may be persisted in the database layer (using ORM) or
on the file system using the ElasticSearch (the latter is available in the
Enterprise edition only).</p>
<p>To launch the indexation process, use the following console command:</p>
<p><code class="docutils literal"><span class="pre">app/console</span> <span class="pre">oro:website:reindex</span></code></p>
<p>Execution time may range from few minutes to several hours, depending on the
hardware and software configuration and the volume of data that is indexed.</p>
<p>To speed up the indexation, you can:</p>
<ul class="simple">
<li>Use parallel (multi-thread) indexation. As a prerequisite, ensure that several MessageQueue consumers are running. Next, run the command above with the <code class="docutils literal"><span class="pre">--scheduled</span></code> parameter. Depending on the number of CPU cores and consumers running, this can drastically cut the indexation time.</li>
<li>Use the <code class="docutils literal"><span class="pre">--product-id</span></code> switch together with <code class="docutils literal"><span class="pre">--scheduled</span></code> (multithreaded) indexation to control the amount of entities, indexed per message. This will control indexation load distribution among several consumers and allow scaling. Use an example value of <code class="docutils literal"><span class="pre">*/1000</span></code> to generate messages with 1000 products each.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install_upgrade/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seo_config_guide/index.html">SEO Configuration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frontstore_guide/index.html">Storefront Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Developer Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Administrator Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="op_structure/index.html">Operational Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimize_server_compression_and_caching.html">Web Server Performance Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="price_list_sharding.html">How to Configure Price List Sharding</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Optimize Website Indexation and Price Recalculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="package_manager.html">Extensions and Package Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="processes.html">Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobs.html">Job Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="cron.html">Scheduled Tasks via Cron</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitoring/index.html">Healthcheck and Data Monitoring</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_guide/index.html">Configuration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system_requirements.html">System Requirements</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Oro Team All rights reserved.
           
      
      |
      <a href="../_sources/admin_guide/optimize_index_and_price_calculation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>