<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Optimize Website Indexation and Price Recalculation &#8212; OroCommerce 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="System Requirements" href="../system_requirements.html" />
    <link rel="prev" title="How to Configure Price List Sharding" href="price_list_sharding.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

<script language="javascript" type="text/javascript">
    <!--
    var materialdropdown = document.querySelector('.material-dropdown'),
    middle = document.querySelector('.middle'),
    cross = document.querySelector('.cross'),
    dropdown = document.querySelector('.dropdown');

materialdropdown.addEventListener('click', function() {
  middle.classList.toggle('active');
  cross.classList.toggle('active');
  dropdown.classList.toggle('active');
})
    -->
  </script>
    


  </head>
  <body role="document">
  

    <div class="document">
<div class="header">
    <div class="main-nav">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div id="nav-menu" class="navbar-top">
                <div class="nav-container">
                    <div class="navbar-header">
                        <a href="https://www.orocommerce.com/"
                           class="navbar-brand"><img
                                src="https://www.orocommerce.com/wp-content/themes/commerce/images/orocommerce_logo.svg"
                                alt="Open Source B2B eCommerce Platform - OroCommerce"></a>
                    </div>
                    <div class="navbar-header">
                        <p class="navbar-header" href="#">Documentation for... </p>
                    </div>
                    <div id="navbar" class="navbar-left">
                        <div class="navbar-collapse collapse">
                            <div class="menu-header-menu-container">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">All Users</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/getting_started/index.html">Getting Started with UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/inventory/index.html">Warehouses and Inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/customers/index.html">Customers and Customer Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/quotes/index.html">Quotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/payment/index.html">Payment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/shipping/index.html">Shipping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/marketing_web_catalog/index.html">Web Catalogs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/marketing_landing_pages/index.html">Landing Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../seo_config_guide/index.html">SEO Configuration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/taxes/index.html">Taxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/segments/index.html">Segments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/system/index.html">System Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../frontstore_guide/index.html">B2B Buyer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../frontstore_guide/getting_started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frontstore_guide/navigation/index.html">Navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frontstore_guide/profile/index.html">My Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frontstore_guide/users_roles/index.html">My Organization Users and Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frontstore_guide/orders/index.html">Orders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frontstore_guide/rfq/index.html">Request for Quote</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frontstore_guide/quotes/index.html">Quotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frontstore_guide/shopping_lists/index.html">Shopping Lists</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../seo_config_guide/index.html">SEO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../seo_config_guide/website/index.html">Website Configuration</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Admin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="price_list_sharding.html">How to Configure Price List Sharding</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Optimize Website Indexation and Price Recalculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system_requirements.html">System Requirements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Developer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/basics/index.html">OroPlatform Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/extend_and_customize/index.html">Customizing Oro Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/integration/index.html">Web Services API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/theme/index.html">Customizing the Theme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/install_upgrade_and_patch/index.html">Extension and Patch Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/reference/index.html">Annotation and Configuration Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/entities/index.html">Using and Managing Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/other/index.html">How to... Articles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../community/contribute.html">Contributing to Oro Source Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/translations.html">Contributing to Translatiion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/write.html">Contributing to Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/issues/index.html">Contacting Support and Reporting Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/question.html">Submitting a Question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/release.html">Release Process</a></li>
</ul>
</li>
</ul>


                                <!--
                                <ul class="nav">
                                    <li><a href="#">Installation</a></li>
                                    <li><a href="#">Configuration</a></li>
                                    <li><a href="#">Use <i class="fa fa-search search-complete__icon"></i></a>
                                        <ul class="sub-nav">
                                            <li class="sub-menu" ><a href="#">HTML</a>
                                            </li>
                                            <li class="sub-menu" ><a
                                                   href="#">CSS</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Resets</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Grids</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Frameworks</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li><a class="sub-menu" href="#">Development</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Ajax</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">jQuery</a>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                    <li><a href="#">Contribution</a>
                                        <ul class="sub-nav">
                                            <li class="sub-menu"><a href="#">Themes</a>
                                            </li>
                                            <li class="sub-menu"><a href="#">Plugins</a>
                                            </li>
                                            <li class="sub-menu"><a href="#">Custom
                                                Post Types</a>
                                                <ul class="sub-nav">
                                                    <li class="sub-menu"><a
                                                           href="#">Portfolios</a>
                                                    </li>
                                                    <li class="sub-menu"><a
                                                           href="#">Testimonials</a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="sub-menu"><a href="#">Options</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                                -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </nav>
    </div>
</div>


      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="optimize-website-indexation-and-price-recalculation">
<h1>Optimize Website Indexation and Price Recalculation<a class="headerlink" href="#optimize-website-indexation-and-price-recalculation" title="Permalink to this headline">¶</a></h1>
<p>While website indexation and price recalculation background processes are vital
for OroCommerce store, they may be time- and resource- consuming.</p>
<p>This topic summarizes best practices and advice that helps you maximize the
efficiency of these processes by tuning your software and hardware.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Price recalculation is required before the indexation.</p>
</div>
<div class="section" id="price-recalculation">
<h2>Price Recalculation<a class="headerlink" href="#price-recalculation" title="Permalink to this headline">¶</a></h2>
<p>The price list data may contain quite complex dependencies and
formula. When price recalculation happens, all of the price list data is
analyzed, recalculated if necessary, and saved to the simplified combine tables.
This cache-like approach enables quicker data retrieval and increases the
OroCommerce front store responsiveness.</p>
<p>To launch the price recalculation process, run the following console command:</p>
<p><code class="docutils literal"><span class="pre">app/console</span> <span class="pre">oro:price-lists:recalculation</span> <span class="pre">--all</span></code></p>
<p>Execution time may vary from seconds on bare factory data to multiple hours for
several hundred thousand product prices.</p>
<p>To optimize the price recalculation, use the <code class="docutils literal"><span class="pre">--disable-triggers</span></code> parameter in
the command above to disable the triggers and speed up the SQL insert execution.</p>
</div>
<div class="section" id="indexation">
<h2>Indexation<a class="headerlink" href="#indexation" title="Permalink to this headline">¶</a></h2>
<p>For faster search and access, the business data in the database should be
indexed via an internal search engine. After indexation, the user gets prompt
search and auto-complete results even for the extremely large amount of raw data.
The engine indexes the information (prices, product descriptions, SEO, attributes
etc.) and guarantees quick data retrieval leaving the original data untouched.</p>
<p>OroCommerce search index may be persisted in the database layer (using ORM) or
on the file system using the ElasticSearch (the latter is available in the
Enterprise edition only).</p>
<p>To launch the indexation process, use the following console command:</p>
<p><code class="docutils literal"><span class="pre">app/console</span> <span class="pre">oro:website:reindex</span></code></p>
<p>Execution time may range from few minutes to several hours, depending on the
hardware and software configuration and the volume of data that is indexed.</p>
<p>To speed up the indexation, you can:</p>
<ul class="simple">
<li>Use parallel (multi-thread) indexation. As a prerequisite, ensure that several MessageQueue consumers are running. Next, run the command above with the <code class="docutils literal"><span class="pre">--scheduled</span></code> parameter. Depending on the number of CPU cores and consumers running, this can drastically cut the indexation time.</li>
<li>Use the <code class="docutils literal"><span class="pre">--product-id</span></code> switch together with <code class="docutils literal"><span class="pre">--scheduled</span></code> (multithreaded) indexation to control the amount of entities, indexed per message. This will control indexation load distribution among several consumers and allow scaling. Use an example value of <code class="docutils literal"><span class="pre">*/1000</span></code> to generate messages with 1000 products each.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<ul>
<li><a class="reference internal" href="#">Optimize Website Indexation and Price Recalculation</a><ul>
<li><a class="reference internal" href="#price-recalculation">Price Recalculation</a></li>
<li><a class="reference internal" href="#indexation">Indexation</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Administrator Guide</a><ul>
      <li>Previous: <a href="price_list_sharding.html" title="previous chapter">How to Configure Price List Sharding</a></li>
      <li>Next: <a href="../system_requirements.html" title="next chapter">System Requirements</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
    <form class="search" action="../search.html" method="get">
      <div><i class="fa fa-search search-complete__icon"></i>&nbsp;<input class="search_text" type="text" placeholder="Search in documentation " name="q" />
      <input class="submit" type="submit" value="Search" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Oro Inc. All rights reserved.
           
      
    </div>

    

    
  </body>
</html>